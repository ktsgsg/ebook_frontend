var gv=s=>{throw TypeError(s)};var Bd=(s,t,e)=>t.has(s)||gv("Cannot "+e);var le=(s,t,e)=>(Bd(s,t,"read from private field"),e?e.call(s):t.get(s)),Ai=(s,t,e)=>t.has(s)?gv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),wn=(s,t,e,n)=>(Bd(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),wi=(s,t,e)=>(Bd(s,t,"access private method"),e);var bv=(s,t,e,n)=>({set _(r){wn(s,t,r,e)},get _(){return le(s,t,n)}});function g_(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(s,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function c0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Id={exports:{}},vo={};var vv;function b_(){if(vv)return vo;vv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:s,type:n,key:l,ref:r!==void 0?r:null,props:o}}return vo.Fragment=t,vo.jsx=e,vo.jsxs=e,vo}var yv;function v_(){return yv||(yv=1,Id.exports=b_()),Id.exports}var P=v_(),Fd={exports:{}},Tt={};var Sv;function y_(){if(Sv)return Tt;Sv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function w(N,X,W){this.props=N,this.context=X,this.refs=E,this.updater=W||A}w.prototype.isReactComponent={},w.prototype.setState=function(N,X){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,X,"setState")},w.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function T(){}T.prototype=w.prototype;function x(N,X,W){this.props=N,this.context=X,this.refs=E,this.updater=W||A}var M=x.prototype=new T;M.constructor=x,S(M,w.prototype),M.isPureReactComponent=!0;var O=Array.isArray;function k(){}var R={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function U(N,X,W){var st=W.ref;return{$$typeof:s,type:N,key:X,ref:st!==void 0?st:null,props:W}}function Z(N,X){return U(N.type,X,N.props)}function H(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function it(N){var X={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(W){return X[W]})}var Q=/\/+/g;function nt(N,X){return typeof N=="object"&&N!==null&&N.key!=null?it(""+N.key):X.toString(36)}function rt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(k,k):(N.status="pending",N.then(function(X){N.status==="pending"&&(N.status="fulfilled",N.value=X)},function(X){N.status==="pending"&&(N.status="rejected",N.reason=X)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function L(N,X,W,st,ut){var gt=typeof N;(gt==="undefined"||gt==="boolean")&&(N=null);var at=!1;if(N===null)at=!0;else switch(gt){case"bigint":case"string":case"number":at=!0;break;case"object":switch(N.$$typeof){case s:case t:at=!0;break;case p:return at=N._init,L(at(N._payload),X,W,st,ut)}}if(at)return ut=ut(N),at=st===""?"."+nt(N,0):st,O(ut)?(W="",at!=null&&(W=at.replace(Q,"$&/")+"/"),L(ut,X,W,"",function(jt){return jt})):ut!=null&&(H(ut)&&(ut=Z(ut,W+(ut.key==null||N&&N.key===ut.key?"":(""+ut.key).replace(Q,"$&/")+"/")+at)),X.push(ut)),1;at=0;var _t=st===""?".":st+":";if(O(N))for(var wt=0;wt<N.length;wt++)st=N[wt],gt=_t+nt(st,wt),at+=L(st,X,W,gt,ut);else if(wt=y(N),typeof wt=="function")for(N=wt.call(N),wt=0;!(st=N.next()).done;)st=st.value,gt=_t+nt(st,wt++),at+=L(st,X,W,gt,ut);else if(gt==="object"){if(typeof N.then=="function")return L(rt(N),X,W,st,ut);throw X=String(N),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return at}function F(N,X,W){if(N==null)return N;var st=[],ut=0;return L(N,st,"","",function(gt){return X.call(W,gt,ut++)}),st}function V(N){if(N._status===-1){var X=N._result;X=X(),X.then(function(W){(N._status===0||N._status===-1)&&(N._status=1,N._result=W)},function(W){(N._status===0||N._status===-1)&&(N._status=2,N._result=W)}),N._status===-1&&(N._status=0,N._result=X)}if(N._status===1)return N._result.default;throw N._result}var lt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},yt={map:F,forEach:function(N,X,W){F(N,function(){X.apply(this,arguments)},W)},count:function(N){var X=0;return F(N,function(){X++}),X},toArray:function(N){return F(N,function(X){return X})||[]},only:function(N){if(!H(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Tt.Activity=m,Tt.Children=yt,Tt.Component=w,Tt.Fragment=e,Tt.Profiler=r,Tt.PureComponent=x,Tt.StrictMode=n,Tt.Suspense=d,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return R.H.useMemoCache(N)}},Tt.cache=function(N){return function(){return N.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(N,X,W){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var st=S({},N.props),ut=N.key;if(X!=null)for(gt in X.key!==void 0&&(ut=""+X.key),X)!B.call(X,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&X.ref===void 0||(st[gt]=X[gt]);var gt=arguments.length-2;if(gt===1)st.children=W;else if(1<gt){for(var at=Array(gt),_t=0;_t<gt;_t++)at[_t]=arguments[_t+2];st.children=at}return U(N.type,ut,st)},Tt.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},Tt.createElement=function(N,X,W){var st,ut={},gt=null;if(X!=null)for(st in X.key!==void 0&&(gt=""+X.key),X)B.call(X,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ut[st]=X[st]);var at=arguments.length-2;if(at===1)ut.children=W;else if(1<at){for(var _t=Array(at),wt=0;wt<at;wt++)_t[wt]=arguments[wt+2];ut.children=_t}if(N&&N.defaultProps)for(st in at=N.defaultProps,at)ut[st]===void 0&&(ut[st]=at[st]);return U(N,gt,ut)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(N){return{$$typeof:u,render:N}},Tt.isValidElement=H,Tt.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:V}},Tt.memo=function(N,X){return{$$typeof:f,type:N,compare:X===void 0?null:X}},Tt.startTransition=function(N){var X=R.T,W={};R.T=W;try{var st=N(),ut=R.S;ut!==null&&ut(W,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(k,lt)}catch(gt){lt(gt)}finally{X!==null&&W.types!==null&&(X.types=W.types),R.T=X}},Tt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Tt.use=function(N){return R.H.use(N)},Tt.useActionState=function(N,X,W){return R.H.useActionState(N,X,W)},Tt.useCallback=function(N,X){return R.H.useCallback(N,X)},Tt.useContext=function(N){return R.H.useContext(N)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(N,X){return R.H.useDeferredValue(N,X)},Tt.useEffect=function(N,X){return R.H.useEffect(N,X)},Tt.useEffectEvent=function(N){return R.H.useEffectEvent(N)},Tt.useId=function(){return R.H.useId()},Tt.useImperativeHandle=function(N,X,W){return R.H.useImperativeHandle(N,X,W)},Tt.useInsertionEffect=function(N,X){return R.H.useInsertionEffect(N,X)},Tt.useLayoutEffect=function(N,X){return R.H.useLayoutEffect(N,X)},Tt.useMemo=function(N,X){return R.H.useMemo(N,X)},Tt.useOptimistic=function(N,X){return R.H.useOptimistic(N,X)},Tt.useReducer=function(N,X,W){return R.H.useReducer(N,X,W)},Tt.useRef=function(N){return R.H.useRef(N)},Tt.useState=function(N){return R.H.useState(N)},Tt.useSyncExternalStore=function(N,X,W){return R.H.useSyncExternalStore(N,X,W)},Tt.useTransition=function(){return R.H.useTransition()},Tt.version="19.2.4",Tt}var Av;function Jc(){return Av||(Av=1,Fd.exports=y_()),Fd.exports}var D=Jc();const Mo=c0(D),Pf=g_({__proto__:null,default:Mo},[D]);var jd={exports:{}},yo={},Ud={exports:{}},Hd={};var wv;function S_(){return wv||(wv=1,(function(s){function t(L,F){var V=L.length;L.push(F);t:for(;0<V;){var lt=V-1>>>1,yt=L[lt];if(0<r(yt,F))L[lt]=F,L[V]=yt,V=lt;else break t}}function e(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var F=L[0],V=L.pop();if(V!==F){L[0]=V;t:for(var lt=0,yt=L.length,N=yt>>>1;lt<N;){var X=2*(lt+1)-1,W=L[X],st=X+1,ut=L[st];if(0>r(W,V))st<yt&&0>r(ut,W)?(L[lt]=ut,L[st]=V,lt=st):(L[lt]=W,L[X]=V,lt=X);else if(st<yt&&0>r(ut,V))L[lt]=ut,L[st]=V,lt=st;else break t}}return F}function r(L,F){var V=L.sortIndex-F.sortIndex;return V!==0?V:L.id-F.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();s.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,m=null,v=3,y=!1,A=!1,S=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function M(L){for(var F=e(f);F!==null;){if(F.callback===null)n(f);else if(F.startTime<=L)n(f),F.sortIndex=F.expirationTime,t(d,F);else break;F=e(f)}}function O(L){if(S=!1,M(L),!A)if(e(d)!==null)A=!0,k||(k=!0,it());else{var F=e(f);F!==null&&rt(O,F.startTime-L)}}var k=!1,R=-1,B=5,U=-1;function Z(){return E?!0:!(s.unstable_now()-U<B)}function H(){if(E=!1,k){var L=s.unstable_now();U=L;var F=!0;try{t:{A=!1,S&&(S=!1,T(R),R=-1),y=!0;var V=v;try{e:{for(M(L),m=e(d);m!==null&&!(m.expirationTime>L&&Z());){var lt=m.callback;if(typeof lt=="function"){m.callback=null,v=m.priorityLevel;var yt=lt(m.expirationTime<=L);if(L=s.unstable_now(),typeof yt=="function"){m.callback=yt,M(L),F=!0;break e}m===e(d)&&n(d),M(L)}else n(d);m=e(d)}if(m!==null)F=!0;else{var N=e(f);N!==null&&rt(O,N.startTime-L),F=!1}}break t}finally{m=null,v=V,y=!1}F=void 0}}finally{F?it():k=!1}}}var it;if(typeof x=="function")it=function(){x(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,nt=Q.port2;Q.port1.onmessage=H,it=function(){nt.postMessage(null)}}else it=function(){w(H,0)};function rt(L,F){R=w(function(){L(s.unstable_now())},F)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(L){L.callback=null},s.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<L?Math.floor(1e3/L):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_next=function(L){switch(v){case 1:case 2:case 3:var F=3;break;default:F=v}var V=v;v=F;try{return L()}finally{v=V}},s.unstable_requestPaint=function(){E=!0},s.unstable_runWithPriority=function(L,F){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=v;v=L;try{return F()}finally{v=V}},s.unstable_scheduleCallback=function(L,F,V){var lt=s.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?lt+V:lt):V=lt,L){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=V+yt,L={id:p++,callback:F,priorityLevel:L,startTime:V,expirationTime:yt,sortIndex:-1},V>lt?(L.sortIndex=V,t(f,L),e(d)===null&&L===e(f)&&(S?(T(R),R=-1):S=!0,rt(O,V-lt))):(L.sortIndex=yt,t(d,L),A||y||(A=!0,k||(k=!0,it()))),L},s.unstable_shouldYield=Z,s.unstable_wrapCallback=function(L){var F=v;return function(){var V=v;v=F;try{return L.apply(this,arguments)}finally{v=V}}}})(Hd)),Hd}var _v;function A_(){return _v||(_v=1,Ud.exports=S_()),Ud.exports}var Gd={exports:{}},sn={};var Ev;function w_(){if(Ev)return sn;Ev=1;var s=Jc();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,sn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},sn.flushSync=function(d){var f=l.T,p=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=f,n.p=p,n.d.f()}},sn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},sn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},sn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:y}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},sn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},sn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},sn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},sn.requestFormReset=function(d){n.d.r(d)},sn.unstable_batchedUpdates=function(d,f){return d(f)},sn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},sn.useFormStatus=function(){return l.H.useHostTransitionStatus()},sn.version="19.2.4",sn}var xv;function u0(){if(xv)return Gd.exports;xv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Gd.exports=w_(),Gd.exports}var Tv;function __(){if(Tv)return yo;Tv=1;var s=A_(),t=Jc(),e=u0();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var c=i,h=a;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return d(g),i;if(b===h)return d(g),a;b=b.sibling}throw Error(n(188))}if(c.return!==h.return)c=g,h=b;else{for(var _=!1,C=g.child;C;){if(C===c){_=!0,c=g,h=b;break}if(C===h){_=!0,h=g,c=b;break}C=C.sibling}if(!_){for(C=b.child;C;){if(C===c){_=!0,c=b,h=g;break}if(C===h){_=!0,h=b,c=g;break}C=C.sibling}if(!_)throw Error(n(189))}}if(c.alternate!==h)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function it(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Symbol.for("react.client.reference");function nt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case w:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case x:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case M:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return a=i.displayName||null,a!==null?a:nt(i.type)||"Memo";case B:a=i._payload,i=i._init;try{return nt(i(a))}catch{}}return null}var rt=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},lt=[],yt=-1;function N(i){return{current:i}}function X(i){0>yt||(i.current=lt[yt],lt[yt]=null,yt--)}function W(i,a){yt++,lt[yt]=i.current,i.current=a}var st=N(null),ut=N(null),gt=N(null),at=N(null);function _t(i,a){switch(W(gt,a),W(ut,i),W(st,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Fb(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Fb(a),i=jb(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}X(st),W(st,i)}function wt(){X(st),X(ut),X(gt)}function jt(i){i.memoizedState!==null&&W(at,i);var a=st.current,c=jb(a,i.type);a!==c&&(W(ut,i),W(st,c))}function Dt(i){ut.current===i&&(X(st),X(ut)),at.current===i&&(X(at),po._currentValue=V)}var ot,Rt;function Bt(i){if(ot===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);ot=a&&a[1]||"",Rt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+i+Rt}var ie=!1;function ye(i,a){if(!i||ie)return"";ie=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(q){var Y=q}Reflect.construct(i,[],tt)}else{try{tt.call()}catch(q){Y=q}i.call(tt.prototype)}}else{try{throw Error()}catch(q){Y=q}(tt=i())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(q){if(q&&Y&&typeof q.stack=="string")return[q.stack,Y.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),_=b[0],C=b[1];if(_&&C){var z=_.split(`
`),$=C.split(`
`);for(g=h=0;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;for(;g<$.length&&!$[g].includes("DetermineComponentFrameRoot");)g++;if(h===z.length||g===$.length)for(h=z.length-1,g=$.length-1;1<=h&&0<=g&&z[h]!==$[g];)g--;for(;1<=h&&0<=g;h--,g--)if(z[h]!==$[g]){if(h!==1||g!==1)do if(h--,g--,0>g||z[h]!==$[g]){var K=`
`+z[h].replace(" at new "," at ");return i.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",i.displayName)),K}while(1<=h&&0<=g);break}}}finally{ie=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Bt(c):""}function Fe(i,a){switch(i.tag){case 26:case 27:case 5:return Bt(i.type);case 16:return Bt("Lazy");case 13:return i.child!==a&&a!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return ye(i.type,!1);case 11:return ye(i.type.render,!1);case 1:return ye(i.type,!0);case 31:return Bt("Activity");default:return""}}function fn(i){try{var a="",c=null;do a+=Fe(i,c),c=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Le=Object.prototype.hasOwnProperty,je=s.unstable_scheduleCallback,en=s.unstable_cancelCallback,Un=s.unstable_shouldYield,Hn=s.unstable_requestPaint,he=s.unstable_now,oi=s.unstable_getCurrentPriorityLevel,li=s.unstable_ImmediatePriority,Gn=s.unstable_UserBlockingPriority,Mn=s.unstable_NormalPriority,mi=s.unstable_LowPriority,Ee=s.unstable_IdlePriority,Se=s.log,Ji=s.unstable_setDisableYieldValue,pn=null,nn=null;function an(i){if(typeof Se=="function"&&Ji(i),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(pn,i)}catch{}}var Ve=Math.clz32?Math.clz32:Jo,_u=Math.log,Eu=Math.LN2;function Jo(i){return i>>>=0,i===0?32:31-(_u(i)/Eu|0)|0}var gr=256,Ps=262144,Bs=4194304;function gi(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function br(i,a,c){var h=i.pendingLanes;if(h===0)return 0;var g=0,b=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var C=h&134217727;return C!==0?(h=C&~b,h!==0?g=gi(h):(_&=C,_!==0?g=gi(_):c||(c=C&~i,c!==0&&(g=gi(c))))):(C=h&~b,C!==0?g=gi(C):_!==0?g=gi(_):c||(c=h&~i,c!==0&&(g=gi(c)))),g===0?0:a!==0&&a!==g&&(a&b)===0&&(b=g&-g,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:g}function ts(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function tl(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function el(){var i=Bs;return Bs<<=1,(Bs&62914560)===0&&(Bs=4194304),i}function xu(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ca(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function s1(i,a,c,h,g,b){var _=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var C=i.entanglements,z=i.expirationTimes,$=i.hiddenUpdates;for(c=_&~c;0<c;){var K=31-Ve(c),tt=1<<K;C[K]=0,z[K]=-1;var Y=$[K];if(Y!==null)for($[K]=null,K=0;K<Y.length;K++){var q=Y[K];q!==null&&(q.lane&=-536870913)}c&=~tt}h!==0&&Ap(i,h,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(_&~a))}function Ap(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-Ve(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|c&261930}function wp(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var h=31-Ve(c),g=1<<h;g&a|i[h]&a&&(i[h]|=a),c&=~g}}function _p(i,a){var c=a&-a;return c=(c&42)!==0?1:Tu(c),(c&(i.suspendedLanes|a))!==0?0:c}function Tu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Cu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ep(){var i=F.p;return i!==0?i:(i=window.event,i===void 0?32:cv(i.type))}function xp(i,a){var c=F.p;try{return F.p=i,a()}finally{F.p=c}}var es=Math.random().toString(36).slice(2),Xe="__reactFiber$"+es,mn="__reactProps$"+es,vr="__reactContainer$"+es,Mu="__reactEvents$"+es,r1="__reactListeners$"+es,a1="__reactHandles$"+es,Tp="__reactResources$"+es,Ma="__reactMarker$"+es;function Du(i){delete i[Xe],delete i[mn],delete i[Mu],delete i[r1],delete i[a1]}function yr(i){var a=i[Xe];if(a)return a;for(var c=i.parentNode;c;){if(a=c[vr]||c[Xe]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Yb(i);i!==null;){if(c=i[Xe])return c;i=Yb(i)}return a}i=c,c=i.parentNode}return null}function Sr(i){if(i=i[Xe]||i[vr]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Da(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function Ar(i){var a=i[Tp];return a||(a=i[Tp]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ue(i){i[Ma]=!0}var Cp=new Set,Mp={};function Is(i,a){wr(i,a),wr(i+"Capture",a)}function wr(i,a){for(Mp[i]=a,i=0;i<a.length;i++)Cp.add(a[i])}var o1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dp={},Op={};function l1(i){return Le.call(Op,i)?!0:Le.call(Dp,i)?!1:o1.test(i)?Op[i]=!0:(Dp[i]=!0,!1)}function nl(i,a,c){if(l1(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function il(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function Oi(i,a,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+h)}}function $n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Rp(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function c1(i,a,c){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,b=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(_){c=""+_,b.call(this,_)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ou(i){if(!i._valueTracker){var a=Rp(i)?"checked":"value";i._valueTracker=c1(i,a,""+i[a])}}function kp(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return i&&(h=Rp(i)?i.checked?"true":"false":i.value),i=h,i!==c?(a.setValue(i),!0):!1}function sl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var u1=/[\n"\\]/g;function Vn(i){return i.replace(u1,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ru(i,a,c,h,g,b,_,C){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),a!=null?_==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+$n(a)):i.value!==""+$n(a)&&(i.value=""+$n(a)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),a!=null?ku(i,_,$n(a)):c!=null?ku(i,_,$n(c)):h!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+$n(C):i.removeAttribute("name")}function Np(i,a,c,h,g,b,_,C){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){Ou(i);return}c=c!=null?""+$n(c):"",a=a!=null?""+$n(a):c,C||a===i.value||(i.value=a),i.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=C?i.checked:!!h,i.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),Ou(i)}function ku(i,a,c){a==="number"&&sl(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function _r(i,a,c,h){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&h&&(i[c].defaultSelected=!0)}else{for(c=""+$n(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Lp(i,a,c){if(a!=null&&(a=""+$n(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+$n(c):""}function zp(i,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(n(92));if(rt(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=$n(a),i.defaultValue=c,h=i.textContent,h===c&&h!==""&&h!==null&&(i.value=h),Ou(i)}function Er(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var h1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pp(i,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,c):typeof c!="number"||c===0||h1.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function Bp(i,a,c){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&c[g]!==h&&Pp(i,g,h)}else for(var b in a)a.hasOwnProperty(b)&&Pp(i,b,a[b])}function Nu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var d1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),f1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rl(i){return f1.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ri(){}var Lu=null;function zu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xr=null,Tr=null;function Ip(i){var a=Sr(i);if(a&&(i=a.stateNode)){var c=i[mn]||null;t:switch(i=a.stateNode,a.type){case"input":if(Ru(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Vn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==i&&h.form===i.form){var g=h[mn]||null;if(!g)throw Error(n(90));Ru(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===i.form&&kp(h)}break t;case"textarea":Lp(i,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&_r(i,!!c.multiple,a,!1)}}}var Pu=!1;function Fp(i,a,c){if(Pu)return i(a,c);Pu=!0;try{var h=i(a);return h}finally{if(Pu=!1,(xr!==null||Tr!==null)&&(Xl(),xr&&(a=xr,i=Tr,Tr=xr=null,Ip(a),i)))for(a=0;a<i.length;a++)Ip(i[a])}}function Oa(i,a){var c=i.stateNode;if(c===null)return null;var h=c[mn]||null;if(h===null)return null;c=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(ki)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{Bu=!1}var ns=null,Iu=null,al=null;function jp(){if(al)return al;var i,a=Iu,c=a.length,h,g="value"in ns?ns.value:ns.textContent,b=g.length;for(i=0;i<c&&a[i]===g[i];i++);var _=c-i;for(h=1;h<=_&&a[c-h]===g[b-h];h++);return al=g.slice(i,1<h?1-h:void 0)}function ol(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ll(){return!0}function Up(){return!1}function gn(i){function a(c,h,g,b,_){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(c=i[C],this[C]=c?c(b):b[C]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ll:Up,this.isPropagationStopped=Up,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),a}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=gn(Fs),ka=m({},Fs,{view:0,detail:0}),p1=gn(ka),Fu,ju,Na,ul=m({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Na&&(Na&&i.type==="mousemove"?(Fu=i.screenX-Na.screenX,ju=i.screenY-Na.screenY):ju=Fu=0,Na=i),Fu)},movementY:function(i){return"movementY"in i?i.movementY:ju}}),Hp=gn(ul),m1=m({},ul,{dataTransfer:0}),g1=gn(m1),b1=m({},ka,{relatedTarget:0}),Uu=gn(b1),v1=m({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),y1=gn(v1),S1=m({},Fs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),A1=gn(S1),w1=m({},Fs,{data:0}),Gp=gn(w1),_1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T1(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=x1[i])?!!a[i]:!1}function Hu(){return T1}var C1=m({},ka,{key:function(i){if(i.key){var a=_1[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ol(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?E1[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(i){return i.type==="keypress"?ol(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ol(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),M1=gn(C1),D1=m({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=gn(D1),O1=m({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),R1=gn(O1),k1=m({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N1=gn(k1),L1=m({},ul,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),z1=gn(L1),P1=m({},Fs,{newState:0,oldState:0}),B1=gn(P1),I1=[9,13,27,32],Gu=ki&&"CompositionEvent"in window,La=null;ki&&"documentMode"in document&&(La=document.documentMode);var F1=ki&&"TextEvent"in window&&!La,Vp=ki&&(!Gu||La&&8<La&&11>=La),Xp=" ",Yp=!1;function Zp(i,a){switch(i){case"keyup":return I1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Cr=!1;function j1(i,a){switch(i){case"compositionend":return qp(a);case"keypress":return a.which!==32?null:(Yp=!0,Xp);case"textInput":return i=a.data,i===Xp&&Yp?null:i;default:return null}}function U1(i,a){if(Cr)return i==="compositionend"||!Gu&&Zp(i,a)?(i=jp(),al=Iu=ns=null,Cr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Vp&&a.locale!=="ko"?null:a.data;default:return null}}var H1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!H1[i.type]:a==="textarea"}function Kp(i,a,c,h){xr?Tr?Tr.push(h):Tr=[h]:xr=h,a=Jl(a,"onChange"),0<a.length&&(c=new cl("onChange","change",null,c,h),i.push({event:c,listeners:a}))}var za=null,Pa=null;function G1(i){Nb(i,0)}function hl(i){var a=Da(i);if(kp(a))return i}function Qp(i,a){if(i==="change")return a}var Jp=!1;if(ki){var $u;if(ki){var Vu="oninput"in document;if(!Vu){var tm=document.createElement("div");tm.setAttribute("oninput","return;"),Vu=typeof tm.oninput=="function"}$u=Vu}else $u=!1;Jp=$u&&(!document.documentMode||9<document.documentMode)}function em(){za&&(za.detachEvent("onpropertychange",nm),Pa=za=null)}function nm(i){if(i.propertyName==="value"&&hl(Pa)){var a=[];Kp(a,Pa,i,zu(i)),Fp(G1,a)}}function $1(i,a,c){i==="focusin"?(em(),za=a,Pa=c,za.attachEvent("onpropertychange",nm)):i==="focusout"&&em()}function V1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return hl(Pa)}function X1(i,a){if(i==="click")return hl(a)}function Y1(i,a){if(i==="input"||i==="change")return hl(a)}function Z1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Dn=typeof Object.is=="function"?Object.is:Z1;function Ba(i,a){if(Dn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!Le.call(a,g)||!Dn(i[g],a[g]))return!1}return!0}function im(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sm(i,a){var c=im(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=a&&h>=a)return{node:c,offset:a-i};i=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=im(c)}}function rm(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?rm(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function am(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=sl(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=sl(i.document)}return a}function Xu(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var q1=ki&&"documentMode"in document&&11>=document.documentMode,Mr=null,Yu=null,Ia=null,Zu=!1;function om(i,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Zu||Mr==null||Mr!==sl(h)||(h=Mr,"selectionStart"in h&&Xu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ia&&Ba(Ia,h)||(Ia=h,h=Jl(Yu,"onSelect"),0<h.length&&(a=new cl("onSelect","select",null,a,c),i.push({event:a,listeners:h}),a.target=Mr)))}function js(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var Dr={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionrun:js("Transition","TransitionRun"),transitionstart:js("Transition","TransitionStart"),transitioncancel:js("Transition","TransitionCancel"),transitionend:js("Transition","TransitionEnd")},qu={},lm={};ki&&(lm=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Us(i){if(qu[i])return qu[i];if(!Dr[i])return i;var a=Dr[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in lm)return qu[i]=a[c];return i}var cm=Us("animationend"),um=Us("animationiteration"),hm=Us("animationstart"),W1=Us("transitionrun"),K1=Us("transitionstart"),Q1=Us("transitioncancel"),dm=Us("transitionend"),fm=new Map,Wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wu.push("scrollEnd");function ci(i,a){fm.set(i,a),Is(a,[i])}var dl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Xn=[],Or=0,Ku=0;function fl(){for(var i=Or,a=Ku=Or=0;a<i;){var c=Xn[a];Xn[a++]=null;var h=Xn[a];Xn[a++]=null;var g=Xn[a];Xn[a++]=null;var b=Xn[a];if(Xn[a++]=null,h!==null&&g!==null){var _=h.pending;_===null?g.next=g:(g.next=_.next,_.next=g),h.pending=g}b!==0&&pm(c,g,b)}}function pl(i,a,c,h){Xn[Or++]=i,Xn[Or++]=a,Xn[Or++]=c,Xn[Or++]=h,Ku|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Qu(i,a,c,h){return pl(i,a,c,h),ml(i)}function Hs(i,a){return pl(i,null,null,a),ml(i)}function pm(i,a,c){i.lanes|=c;var h=i.alternate;h!==null&&(h.lanes|=c);for(var g=!1,b=i.return;b!==null;)b.childLanes|=c,h=b.alternate,h!==null&&(h.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&a!==null&&(g=31-Ve(c),i=b.hiddenUpdates,h=i[g],h===null?i[g]=[a]:h.push(a),a.lane=c|536870912),b):null}function ml(i){if(50<ao)throw ao=0,od=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Rr={};function J1(i,a,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(i,a,c,h){return new J1(i,a,c,h)}function Ju(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ni(i,a){var c=i.alternate;return c===null?(c=On(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function mm(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function gl(i,a,c,h,g,b){var _=0;if(h=i,typeof i=="function")Ju(i)&&(_=1);else if(typeof i=="string")_=s_(i,c,st.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case U:return i=On(31,c,a,g),i.elementType=U,i.lanes=b,i;case S:return Gs(c.children,g,b,a);case E:_=8,g|=24;break;case w:return i=On(12,c,a,g|2),i.elementType=w,i.lanes=b,i;case O:return i=On(13,c,a,g),i.elementType=O,i.lanes=b,i;case k:return i=On(19,c,a,g),i.elementType=k,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case x:_=10;break t;case T:_=9;break t;case M:_=11;break t;case R:_=14;break t;case B:_=16,h=null;break t}_=29,c=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=On(_,c,a,g),a.elementType=i,a.type=h,a.lanes=b,a}function Gs(i,a,c,h){return i=On(7,i,h,a),i.lanes=c,i}function th(i,a,c){return i=On(6,i,null,a),i.lanes=c,i}function gm(i){var a=On(18,null,null,0);return a.stateNode=i,a}function eh(i,a,c){return a=On(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var bm=new WeakMap;function Yn(i,a){if(typeof i=="object"&&i!==null){var c=bm.get(i);return c!==void 0?c:(a={value:i,source:a,stack:fn(a)},bm.set(i,a),a)}return{value:i,source:a,stack:fn(a)}}var kr=[],Nr=0,bl=null,Fa=0,Zn=[],qn=0,is=null,bi=1,vi="";function Li(i,a){kr[Nr++]=Fa,kr[Nr++]=bl,bl=i,Fa=a}function vm(i,a,c){Zn[qn++]=bi,Zn[qn++]=vi,Zn[qn++]=is,is=i;var h=bi;i=vi;var g=32-Ve(h)-1;h&=~(1<<g),c+=1;var b=32-Ve(a)+g;if(30<b){var _=g-g%5;b=(h&(1<<_)-1).toString(32),h>>=_,g-=_,bi=1<<32-Ve(a)+g|c<<g|h,vi=b+i}else bi=1<<b|c<<g|h,vi=i}function nh(i){i.return!==null&&(Li(i,1),vm(i,1,0))}function ih(i){for(;i===bl;)bl=kr[--Nr],kr[Nr]=null,Fa=kr[--Nr],kr[Nr]=null;for(;i===is;)is=Zn[--qn],Zn[qn]=null,vi=Zn[--qn],Zn[qn]=null,bi=Zn[--qn],Zn[qn]=null}function ym(i,a){Zn[qn++]=bi,Zn[qn++]=vi,Zn[qn++]=is,bi=a.id,vi=a.overflow,is=i}var Ye=null,se=null,It=!1,ss=null,Wn=!1,sh=Error(n(519));function rs(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ja(Yn(a,i)),sh}function Sm(i){var a=i.stateNode,c=i.type,h=i.memoizedProps;switch(a[Xe]=i,a[mn]=h,c){case"dialog":Lt("cancel",a),Lt("close",a);break;case"iframe":case"object":case"embed":Lt("load",a);break;case"video":case"audio":for(c=0;c<lo.length;c++)Lt(lo[c],a);break;case"source":Lt("error",a);break;case"img":case"image":case"link":Lt("error",a),Lt("load",a);break;case"details":Lt("toggle",a);break;case"input":Lt("invalid",a),Np(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Lt("invalid",a);break;case"textarea":Lt("invalid",a),zp(a,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||Bb(a.textContent,c)?(h.popover!=null&&(Lt("beforetoggle",a),Lt("toggle",a)),h.onScroll!=null&&Lt("scroll",a),h.onScrollEnd!=null&&Lt("scrollend",a),h.onClick!=null&&(a.onclick=Ri),a=!0):a=!1,a||rs(i,!0)}function Am(i){for(Ye=i.return;Ye;)switch(Ye.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Ye=Ye.return}}function Lr(i){if(i!==Ye)return!1;if(!It)return Am(i),It=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||wd(i.type,i.memoizedProps)),c=!c),c&&se&&rs(i),Am(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));se=Xb(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));se=Xb(i)}else a===27?(a=se,ys(i.type)?(i=Cd,Cd=null,se=i):se=a):se=Ye?Qn(i.stateNode.nextSibling):null;return!0}function $s(){se=Ye=null,It=!1}function rh(){var i=ss;return i!==null&&(Sn===null?Sn=i:Sn.push.apply(Sn,i),ss=null),i}function ja(i){ss===null?ss=[i]:ss.push(i)}var ah=N(null),Vs=null,zi=null;function as(i,a,c){W(ah,a._currentValue),a._currentValue=c}function Pi(i){i._currentValue=ah.current,X(ah)}function oh(i,a,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===c)break;i=i.return}}function lh(i,a,c,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var _=g.child;b=b.firstContext;t:for(;b!==null;){var C=b;b=g;for(var z=0;z<a.length;z++)if(C.context===a[z]){b.lanes|=c,C=b.alternate,C!==null&&(C.lanes|=c),oh(b.return,c,i),h||(_=null);break t}b=C.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(n(341));_.lanes|=c,b=_.alternate,b!==null&&(b.lanes|=c),oh(_,c,i),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function zr(i,a,c,h){i=null;for(var g=a,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var C=g.type;Dn(g.pendingProps.value,_.value)||(i!==null?i.push(C):i=[C])}}else if(g===at.current){if(_=g.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(po):i=[po])}g=g.return}i!==null&&lh(a,i,c,h),a.flags|=262144}function vl(i){for(i=i.firstContext;i!==null;){if(!Dn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xs(i){Vs=i,zi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ze(i){return wm(Vs,i)}function yl(i,a){return Vs===null&&Xs(i),wm(i,a)}function wm(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},zi===null){if(i===null)throw Error(n(308));zi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else zi=zi.next=a;return c}var tw=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},ew=s.unstable_scheduleCallback,nw=s.unstable_NormalPriority,xe={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new tw,data:new Map,refCount:0}}function Ua(i){i.refCount--,i.refCount===0&&ew(nw,function(){i.controller.abort()})}var Ha=null,uh=0,Pr=0,Br=null;function iw(i,a){if(Ha===null){var c=Ha=[];uh=0,Pr=fd(),Br={status:"pending",value:void 0,then:function(h){c.push(h)}}}return uh++,a.then(_m,_m),a}function _m(){if(--uh===0&&Ha!==null){Br!==null&&(Br.status="fulfilled");var i=Ha;Ha=null,Pr=0,Br=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function sw(i,a){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var Em=L.S;L.S=function(i,a){ob=he(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&iw(i,a),Em!==null&&Em(i,a)};var Ys=N(null);function hh(){var i=Ys.current;return i!==null?i:ne.pooledCache}function Sl(i,a){a===null?W(Ys,Ys.current):W(Ys,a.pool)}function xm(){var i=hh();return i===null?null:{parent:xe._currentValue,pool:i}}var Ir=Error(n(460)),dh=Error(n(474)),Al=Error(n(542)),wl={then:function(){}};function Tm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Cm(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(Ri,Ri),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Dm(i),i;default:if(typeof a.status=="string")a.then(Ri,Ri);else{if(i=ne,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Dm(i),i}throw qs=a,Ir}}function Zs(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(qs=c,Ir):c}}var qs=null;function Mm(){if(qs===null)throw Error(n(459));var i=qs;return qs=null,i}function Dm(i){if(i===Ir||i===Al)throw Error(n(483))}var Fr=null,Ga=0;function _l(i){var a=Ga;return Ga+=1,Fr===null&&(Fr=[]),Cm(Fr,i,a)}function $a(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function El(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Om(i){function a(j,I){if(i){var G=j.deletions;G===null?(j.deletions=[I],j.flags|=16):G.push(I)}}function c(j,I){if(!i)return null;for(;I!==null;)a(j,I),I=I.sibling;return null}function h(j){for(var I=new Map;j!==null;)j.key!==null?I.set(j.key,j):I.set(j.index,j),j=j.sibling;return I}function g(j,I){return j=Ni(j,I),j.index=0,j.sibling=null,j}function b(j,I,G){return j.index=G,i?(G=j.alternate,G!==null?(G=G.index,G<I?(j.flags|=67108866,I):G):(j.flags|=67108866,I)):(j.flags|=1048576,I)}function _(j){return i&&j.alternate===null&&(j.flags|=67108866),j}function C(j,I,G,J){return I===null||I.tag!==6?(I=th(G,j.mode,J),I.return=j,I):(I=g(I,G),I.return=j,I)}function z(j,I,G,J){var bt=G.type;return bt===S?K(j,I,G.props.children,J,G.key):I!==null&&(I.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===B&&Zs(bt)===I.type)?(I=g(I,G.props),$a(I,G),I.return=j,I):(I=gl(G.type,G.key,G.props,null,j.mode,J),$a(I,G),I.return=j,I)}function $(j,I,G,J){return I===null||I.tag!==4||I.stateNode.containerInfo!==G.containerInfo||I.stateNode.implementation!==G.implementation?(I=eh(G,j.mode,J),I.return=j,I):(I=g(I,G.children||[]),I.return=j,I)}function K(j,I,G,J,bt){return I===null||I.tag!==7?(I=Gs(G,j.mode,J,bt),I.return=j,I):(I=g(I,G),I.return=j,I)}function tt(j,I,G){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=th(""+I,j.mode,G),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case y:return G=gl(I.type,I.key,I.props,null,j.mode,G),$a(G,I),G.return=j,G;case A:return I=eh(I,j.mode,G),I.return=j,I;case B:return I=Zs(I),tt(j,I,G)}if(rt(I)||it(I))return I=Gs(I,j.mode,G,null),I.return=j,I;if(typeof I.then=="function")return tt(j,_l(I),G);if(I.$$typeof===x)return tt(j,yl(j,I),G);El(j,I)}return null}function Y(j,I,G,J){var bt=I!==null?I.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return bt!==null?null:C(j,I,""+G,J);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return G.key===bt?z(j,I,G,J):null;case A:return G.key===bt?$(j,I,G,J):null;case B:return G=Zs(G),Y(j,I,G,J)}if(rt(G)||it(G))return bt!==null?null:K(j,I,G,J,null);if(typeof G.then=="function")return Y(j,I,_l(G),J);if(G.$$typeof===x)return Y(j,I,yl(j,G),J);El(j,G)}return null}function q(j,I,G,J,bt){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return j=j.get(G)||null,C(I,j,""+J,bt);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return j=j.get(J.key===null?G:J.key)||null,z(I,j,J,bt);case A:return j=j.get(J.key===null?G:J.key)||null,$(I,j,J,bt);case B:return J=Zs(J),q(j,I,G,J,bt)}if(rt(J)||it(J))return j=j.get(G)||null,K(I,j,J,bt,null);if(typeof J.then=="function")return q(j,I,G,_l(J),bt);if(J.$$typeof===x)return q(j,I,G,yl(I,J),bt);El(I,J)}return null}function dt(j,I,G,J){for(var bt=null,Ut=null,mt=I,Ot=I=0,Pt=null;mt!==null&&Ot<G.length;Ot++){mt.index>Ot?(Pt=mt,mt=null):Pt=mt.sibling;var Ht=Y(j,mt,G[Ot],J);if(Ht===null){mt===null&&(mt=Pt);break}i&&mt&&Ht.alternate===null&&a(j,mt),I=b(Ht,I,Ot),Ut===null?bt=Ht:Ut.sibling=Ht,Ut=Ht,mt=Pt}if(Ot===G.length)return c(j,mt),It&&Li(j,Ot),bt;if(mt===null){for(;Ot<G.length;Ot++)mt=tt(j,G[Ot],J),mt!==null&&(I=b(mt,I,Ot),Ut===null?bt=mt:Ut.sibling=mt,Ut=mt);return It&&Li(j,Ot),bt}for(mt=h(mt);Ot<G.length;Ot++)Pt=q(mt,j,Ot,G[Ot],J),Pt!==null&&(i&&Pt.alternate!==null&&mt.delete(Pt.key===null?Ot:Pt.key),I=b(Pt,I,Ot),Ut===null?bt=Pt:Ut.sibling=Pt,Ut=Pt);return i&&mt.forEach(function(Es){return a(j,Es)}),It&&Li(j,Ot),bt}function At(j,I,G,J){if(G==null)throw Error(n(151));for(var bt=null,Ut=null,mt=I,Ot=I=0,Pt=null,Ht=G.next();mt!==null&&!Ht.done;Ot++,Ht=G.next()){mt.index>Ot?(Pt=mt,mt=null):Pt=mt.sibling;var Es=Y(j,mt,Ht.value,J);if(Es===null){mt===null&&(mt=Pt);break}i&&mt&&Es.alternate===null&&a(j,mt),I=b(Es,I,Ot),Ut===null?bt=Es:Ut.sibling=Es,Ut=Es,mt=Pt}if(Ht.done)return c(j,mt),It&&Li(j,Ot),bt;if(mt===null){for(;!Ht.done;Ot++,Ht=G.next())Ht=tt(j,Ht.value,J),Ht!==null&&(I=b(Ht,I,Ot),Ut===null?bt=Ht:Ut.sibling=Ht,Ut=Ht);return It&&Li(j,Ot),bt}for(mt=h(mt);!Ht.done;Ot++,Ht=G.next())Ht=q(mt,j,Ot,Ht.value,J),Ht!==null&&(i&&Ht.alternate!==null&&mt.delete(Ht.key===null?Ot:Ht.key),I=b(Ht,I,Ot),Ut===null?bt=Ht:Ut.sibling=Ht,Ut=Ht);return i&&mt.forEach(function(m_){return a(j,m_)}),It&&Li(j,Ot),bt}function te(j,I,G,J){if(typeof G=="object"&&G!==null&&G.type===S&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case y:t:{for(var bt=G.key;I!==null;){if(I.key===bt){if(bt=G.type,bt===S){if(I.tag===7){c(j,I.sibling),J=g(I,G.props.children),J.return=j,j=J;break t}}else if(I.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===B&&Zs(bt)===I.type){c(j,I.sibling),J=g(I,G.props),$a(J,G),J.return=j,j=J;break t}c(j,I);break}else a(j,I);I=I.sibling}G.type===S?(J=Gs(G.props.children,j.mode,J,G.key),J.return=j,j=J):(J=gl(G.type,G.key,G.props,null,j.mode,J),$a(J,G),J.return=j,j=J)}return _(j);case A:t:{for(bt=G.key;I!==null;){if(I.key===bt)if(I.tag===4&&I.stateNode.containerInfo===G.containerInfo&&I.stateNode.implementation===G.implementation){c(j,I.sibling),J=g(I,G.children||[]),J.return=j,j=J;break t}else{c(j,I);break}else a(j,I);I=I.sibling}J=eh(G,j.mode,J),J.return=j,j=J}return _(j);case B:return G=Zs(G),te(j,I,G,J)}if(rt(G))return dt(j,I,G,J);if(it(G)){if(bt=it(G),typeof bt!="function")throw Error(n(150));return G=bt.call(G),At(j,I,G,J)}if(typeof G.then=="function")return te(j,I,_l(G),J);if(G.$$typeof===x)return te(j,I,yl(j,G),J);El(j,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,I!==null&&I.tag===6?(c(j,I.sibling),J=g(I,G),J.return=j,j=J):(c(j,I),J=th(G,j.mode,J),J.return=j,j=J),_(j)):c(j,I)}return function(j,I,G,J){try{Ga=0;var bt=te(j,I,G,J);return Fr=null,bt}catch(mt){if(mt===Ir||mt===Al)throw mt;var Ut=On(29,mt,null,j.mode);return Ut.lanes=J,Ut.return=j,Ut}}}var Ws=Om(!0),Rm=Om(!1),os=!1;function fh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ls(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function cs(i,a,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Gt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=ml(i),pm(i,null,c),a}return pl(i,h,a,c),ml(i)}function Va(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,c|=h,a.lanes=c,wp(i,c)}}function mh(i,a){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=_:b=b.next=_,c=c.next}while(c!==null);b===null?g=b=a:b=b.next=a}else g=b=a;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var gh=!1;function Xa(){if(gh){var i=Br;if(i!==null)throw i}}function Ya(i,a,c,h){gh=!1;var g=i.updateQueue;os=!1;var b=g.firstBaseUpdate,_=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var z=C,$=z.next;z.next=null,_===null?b=$:_.next=$,_=z;var K=i.alternate;K!==null&&(K=K.updateQueue,C=K.lastBaseUpdate,C!==_&&(C===null?K.firstBaseUpdate=$:C.next=$,K.lastBaseUpdate=z))}if(b!==null){var tt=g.baseState;_=0,K=$=z=null,C=b;do{var Y=C.lane&-536870913,q=Y!==C.lane;if(q?(zt&Y)===Y:(h&Y)===Y){Y!==0&&Y===Pr&&(gh=!0),K!==null&&(K=K.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var dt=i,At=C;Y=a;var te=c;switch(At.tag){case 1:if(dt=At.payload,typeof dt=="function"){tt=dt.call(te,tt,Y);break t}tt=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=At.payload,Y=typeof dt=="function"?dt.call(te,tt,Y):dt,Y==null)break t;tt=m({},tt,Y);break t;case 2:os=!0}}Y=C.callback,Y!==null&&(i.flags|=64,q&&(i.flags|=8192),q=g.callbacks,q===null?g.callbacks=[Y]:q.push(Y))}else q={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},K===null?($=K=q,z=tt):K=K.next=q,_|=Y;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;q=C,C=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);K===null&&(z=tt),g.baseState=z,g.firstBaseUpdate=$,g.lastBaseUpdate=K,b===null&&(g.shared.lanes=0),ps|=_,i.lanes=_,i.memoizedState=tt}}function km(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function Nm(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)km(c[i],a)}var jr=N(null),xl=N(0);function Lm(i,a){i=Vi,W(xl,i),W(jr,a),Vi=i|a.baseLanes}function bh(){W(xl,Vi),W(jr,jr.current)}function vh(){Vi=xl.current,X(jr),X(xl)}var Rn=N(null),Kn=null;function us(i){var a=i.alternate;W(Ae,Ae.current&1),W(Rn,i),Kn===null&&(a===null||jr.current!==null||a.memoizedState!==null)&&(Kn=i)}function yh(i){W(Ae,Ae.current),W(Rn,i),Kn===null&&(Kn=i)}function zm(i){i.tag===22?(W(Ae,Ae.current),W(Rn,i),Kn===null&&(Kn=i)):hs()}function hs(){W(Ae,Ae.current),W(Rn,Rn.current)}function kn(i){X(Rn),Kn===i&&(Kn=null),X(Ae)}var Ae=N(0);function Tl(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||xd(c)||Td(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Bi=0,Mt=null,Qt=null,Te=null,Cl=!1,Ur=!1,Ks=!1,Ml=0,Za=0,Hr=null,rw=0;function ge(){throw Error(n(321))}function Sh(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Dn(i[c],a[c]))return!1;return!0}function Ah(i,a,c,h,g,b){return Bi=b,Mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=i===null||i.memoizedState===null?vg:Ph,Ks=!1,b=c(h,g),Ks=!1,Ur&&(b=Bm(a,c,h,g)),Pm(i),b}function Pm(i){L.H=Ka;var a=Qt!==null&&Qt.next!==null;if(Bi=0,Te=Qt=Mt=null,Cl=!1,Za=0,Hr=null,a)throw Error(n(300));i===null||Ce||(i=i.dependencies,i!==null&&vl(i)&&(Ce=!0))}function Bm(i,a,c,h){Mt=i;var g=0;do{if(Ur&&(Hr=null),Za=0,Ur=!1,25<=g)throw Error(n(301));if(g+=1,Te=Qt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}L.H=yg,b=a(c,h)}while(Ur);return b}function aw(){var i=L.H,a=i.useState()[0];return a=typeof a.then=="function"?qa(a):a,i=i.useState()[0],(Qt!==null?Qt.memoizedState:null)!==i&&(Mt.flags|=1024),a}function wh(){var i=Ml!==0;return Ml=0,i}function _h(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function Eh(i){if(Cl){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Cl=!1}Bi=0,Te=Qt=Mt=null,Ur=!1,Za=Ml=0,Hr=null}function on(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?Mt.memoizedState=Te=i:Te=Te.next=i,Te}function we(){if(Qt===null){var i=Mt.alternate;i=i!==null?i.memoizedState:null}else i=Qt.next;var a=Te===null?Mt.memoizedState:Te.next;if(a!==null)Te=a,Qt=i;else{if(i===null)throw Mt.alternate===null?Error(n(467)):Error(n(310));Qt=i,i={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Te===null?Mt.memoizedState=Te=i:Te=Te.next=i}return Te}function Dl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qa(i){var a=Za;return Za+=1,Hr===null&&(Hr=[]),i=Cm(Hr,i,a),a=Mt,(Te===null?a.memoizedState:Te.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?vg:Ph),i}function Ol(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return qa(i);if(i.$$typeof===x)return Ze(i)}throw Error(n(438,String(i)))}function xh(i){var a=null,c=Mt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Mt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Dl(),Mt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),h=0;h<i;h++)c[h]=Z;return a.index++,c}function Ii(i,a){return typeof a=="function"?a(i):a}function Rl(i){var a=we();return Th(a,Qt,i)}function Th(i,a,c){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=c;var g=i.baseQueue,b=h.pending;if(b!==null){if(g!==null){var _=g.next;g.next=b.next,b.next=_}a.baseQueue=g=b,h.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{a=g.next;var C=_=null,z=null,$=a,K=!1;do{var tt=$.lane&-536870913;if(tt!==$.lane?(zt&tt)===tt:(Bi&tt)===tt){var Y=$.revertLane;if(Y===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),tt===Pr&&(K=!0);else if((Bi&Y)===Y){$=$.next,Y===Pr&&(K=!0);continue}else tt={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},z===null?(C=z=tt,_=b):z=z.next=tt,Mt.lanes|=Y,ps|=Y;tt=$.action,Ks&&c(b,tt),b=$.hasEagerState?$.eagerState:c(b,tt)}else Y={lane:tt,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},z===null?(C=z=Y,_=b):z=z.next=Y,Mt.lanes|=tt,ps|=tt;$=$.next}while($!==null&&$!==a);if(z===null?_=b:z.next=C,!Dn(b,i.memoizedState)&&(Ce=!0,K&&(c=Br,c!==null)))throw c;i.memoizedState=b,i.baseState=_,i.baseQueue=z,h.lastRenderedState=b}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Ch(i){var a=we(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var h=c.dispatch,g=c.pending,b=a.memoizedState;if(g!==null){c.pending=null;var _=g=g.next;do b=i(b,_.action),_=_.next;while(_!==g);Dn(b,a.memoizedState)||(Ce=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,h]}function Im(i,a,c){var h=Mt,g=we(),b=It;if(b){if(c===void 0)throw Error(n(407));c=c()}else c=a();var _=!Dn((Qt||g).memoizedState,c);if(_&&(g.memoizedState=c,Ce=!0),g=g.queue,Oh(Um.bind(null,h,g,i),[i]),g.getSnapshot!==a||_||Te!==null&&Te.memoizedState.tag&1){if(h.flags|=2048,Gr(9,{destroy:void 0},jm.bind(null,h,g,c,a),null),ne===null)throw Error(n(349));b||(Bi&127)!==0||Fm(h,a,c)}return c}function Fm(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Mt.updateQueue,a===null?(a=Dl(),Mt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function jm(i,a,c,h){a.value=c,a.getSnapshot=h,Hm(a)&&Gm(i)}function Um(i,a,c){return c(function(){Hm(a)&&Gm(i)})}function Hm(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Dn(i,c)}catch{return!0}}function Gm(i){var a=Hs(i,2);a!==null&&An(a,i,2)}function Mh(i){var a=on();if(typeof i=="function"){var c=i;if(i=c(),Ks){an(!0);try{c()}finally{an(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},a}function $m(i,a,c,h){return i.baseState=c,Th(i,Qt,typeof h=="function"?h:Ii)}function ow(i,a,c,h,g){if(Ll(i))throw Error(n(485));if(i=a.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};L.T!==null?c(!0):b.isTransition=!1,h(b),c=a.pending,c===null?(b.next=a.pending=b,Vm(a,b)):(b.next=c.next,a.pending=c.next=b)}}function Vm(i,a){var c=a.action,h=a.payload,g=i.state;if(a.isTransition){var b=L.T,_={};L.T=_;try{var C=c(g,h),z=L.S;z!==null&&z(_,C),Xm(i,a,C)}catch($){Dh(i,a,$)}finally{b!==null&&_.types!==null&&(b.types=_.types),L.T=b}}else try{b=c(g,h),Xm(i,a,b)}catch($){Dh(i,a,$)}}function Xm(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Ym(i,a,h)},function(h){return Dh(i,a,h)}):Ym(i,a,c)}function Ym(i,a,c){a.status="fulfilled",a.value=c,Zm(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,Vm(i,c)))}function Dh(i,a,c){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,Zm(a),a=a.next;while(a!==h)}i.action=null}function Zm(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function qm(i,a){return a}function Wm(i,a){if(It){var c=ne.formState;if(c!==null){t:{var h=Mt;if(It){if(se){e:{for(var g=se,b=Wn;g.nodeType!==8;){if(!b){g=null;break e}if(g=Qn(g.nextSibling),g===null){g=null;break e}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){se=Qn(g.nextSibling),h=g.data==="F!";break t}}rs(h)}h=!1}h&&(a=c[0])}}return c=on(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qm,lastRenderedState:a},c.queue=h,c=mg.bind(null,Mt,h),h.dispatch=c,h=Mh(!1),b=zh.bind(null,Mt,!1,h.queue),h=on(),g={state:a,dispatch:null,action:i,pending:null},h.queue=g,c=ow.bind(null,Mt,g,b,c),g.dispatch=c,h.memoizedState=i,[a,c,!1]}function Km(i){var a=we();return Qm(a,Qt,i)}function Qm(i,a,c){if(a=Th(i,a,qm)[0],i=Rl(Ii)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=qa(a)}catch(_){throw _===Ir?Al:_}else h=a;a=we();var g=a.queue,b=g.dispatch;return c!==a.memoizedState&&(Mt.flags|=2048,Gr(9,{destroy:void 0},lw.bind(null,g,c),null)),[h,b,i]}function lw(i,a){i.action=a}function Jm(i){var a=we(),c=Qt;if(c!==null)return Qm(a,c,i);we(),a=a.memoizedState,c=we();var h=c.queue.dispatch;return c.memoizedState=i,[a,h,!1]}function Gr(i,a,c,h){return i={tag:i,create:c,deps:h,inst:a,next:null},a=Mt.updateQueue,a===null&&(a=Dl(),Mt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,a.lastEffect=i),i}function tg(){return we().memoizedState}function kl(i,a,c,h){var g=on();Mt.flags|=i,g.memoizedState=Gr(1|a,{destroy:void 0},c,h===void 0?null:h)}function Nl(i,a,c,h){var g=we();h=h===void 0?null:h;var b=g.memoizedState.inst;Qt!==null&&h!==null&&Sh(h,Qt.memoizedState.deps)?g.memoizedState=Gr(a,b,c,h):(Mt.flags|=i,g.memoizedState=Gr(1|a,b,c,h))}function eg(i,a){kl(8390656,8,i,a)}function Oh(i,a){Nl(2048,8,i,a)}function cw(i){Mt.flags|=4;var a=Mt.updateQueue;if(a===null)a=Dl(),Mt.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function ng(i){var a=we().memoizedState;return cw({ref:a,nextImpl:i}),function(){if((Gt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function ig(i,a){return Nl(4,2,i,a)}function sg(i,a){return Nl(4,4,i,a)}function rg(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function ag(i,a,c){c=c!=null?c.concat([i]):null,Nl(4,4,rg.bind(null,a,i),c)}function Rh(){}function og(i,a){var c=we();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&Sh(a,h[1])?h[0]:(c.memoizedState=[i,a],i)}function lg(i,a){var c=we();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&Sh(a,h[1]))return h[0];if(h=i(),Ks){an(!0);try{i()}finally{an(!1)}}return c.memoizedState=[h,a],h}function kh(i,a,c){return c===void 0||(Bi&1073741824)!==0&&(zt&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=cb(),Mt.lanes|=i,ps|=i,c)}function cg(i,a,c,h){return Dn(c,a)?c:jr.current!==null?(i=kh(i,c,h),Dn(i,a)||(Ce=!0),i):(Bi&42)===0||(Bi&1073741824)!==0&&(zt&261930)===0?(Ce=!0,i.memoizedState=c):(i=cb(),Mt.lanes|=i,ps|=i,a)}function ug(i,a,c,h,g){var b=F.p;F.p=b!==0&&8>b?b:8;var _=L.T,C={};L.T=C,zh(i,!1,a,c);try{var z=g(),$=L.S;if($!==null&&$(C,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var K=sw(z,h);Wa(i,a,K,zn(i))}else Wa(i,a,h,zn(i))}catch(tt){Wa(i,a,{then:function(){},status:"rejected",reason:tt},zn())}finally{F.p=b,_!==null&&C.types!==null&&(_.types=C.types),L.T=_}}function uw(){}function Nh(i,a,c,h){if(i.tag!==5)throw Error(n(476));var g=hg(i).queue;ug(i,g,a,V,c===null?uw:function(){return dg(i),c(h)})}function hg(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:V},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function dg(i){var a=hg(i);a.next===null&&(a=i.alternate.memoizedState),Wa(i,a.next.queue,{},zn())}function Lh(){return Ze(po)}function fg(){return we().memoizedState}function pg(){return we().memoizedState}function hw(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=zn();i=ls(c);var h=cs(a,i,c);h!==null&&(An(h,a,c),Va(h,a,c)),a={cache:ch()},i.payload=a;return}a=a.return}}function dw(i,a,c){var h=zn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ll(i)?gg(a,c):(c=Qu(i,a,c,h),c!==null&&(An(c,i,h),bg(c,a,h)))}function mg(i,a,c){var h=zn();Wa(i,a,c,h)}function Wa(i,a,c,h){var g={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ll(i))gg(a,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var _=a.lastRenderedState,C=b(_,c);if(g.hasEagerState=!0,g.eagerState=C,Dn(C,_))return pl(i,a,g,0),ne===null&&fl(),!1}catch{}if(c=Qu(i,a,g,h),c!==null)return An(c,i,h),bg(c,a,h),!0}return!1}function zh(i,a,c,h){if(h={lane:2,revertLane:fd(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ll(i)){if(a)throw Error(n(479))}else a=Qu(i,c,h,2),a!==null&&An(a,i,2)}function Ll(i){var a=i.alternate;return i===Mt||a!==null&&a===Mt}function gg(i,a){Ur=Cl=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function bg(i,a,c){if((c&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,c|=h,a.lanes=c,wp(i,c)}}var Ka={readContext:Ze,use:Ol,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge};Ka.useEffectEvent=ge;var vg={readContext:Ze,use:Ol,useCallback:function(i,a){return on().memoizedState=[i,a===void 0?null:a],i},useContext:Ze,useEffect:eg,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,kl(4194308,4,rg.bind(null,a,i),c)},useLayoutEffect:function(i,a){return kl(4194308,4,i,a)},useInsertionEffect:function(i,a){kl(4,2,i,a)},useMemo:function(i,a){var c=on();a=a===void 0?null:a;var h=i();if(Ks){an(!0);try{i()}finally{an(!1)}}return c.memoizedState=[h,a],h},useReducer:function(i,a,c){var h=on();if(c!==void 0){var g=c(a);if(Ks){an(!0);try{c(a)}finally{an(!1)}}}else g=a;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=dw.bind(null,Mt,i),[h.memoizedState,i]},useRef:function(i){var a=on();return i={current:i},a.memoizedState=i},useState:function(i){i=Mh(i);var a=i.queue,c=mg.bind(null,Mt,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:Rh,useDeferredValue:function(i,a){var c=on();return kh(c,i,a)},useTransition:function(){var i=Mh(!1);return i=ug.bind(null,Mt,i.queue,!0,!1),on().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var h=Mt,g=on();if(It){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),ne===null)throw Error(n(349));(zt&127)!==0||Fm(h,a,c)}g.memoizedState=c;var b={value:c,getSnapshot:a};return g.queue=b,eg(Um.bind(null,h,b,i),[i]),h.flags|=2048,Gr(9,{destroy:void 0},jm.bind(null,h,b,c,a),null),c},useId:function(){var i=on(),a=ne.identifierPrefix;if(It){var c=vi,h=bi;c=(h&~(1<<32-Ve(h)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Ml++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=rw++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Lh,useFormState:Wm,useActionState:Wm,useOptimistic:function(i){var a=on();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=zh.bind(null,Mt,!0,c),c.dispatch=a,[i,a]},useMemoCache:xh,useCacheRefresh:function(){return on().memoizedState=hw.bind(null,Mt)},useEffectEvent:function(i){var a=on(),c={impl:i};return a.memoizedState=c,function(){if((Gt&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},Ph={readContext:Ze,use:Ol,useCallback:og,useContext:Ze,useEffect:Oh,useImperativeHandle:ag,useInsertionEffect:ig,useLayoutEffect:sg,useMemo:lg,useReducer:Rl,useRef:tg,useState:function(){return Rl(Ii)},useDebugValue:Rh,useDeferredValue:function(i,a){var c=we();return cg(c,Qt.memoizedState,i,a)},useTransition:function(){var i=Rl(Ii)[0],a=we().memoizedState;return[typeof i=="boolean"?i:qa(i),a]},useSyncExternalStore:Im,useId:fg,useHostTransitionStatus:Lh,useFormState:Km,useActionState:Km,useOptimistic:function(i,a){var c=we();return $m(c,Qt,i,a)},useMemoCache:xh,useCacheRefresh:pg};Ph.useEffectEvent=ng;var yg={readContext:Ze,use:Ol,useCallback:og,useContext:Ze,useEffect:Oh,useImperativeHandle:ag,useInsertionEffect:ig,useLayoutEffect:sg,useMemo:lg,useReducer:Ch,useRef:tg,useState:function(){return Ch(Ii)},useDebugValue:Rh,useDeferredValue:function(i,a){var c=we();return Qt===null?kh(c,i,a):cg(c,Qt.memoizedState,i,a)},useTransition:function(){var i=Ch(Ii)[0],a=we().memoizedState;return[typeof i=="boolean"?i:qa(i),a]},useSyncExternalStore:Im,useId:fg,useHostTransitionStatus:Lh,useFormState:Jm,useActionState:Jm,useOptimistic:function(i,a){var c=we();return Qt!==null?$m(c,Qt,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:xh,useCacheRefresh:pg};yg.useEffectEvent=ng;function Bh(i,a,c,h){a=i.memoizedState,c=c(h,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ih={enqueueSetState:function(i,a,c){i=i._reactInternals;var h=zn(),g=ls(h);g.payload=a,c!=null&&(g.callback=c),a=cs(i,g,h),a!==null&&(An(a,i,h),Va(a,i,h))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var h=zn(),g=ls(h);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=cs(i,g,h),a!==null&&(An(a,i,h),Va(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=zn(),h=ls(c);h.tag=2,a!=null&&(h.callback=a),a=cs(i,h,c),a!==null&&(An(a,i,c),Va(a,i,c))}};function Sg(i,a,c,h,g,b,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,b,_):a.prototype&&a.prototype.isPureReactComponent?!Ba(c,h)||!Ba(g,b):!0}function Ag(i,a,c,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==i&&Ih.enqueueReplaceState(a,a.state,null)}function Qs(i,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function wg(i){dl(i)}function _g(i){console.error(i)}function Eg(i){dl(i)}function zl(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function xg(i,a,c){try{var h=i.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Fh(i,a,c){return c=ls(c),c.tag=3,c.payload={element:null},c.callback=function(){zl(i,a)},c}function Tg(i){return i=ls(i),i.tag=3,i}function Cg(i,a,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=h.value;i.payload=function(){return g(b)},i.callback=function(){xg(a,c,h)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){xg(a,c,h),typeof g!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var C=h.stack;this.componentDidCatch(h.value,{componentStack:C!==null?C:""})})}function fw(i,a,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&zr(a,c,g,!0),c=Rn.current,c!==null){switch(c.tag){case 31:case 13:return Kn===null?Yl():c.alternate===null&&be===0&&(be=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===wl?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),ud(i,h,g)),!1;case 22:return c.flags|=65536,h===wl?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),ud(i,h,g)),!1}throw Error(n(435,c.tag))}return ud(i,h,g),Yl(),!1}if(It)return a=Rn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==sh&&(i=Error(n(422),{cause:h}),ja(Yn(i,c)))):(h!==sh&&(a=Error(n(423),{cause:h}),ja(Yn(a,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=Yn(h,c),g=Fh(i.stateNode,h,g),mh(i,g),be!==4&&(be=2)),!1;var b=Error(n(520),{cause:h});if(b=Yn(b,c),ro===null?ro=[b]:ro.push(b),be!==4&&(be=2),a===null)return!0;h=Yn(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=Fh(c.stateNode,h,i),mh(c,i),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ms===null||!ms.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Tg(g),Cg(g,i,c,h),mh(c,g),!1}c=c.return}while(c!==null);return!1}var jh=Error(n(461)),Ce=!1;function qe(i,a,c,h){a.child=i===null?Rm(a,null,c,h):Ws(a,i.child,c,h)}function Mg(i,a,c,h,g){c=c.render;var b=a.ref;if("ref"in h){var _={};for(var C in h)C!=="ref"&&(_[C]=h[C])}else _=h;return Xs(a),h=Ah(i,a,c,_,b,g),C=wh(),i!==null&&!Ce?(_h(i,a,g),Fi(i,a,g)):(It&&C&&nh(a),a.flags|=1,qe(i,a,h,g),a.child)}function Dg(i,a,c,h,g){if(i===null){var b=c.type;return typeof b=="function"&&!Ju(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,Og(i,a,b,h,g)):(i=gl(c.type,null,h,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!Zh(i,g)){var _=b.memoizedProps;if(c=c.compare,c=c!==null?c:Ba,c(_,h)&&i.ref===a.ref)return Fi(i,a,g)}return a.flags|=1,i=Ni(b,h),i.ref=a.ref,i.return=a,a.child=i}function Og(i,a,c,h,g){if(i!==null){var b=i.memoizedProps;if(Ba(b,h)&&i.ref===a.ref)if(Ce=!1,a.pendingProps=h=b,Zh(i,g))(i.flags&131072)!==0&&(Ce=!0);else return a.lanes=i.lanes,Fi(i,a,g)}return Uh(i,a,c,h,g)}function Rg(i,a,c,h){var g=h.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(h=a.child=i.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~b}else h=0,a.child=null;return kg(i,a,b,c,h)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Sl(a,b!==null?b.cachePool:null),b!==null?Lm(a,b):bh(),zm(a);else return h=a.lanes=536870912,kg(i,a,b!==null?b.baseLanes|c:c,c,h)}else b!==null?(Sl(a,b.cachePool),Lm(a,b),hs(),a.memoizedState=null):(i!==null&&Sl(a,null),bh(),hs());return qe(i,a,g,c),a.child}function Qa(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function kg(i,a,c,h,g){var b=hh();return b=b===null?null:{parent:xe._currentValue,pool:b},a.memoizedState={baseLanes:c,cachePool:b},i!==null&&Sl(a,null),bh(),zm(a),i!==null&&zr(i,a,h,!0),a.childLanes=g,null}function Pl(i,a){return a=Il({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Ng(i,a,c){return Ws(a,i.child,null,c),i=Pl(a,a.pendingProps),i.flags|=2,kn(a),a.memoizedState=null,i}function pw(i,a,c){var h=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(It){if(h.mode==="hidden")return i=Pl(a,h),a.lanes=536870912,Qa(null,i);if(yh(a),(i=se)?(i=Vb(i,Wn),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:is!==null?{id:bi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},c=gm(i),c.return=a,a.child=c,Ye=a,se=null)):i=null,i===null)throw rs(a);return a.lanes=536870912,null}return Pl(a,h)}var b=i.memoizedState;if(b!==null){var _=b.dehydrated;if(yh(a),g)if(a.flags&256)a.flags&=-257,a=Ng(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(Ce||zr(i,a,c,!1),g=(c&i.childLanes)!==0,Ce||g){if(h=ne,h!==null&&(_=_p(h,c),_!==0&&_!==b.retryLane))throw b.retryLane=_,Hs(i,_),An(h,i,_),jh;Yl(),a=Ng(i,a,c)}else i=b.treeContext,se=Qn(_.nextSibling),Ye=a,It=!0,ss=null,Wn=!1,i!==null&&ym(a,i),a=Pl(a,h),a.flags|=4096;return a}return i=Ni(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Bl(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function Uh(i,a,c,h,g){return Xs(a),c=Ah(i,a,c,h,void 0,g),h=wh(),i!==null&&!Ce?(_h(i,a,g),Fi(i,a,g)):(It&&h&&nh(a),a.flags|=1,qe(i,a,c,g),a.child)}function Lg(i,a,c,h,g,b){return Xs(a),a.updateQueue=null,c=Bm(a,h,c,g),Pm(i),h=wh(),i!==null&&!Ce?(_h(i,a,b),Fi(i,a,b)):(It&&h&&nh(a),a.flags|=1,qe(i,a,c,b),a.child)}function zg(i,a,c,h,g){if(Xs(a),a.stateNode===null){var b=Rr,_=c.contextType;typeof _=="object"&&_!==null&&(b=Ze(_)),b=new c(h,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Ih,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=h,b.state=a.memoizedState,b.refs={},fh(a),_=c.contextType,b.context=typeof _=="object"&&_!==null?Ze(_):Rr,b.state=a.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Bh(a,c,_,h),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&Ih.enqueueReplaceState(b,b.state,null),Ya(a,h,b,g),Xa(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){b=a.stateNode;var C=a.memoizedProps,z=Qs(c,C);b.props=z;var $=b.context,K=c.contextType;_=Rr,typeof K=="object"&&K!==null&&(_=Ze(K));var tt=c.getDerivedStateFromProps;K=typeof tt=="function"||typeof b.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,K||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C||$!==_)&&Ag(a,b,h,_),os=!1;var Y=a.memoizedState;b.state=Y,Ya(a,h,b,g),Xa(),$=a.memoizedState,C||Y!==$||os?(typeof tt=="function"&&(Bh(a,c,tt,h),$=a.memoizedState),(z=os||Sg(a,c,z,h,Y,$,_))?(K||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=$),b.props=h,b.state=$,b.context=_,h=z):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{b=a.stateNode,ph(i,a),_=a.memoizedProps,K=Qs(c,_),b.props=K,tt=a.pendingProps,Y=b.context,$=c.contextType,z=Rr,typeof $=="object"&&$!==null&&(z=Ze($)),C=c.getDerivedStateFromProps,($=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==tt||Y!==z)&&Ag(a,b,h,z),os=!1,Y=a.memoizedState,b.state=Y,Ya(a,h,b,g),Xa();var q=a.memoizedState;_!==tt||Y!==q||os||i!==null&&i.dependencies!==null&&vl(i.dependencies)?(typeof C=="function"&&(Bh(a,c,C,h),q=a.memoizedState),(K=os||Sg(a,c,K,h,Y,q,z)||i!==null&&i.dependencies!==null&&vl(i.dependencies))?($||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,q,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,q,z)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=q),b.props=h,b.state=q,b.context=z,h=K):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),h=!1)}return b=h,Bl(i,a),h=(a.flags&128)!==0,b||h?(b=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&h?(a.child=Ws(a,i.child,null,g),a.child=Ws(a,null,c,g)):qe(i,a,c,g),a.memoizedState=b.state,i=a.child):i=Fi(i,a,g),i}function Pg(i,a,c,h){return $s(),a.flags|=256,qe(i,a,c,h),a.child}var Hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(i){return{baseLanes:i,cachePool:xm()}}function $h(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Ln),i}function Bg(i,a,c){var h=a.pendingProps,g=!1,b=(a.flags&128)!==0,_;if((_=b)||(_=i!==null&&i.memoizedState===null?!1:(Ae.current&2)!==0),_&&(g=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,i===null){if(It){if(g?us(a):hs(),(i=se)?(i=Vb(i,Wn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:is!==null?{id:bi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},c=gm(i),c.return=a,a.child=c,Ye=a,se=null)):i=null,i===null)throw rs(a);return Td(i)?a.lanes=32:a.lanes=536870912,null}var C=h.children;return h=h.fallback,g?(hs(),g=a.mode,C=Il({mode:"hidden",children:C},g),h=Gs(h,g,c,null),C.return=a,h.return=a,C.sibling=h,a.child=C,h=a.child,h.memoizedState=Gh(c),h.childLanes=$h(i,_,c),a.memoizedState=Hh,Qa(null,h)):(us(a),Vh(a,C))}var z=i.memoizedState;if(z!==null&&(C=z.dehydrated,C!==null)){if(b)a.flags&256?(us(a),a.flags&=-257,a=Xh(i,a,c)):a.memoizedState!==null?(hs(),a.child=i.child,a.flags|=128,a=null):(hs(),C=h.fallback,g=a.mode,h=Il({mode:"visible",children:h.children},g),C=Gs(C,g,c,null),C.flags|=2,h.return=a,C.return=a,h.sibling=C,a.child=h,Ws(a,i.child,null,c),h=a.child,h.memoizedState=Gh(c),h.childLanes=$h(i,_,c),a.memoizedState=Hh,a=Qa(null,h));else if(us(a),Td(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var $=_.dgst;_=$,h=Error(n(419)),h.stack="",h.digest=_,ja({value:h,source:null,stack:null}),a=Xh(i,a,c)}else if(Ce||zr(i,a,c,!1),_=(c&i.childLanes)!==0,Ce||_){if(_=ne,_!==null&&(h=_p(_,c),h!==0&&h!==z.retryLane))throw z.retryLane=h,Hs(i,h),An(_,i,h),jh;xd(C)||Yl(),a=Xh(i,a,c)}else xd(C)?(a.flags|=192,a.child=i.child,a=null):(i=z.treeContext,se=Qn(C.nextSibling),Ye=a,It=!0,ss=null,Wn=!1,i!==null&&ym(a,i),a=Vh(a,h.children),a.flags|=4096);return a}return g?(hs(),C=h.fallback,g=a.mode,z=i.child,$=z.sibling,h=Ni(z,{mode:"hidden",children:h.children}),h.subtreeFlags=z.subtreeFlags&65011712,$!==null?C=Ni($,C):(C=Gs(C,g,c,null),C.flags|=2),C.return=a,h.return=a,h.sibling=C,a.child=h,Qa(null,h),h=a.child,C=i.child.memoizedState,C===null?C=Gh(c):(g=C.cachePool,g!==null?(z=xe._currentValue,g=g.parent!==z?{parent:z,pool:z}:g):g=xm(),C={baseLanes:C.baseLanes|c,cachePool:g}),h.memoizedState=C,h.childLanes=$h(i,_,c),a.memoizedState=Hh,Qa(i.child,h)):(us(a),c=i.child,i=c.sibling,c=Ni(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,i!==null&&(_=a.deletions,_===null?(a.deletions=[i],a.flags|=16):_.push(i)),a.child=c,a.memoizedState=null,c)}function Vh(i,a){return a=Il({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Il(i,a){return i=On(22,i,null,a),i.lanes=0,i}function Xh(i,a,c){return Ws(a,i.child,null,c),i=Vh(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ig(i,a,c){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),oh(i.return,a,c)}function Yh(i,a,c,h,g,b){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g,treeForkCount:b}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=c,_.tailMode=g,_.treeForkCount=b)}function Fg(i,a,c){var h=a.pendingProps,g=h.revealOrder,b=h.tail;h=h.children;var _=Ae.current,C=(_&2)!==0;if(C?(_=_&1|2,a.flags|=128):_&=1,W(Ae,_),qe(i,a,h,c),h=It?Fa:0,!C&&i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ig(i,c,a);else if(i.tag===19)Ig(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&Tl(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Yh(a,!1,g,c,b,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Tl(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Yh(a,!0,c,null,b,h);break;case"together":Yh(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Fi(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),ps|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(zr(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,c=Ni(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Ni(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Zh(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&vl(i)))}function mw(i,a,c){switch(a.tag){case 3:_t(a,a.stateNode.containerInfo),as(a,xe,i.memoizedState.cache),$s();break;case 27:case 5:jt(a);break;case 4:_t(a,a.stateNode.containerInfo);break;case 10:as(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,yh(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(us(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Bg(i,a,c):(us(a),i=Fi(i,a,c),i!==null?i.sibling:null);us(a);break;case 19:var g=(i.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(zr(i,a,c,!1),h=(c&a.childLanes)!==0),g){if(h)return Fg(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(Ae,Ae.current),h)break;return null;case 22:return a.lanes=0,Rg(i,a,c,a.pendingProps);case 24:as(a,xe,i.memoizedState.cache)}return Fi(i,a,c)}function jg(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)Ce=!0;else{if(!Zh(i,c)&&(a.flags&128)===0)return Ce=!1,mw(i,a,c);Ce=(i.flags&131072)!==0}else Ce=!1,It&&(a.flags&1048576)!==0&&vm(a,Fa,a.index);switch(a.lanes=0,a.tag){case 16:t:{var h=a.pendingProps;if(i=Zs(a.elementType),a.type=i,typeof i=="function")Ju(i)?(h=Qs(i,h),a.tag=1,a=zg(null,a,i,h,c)):(a.tag=0,a=Uh(null,a,i,h,c));else{if(i!=null){var g=i.$$typeof;if(g===M){a.tag=11,a=Mg(null,a,i,h,c);break t}else if(g===R){a.tag=14,a=Dg(null,a,i,h,c);break t}}throw a=nt(i)||i,Error(n(306,a,""))}}return a;case 0:return Uh(i,a,a.type,a.pendingProps,c);case 1:return h=a.type,g=Qs(h,a.pendingProps),zg(i,a,h,g,c);case 3:t:{if(_t(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var b=a.memoizedState;g=b.element,ph(i,a),Ya(a,h,null,c);var _=a.memoizedState;if(h=_.cache,as(a,xe,h),h!==b.cache&&lh(a,[xe],c,!0),Xa(),h=_.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Pg(i,a,h,c);break t}else if(h!==g){g=Yn(Error(n(424)),a),ja(g),a=Pg(i,a,h,c);break t}else for(i=a.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,se=Qn(i.firstChild),Ye=a,It=!0,ss=null,Wn=!0,c=Rm(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if($s(),h===g){a=Fi(i,a,c);break t}qe(i,a,h,c)}a=a.child}return a;case 26:return Bl(i,a),i===null?(c=Kb(a.type,null,a.pendingProps,null))?a.memoizedState=c:It||(c=a.type,i=a.pendingProps,h=tc(gt.current).createElement(c),h[Xe]=a,h[mn]=i,We(h,c,i),Ue(h),a.stateNode=h):a.memoizedState=Kb(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return jt(a),i===null&&It&&(h=a.stateNode=Zb(a.type,a.pendingProps,gt.current),Ye=a,Wn=!0,g=se,ys(a.type)?(Cd=g,se=Qn(h.firstChild)):se=g),qe(i,a,a.pendingProps.children,c),Bl(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&It&&((g=h=se)&&(h=Vw(h,a.type,a.pendingProps,Wn),h!==null?(a.stateNode=h,Ye=a,se=Qn(h.firstChild),Wn=!1,g=!0):g=!1),g||rs(a)),jt(a),g=a.type,b=a.pendingProps,_=i!==null?i.memoizedProps:null,h=b.children,wd(g,b)?h=null:_!==null&&wd(g,_)&&(a.flags|=32),a.memoizedState!==null&&(g=Ah(i,a,aw,null,null,c),po._currentValue=g),Bl(i,a),qe(i,a,h,c),a.child;case 6:return i===null&&It&&((i=c=se)&&(c=Xw(c,a.pendingProps,Wn),c!==null?(a.stateNode=c,Ye=a,se=null,i=!0):i=!1),i||rs(a)),null;case 13:return Bg(i,a,c);case 4:return _t(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Ws(a,null,h,c):qe(i,a,h,c),a.child;case 11:return Mg(i,a,a.type,a.pendingProps,c);case 7:return qe(i,a,a.pendingProps,c),a.child;case 8:return qe(i,a,a.pendingProps.children,c),a.child;case 12:return qe(i,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,as(a,a.type,h.value),qe(i,a,h.children,c),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,Xs(a),g=Ze(g),h=h(g),a.flags|=1,qe(i,a,h,c),a.child;case 14:return Dg(i,a,a.type,a.pendingProps,c);case 15:return Og(i,a,a.type,a.pendingProps,c);case 19:return Fg(i,a,c);case 31:return pw(i,a,c);case 22:return Rg(i,a,c,a.pendingProps);case 24:return Xs(a),h=Ze(xe),i===null?(g=hh(),g===null&&(g=ne,b=ch(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),a.memoizedState={parent:h,cache:g},fh(a),as(a,xe,g)):((i.lanes&c)!==0&&(ph(i,a),Ya(a,null,null,c),Xa()),g=i.memoizedState,b=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),as(a,xe,h)):(h=b.cache,as(a,xe,h),h!==g.cache&&lh(a,[xe],c,!0))),qe(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ji(i){i.flags|=4}function qh(i,a,c,h,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(fb())i.flags|=8192;else throw qs=wl,dh}else i.flags&=-16777217}function Ug(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!nv(a))if(fb())i.flags|=8192;else throw qs=wl,dh}function Fl(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?el():536870912,i.lanes|=a,Yr|=a)}function Ja(i,a){if(!It)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function re(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=c,a}function gw(i,a,c){var h=a.pendingProps;switch(ih(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(a),null;case 1:return re(a),null;case 3:return c=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Pi(xe),wt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Lr(a)?ji(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,rh())),re(a),null;case 26:var g=a.type,b=a.memoizedState;return i===null?(ji(a),b!==null?(re(a),Ug(a,b)):(re(a),qh(a,g,null,h,c))):b?b!==i.memoizedState?(ji(a),re(a),Ug(a,b)):(re(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ji(a),re(a),qh(a,g,i,h,c)),null;case 27:if(Dt(a),c=gt.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ji(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return re(a),null}i=st.current,Lr(a)?Sm(a):(i=Zb(g,h,c),a.stateNode=i,ji(a))}return re(a),null;case 5:if(Dt(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ji(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return re(a),null}if(b=st.current,Lr(a))Sm(a);else{var _=tc(gt.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?_.createElement(g,{is:h.is}):_.createElement(g)}}b[Xe]=a,b[mn]=h;t:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break t;for(;_.sibling===null;){if(_.return===null||_.return===a)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=b;t:switch(We(b,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&ji(a)}}return re(a),qh(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ji(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=gt.current,Lr(a)){if(i=a.stateNode,c=a.memoizedProps,h=null,g=Ye,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[Xe]=a,i=!!(i.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Bb(i.nodeValue,c)),i||rs(a,!0)}else i=tc(i).createTextNode(h),i[Xe]=a,a.stateNode=i}return re(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(h=Lr(a),c!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Xe]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;re(a),i=!1}else c=rh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(kn(a),a):(kn(a),null);if((a.flags&128)!==0)throw Error(n(558))}return re(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Lr(a),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[Xe]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;re(a),g=!1}else g=rh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(kn(a),a):(kn(a),null)}return kn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=h!==null,i=i!==null&&i.memoizedState!==null,c&&(h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==g&&(h.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),Fl(a,a.updateQueue),re(a),null);case 4:return wt(),i===null&&bd(a.stateNode.containerInfo),re(a),null;case 10:return Pi(a.type),re(a),null;case 19:if(X(Ae),h=a.memoizedState,h===null)return re(a),null;if(g=(a.flags&128)!==0,b=h.rendering,b===null)if(g)Ja(h,!1);else{if(be!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=Tl(i),b!==null){for(a.flags|=128,Ja(h,!1),i=b.updateQueue,a.updateQueue=i,Fl(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)mm(c,i),c=c.sibling;return W(Ae,Ae.current&1|2),It&&Li(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&he()>$l&&(a.flags|=128,g=!0,Ja(h,!1),a.lanes=4194304)}else{if(!g)if(i=Tl(b),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,Fl(a,i),Ja(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!It)return re(a),null}else 2*he()-h.renderingStartTime>$l&&c!==536870912&&(a.flags|=128,g=!0,Ja(h,!1),a.lanes=4194304);h.isBackwards?(b.sibling=a.child,a.child=b):(i=h.last,i!==null?i.sibling=b:a.child=b,h.last=b)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=he(),i.sibling=null,c=Ae.current,W(Ae,g?c&1|2:c&1),It&&Li(a,h.treeForkCount),i):(re(a),null);case 22:case 23:return kn(a),vh(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(re(a),a.subtreeFlags&6&&(a.flags|=8192)):re(a),c=a.updateQueue,c!==null&&Fl(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),i!==null&&X(Ys),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Pi(xe),re(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function bw(i,a){switch(ih(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Pi(xe),wt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Dt(a),null;case 31:if(a.memoizedState!==null){if(kn(a),a.alternate===null)throw Error(n(340));$s()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(kn(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));$s()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return X(Ae),null;case 4:return wt(),null;case 10:return Pi(a.type),null;case 22:case 23:return kn(a),vh(),i!==null&&X(Ys),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Pi(xe),null;case 25:return null;default:return null}}function Hg(i,a){switch(ih(a),a.tag){case 3:Pi(xe),wt();break;case 26:case 27:case 5:Dt(a);break;case 4:wt();break;case 31:a.memoizedState!==null&&kn(a);break;case 13:kn(a);break;case 19:X(Ae);break;case 10:Pi(a.type);break;case 22:case 23:kn(a),vh(),i!==null&&X(Ys);break;case 24:Pi(xe)}}function to(i,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&i)===i){h=void 0;var b=c.create,_=c.inst;h=b(),_.destroy=h}c=c.next}while(c!==g)}}catch(C){Wt(a,a.return,C)}}function ds(i,a,c){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var b=g.next;h=b;do{if((h.tag&i)===i){var _=h.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,g=a;var z=c,$=C;try{$()}catch(K){Wt(g,z,K)}}}h=h.next}while(h!==b)}}catch(K){Wt(a,a.return,K)}}function Gg(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{Nm(a,c)}catch(h){Wt(i,i.return,h)}}}function $g(i,a,c){c.props=Qs(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(h){Wt(i,a,h)}}function eo(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof c=="function"?i.refCleanup=c(h):c.current=h}}catch(g){Wt(i,a,g)}}function yi(i,a){var c=i.ref,h=i.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){Wt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Wt(i,a,g)}else c.current=null}function Vg(i){var a=i.type,c=i.memoizedProps,h=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){Wt(i,i.return,g)}}function Wh(i,a,c){try{var h=i.stateNode;Fw(h,i.type,c,a),h[mn]=a}catch(g){Wt(i,i.return,g)}}function Xg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ys(i.type)||i.tag===4}function Kh(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Xg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ys(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Qh(i,a,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Ri));else if(h!==4&&(h===27&&ys(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(Qh(i,a,c),i=i.sibling;i!==null;)Qh(i,a,c),i=i.sibling}function jl(i,a,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(h!==4&&(h===27&&ys(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(jl(i,a,c),i=i.sibling;i!==null;)jl(i,a,c),i=i.sibling}function Yg(i){var a=i.stateNode,c=i.memoizedProps;try{for(var h=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);We(a,h,c),a[Xe]=i,a[mn]=c}catch(b){Wt(i,i.return,b)}}var Ui=!1,Me=!1,Jh=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,He=null;function vw(i,a){if(i=i.containerInfo,Sd=oc,i=am(i),Xu(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break t}var _=0,C=-1,z=-1,$=0,K=0,tt=i,Y=null;e:for(;;){for(var q;tt!==c||g!==0&&tt.nodeType!==3||(C=_+g),tt!==b||h!==0&&tt.nodeType!==3||(z=_+h),tt.nodeType===3&&(_+=tt.nodeValue.length),(q=tt.firstChild)!==null;)Y=tt,tt=q;for(;;){if(tt===i)break e;if(Y===c&&++$===g&&(C=_),Y===b&&++K===h&&(z=_),(q=tt.nextSibling)!==null)break;tt=Y,Y=tt.parentNode}tt=q}c=C===-1||z===-1?null:{start:C,end:z}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ad={focusedElem:i,selectionRange:c},oc=!1,He=a;He!==null;)if(a=He,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,He=i;else for(;He!==null;){switch(a=He,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=a,g=b.memoizedProps,b=b.memoizedState,h=c.stateNode;try{var dt=Qs(c.type,g);i=h.getSnapshotBeforeUpdate(dt,b),h.__reactInternalSnapshotBeforeUpdate=i}catch(At){Wt(c,c.return,At)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)Ed(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ed(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,He=i;break}He=a.return}}function qg(i,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Gi(i,c),h&4&&to(5,c);break;case 1:if(Gi(i,c),h&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(_){Wt(c,c.return,_)}else{var g=Qs(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(_){Wt(c,c.return,_)}}h&64&&Gg(c),h&512&&eo(c,c.return);break;case 3:if(Gi(i,c),h&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Nm(i,a)}catch(_){Wt(c,c.return,_)}}break;case 27:a===null&&h&4&&Yg(c);case 26:case 5:Gi(i,c),a===null&&h&4&&Vg(c),h&512&&eo(c,c.return);break;case 12:Gi(i,c);break;case 31:Gi(i,c),h&4&&Qg(i,c);break;case 13:Gi(i,c),h&4&&Jg(i,c),h&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=Cw.bind(null,c),Yw(i,c))));break;case 22:if(h=c.memoizedState!==null||Ui,!h){a=a!==null&&a.memoizedState!==null||Me,g=Ui;var b=Me;Ui=h,(Me=a)&&!b?$i(i,c,(c.subtreeFlags&8772)!==0):Gi(i,c),Ui=g,Me=b}break;case 30:break;default:Gi(i,c)}}function Wg(i){var a=i.alternate;a!==null&&(i.alternate=null,Wg(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Du(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var oe=null,bn=!1;function Hi(i,a,c){for(c=c.child;c!==null;)Kg(i,a,c),c=c.sibling}function Kg(i,a,c){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(pn,c)}catch{}switch(c.tag){case 26:Me||yi(c,a),Hi(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Me||yi(c,a);var h=oe,g=bn;ys(c.type)&&(oe=c.stateNode,bn=!1),Hi(i,a,c),uo(c.stateNode),oe=h,bn=g;break;case 5:Me||yi(c,a);case 6:if(h=oe,g=bn,oe=null,Hi(i,a,c),oe=h,bn=g,oe!==null)if(bn)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(c.stateNode)}catch(b){Wt(c,a,b)}else try{oe.removeChild(c.stateNode)}catch(b){Wt(c,a,b)}break;case 18:oe!==null&&(bn?(i=oe,Gb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),ea(i)):Gb(oe,c.stateNode));break;case 4:h=oe,g=bn,oe=c.stateNode.containerInfo,bn=!0,Hi(i,a,c),oe=h,bn=g;break;case 0:case 11:case 14:case 15:ds(2,c,a),Me||ds(4,c,a),Hi(i,a,c);break;case 1:Me||(yi(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&$g(c,a,h)),Hi(i,a,c);break;case 21:Hi(i,a,c);break;case 22:Me=(h=Me)||c.memoizedState!==null,Hi(i,a,c),Me=h;break;default:Hi(i,a,c)}}function Qg(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ea(i)}catch(c){Wt(a,a.return,c)}}}function Jg(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ea(i)}catch(c){Wt(a,a.return,c)}}function yw(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Zg),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Zg),a;default:throw Error(n(435,i.tag))}}function Ul(i,a){var c=yw(i);a.forEach(function(h){if(!c.has(h)){c.add(h);var g=Mw.bind(null,i,h);h.then(g,g)}})}function vn(i,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],b=i,_=a,C=_;t:for(;C!==null;){switch(C.tag){case 27:if(ys(C.type)){oe=C.stateNode,bn=!1;break t}break;case 5:oe=C.stateNode,bn=!1;break t;case 3:case 4:oe=C.stateNode.containerInfo,bn=!0;break t}C=C.return}if(oe===null)throw Error(n(160));Kg(b,_,g),oe=null,bn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)tb(a,i),a=a.sibling}var ui=null;function tb(i,a){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:vn(a,i),yn(i),h&4&&(ds(3,i,i.return),to(3,i),ds(5,i,i.return));break;case 1:vn(a,i),yn(i),h&512&&(Me||c===null||yi(c,c.return)),h&64&&Ui&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=ui;if(vn(a,i),yn(i),h&512&&(Me||c===null||yi(c,c.return)),h&4){var b=c!==null?c.memoizedState:null;if(h=i.memoizedState,c===null)if(h===null)if(i.stateNode===null){t:{h=i.type,c=i.memoizedProps,g=g.ownerDocument||g;e:switch(h){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Ma]||b[Xe]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(h),g.head.insertBefore(b,g.querySelector("head > title"))),We(b,h,c),b[Xe]=i,Ue(b),h=b;break t;case"link":var _=tv("link","href",g).get(h+(c.href||""));if(_){for(var C=0;C<_.length;C++)if(b=_[C],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(C,1);break e}}b=g.createElement(h),We(b,h,c),g.head.appendChild(b);break;case"meta":if(_=tv("meta","content",g).get(h+(c.content||""))){for(C=0;C<_.length;C++)if(b=_[C],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(C,1);break e}}b=g.createElement(h),We(b,h,c),g.head.appendChild(b);break;default:throw Error(n(468,h))}b[Xe]=i,Ue(b),h=b}i.stateNode=h}else ev(g,i.type,i.stateNode);else i.stateNode=Jb(g,h,i.memoizedProps);else b!==h?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,h===null?ev(g,i.type,i.stateNode):Jb(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Wh(i,i.memoizedProps,c.memoizedProps)}break;case 27:vn(a,i),yn(i),h&512&&(Me||c===null||yi(c,c.return)),c!==null&&h&4&&Wh(i,i.memoizedProps,c.memoizedProps);break;case 5:if(vn(a,i),yn(i),h&512&&(Me||c===null||yi(c,c.return)),i.flags&32){g=i.stateNode;try{Er(g,"")}catch(dt){Wt(i,i.return,dt)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Wh(i,g,c!==null?c.memoizedProps:g)),h&1024&&(Jh=!0);break;case 6:if(vn(a,i),yn(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,c=i.stateNode;try{c.nodeValue=h}catch(dt){Wt(i,i.return,dt)}}break;case 3:if(ic=null,g=ui,ui=ec(a.containerInfo),vn(a,i),ui=g,yn(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{ea(a.containerInfo)}catch(dt){Wt(i,i.return,dt)}Jh&&(Jh=!1,eb(i));break;case 4:h=ui,ui=ec(i.stateNode.containerInfo),vn(a,i),yn(i),ui=h;break;case 12:vn(a,i),yn(i);break;case 31:vn(a,i),yn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ul(i,h)));break;case 13:vn(a,i),yn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Gl=he()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ul(i,h)));break;case 22:g=i.memoizedState!==null;var z=c!==null&&c.memoizedState!==null,$=Ui,K=Me;if(Ui=$||g,Me=K||z,vn(a,i),Me=K,Ui=$,yn(i),h&8192)t:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||z||Ui||Me||Js(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){z=c=a;try{if(b=z.stateNode,g)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=z.stateNode;var tt=z.memoizedProps.style,Y=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(dt){Wt(z,z.return,dt)}}}else if(a.tag===6){if(c===null){z=a;try{z.stateNode.nodeValue=g?"":z.memoizedProps}catch(dt){Wt(z,z.return,dt)}}}else if(a.tag===18){if(c===null){z=a;try{var q=z.stateNode;g?$b(q,!0):$b(z.stateNode,!1)}catch(dt){Wt(z,z.return,dt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Ul(i,c))));break;case 19:vn(a,i),yn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ul(i,h)));break;case 30:break;case 21:break;default:vn(a,i),yn(i)}}function yn(i){var a=i.flags;if(a&2){try{for(var c,h=i.return;h!==null;){if(Xg(h)){c=h;break}h=h.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var g=c.stateNode,b=Kh(i);jl(i,b,g);break;case 5:var _=c.stateNode;c.flags&32&&(Er(_,""),c.flags&=-33);var C=Kh(i);jl(i,C,_);break;case 3:case 4:var z=c.stateNode.containerInfo,$=Kh(i);Qh(i,$,z);break;default:throw Error(n(161))}}catch(K){Wt(i,i.return,K)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function eb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;eb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Gi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)qg(i,a.alternate,a),a=a.sibling}function Js(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:ds(4,a,a.return),Js(a);break;case 1:yi(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&$g(a,a.return,c),Js(a);break;case 27:uo(a.stateNode);case 26:case 5:yi(a,a.return),Js(a);break;case 22:a.memoizedState===null&&Js(a);break;case 30:Js(a);break;default:Js(a)}i=i.sibling}}function $i(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=i,b=a,_=b.flags;switch(b.tag){case 0:case 11:case 15:$i(g,b,c),to(4,b);break;case 1:if($i(g,b,c),h=b,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch($){Wt(h,h.return,$)}if(h=b,g=h.updateQueue,g!==null){var C=h.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)km(z[g],C)}catch($){Wt(h,h.return,$)}}c&&_&64&&Gg(b),eo(b,b.return);break;case 27:Yg(b);case 26:case 5:$i(g,b,c),c&&h===null&&_&4&&Vg(b),eo(b,b.return);break;case 12:$i(g,b,c);break;case 31:$i(g,b,c),c&&_&4&&Qg(g,b);break;case 13:$i(g,b,c),c&&_&4&&Jg(g,b);break;case 22:b.memoizedState===null&&$i(g,b,c),eo(b,b.return);break;case 30:break;default:$i(g,b,c)}a=a.sibling}}function td(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Ua(c))}function ed(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ua(i))}function hi(i,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)nb(i,a,c,h),a=a.sibling}function nb(i,a,c,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:hi(i,a,c,h),g&2048&&to(9,a);break;case 1:hi(i,a,c,h);break;case 3:hi(i,a,c,h),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ua(i)));break;case 12:if(g&2048){hi(i,a,c,h),i=a.stateNode;try{var b=a.memoizedProps,_=b.id,C=b.onPostCommit;typeof C=="function"&&C(_,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){Wt(a,a.return,z)}}else hi(i,a,c,h);break;case 31:hi(i,a,c,h);break;case 13:hi(i,a,c,h);break;case 23:break;case 22:b=a.stateNode,_=a.alternate,a.memoizedState!==null?b._visibility&2?hi(i,a,c,h):no(i,a):b._visibility&2?hi(i,a,c,h):(b._visibility|=2,$r(i,a,c,h,(a.subtreeFlags&10256)!==0||!1)),g&2048&&td(_,a);break;case 24:hi(i,a,c,h),g&2048&&ed(a.alternate,a);break;default:hi(i,a,c,h)}}function $r(i,a,c,h,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,_=a,C=c,z=h,$=_.flags;switch(_.tag){case 0:case 11:case 15:$r(b,_,C,z,g),to(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?$r(b,_,C,z,g):no(b,_):(K._visibility|=2,$r(b,_,C,z,g)),g&&$&2048&&td(_.alternate,_);break;case 24:$r(b,_,C,z,g),g&&$&2048&&ed(_.alternate,_);break;default:$r(b,_,C,z,g)}a=a.sibling}}function no(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,h=a,g=h.flags;switch(h.tag){case 22:no(c,h),g&2048&&td(h.alternate,h);break;case 24:no(c,h),g&2048&&ed(h.alternate,h);break;default:no(c,h)}a=a.sibling}}var io=8192;function Vr(i,a,c){if(i.subtreeFlags&io)for(i=i.child;i!==null;)ib(i,a,c),i=i.sibling}function ib(i,a,c){switch(i.tag){case 26:Vr(i,a,c),i.flags&io&&i.memoizedState!==null&&r_(c,ui,i.memoizedState,i.memoizedProps);break;case 5:Vr(i,a,c);break;case 3:case 4:var h=ui;ui=ec(i.stateNode.containerInfo),Vr(i,a,c),ui=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=io,io=16777216,Vr(i,a,c),io=h):Vr(i,a,c));break;default:Vr(i,a,c)}}function sb(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function so(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];He=h,ab(h,i)}sb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)rb(i),i=i.sibling}function rb(i){switch(i.tag){case 0:case 11:case 15:so(i),i.flags&2048&&ds(9,i,i.return);break;case 3:so(i);break;case 12:so(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Hl(i)):so(i);break;default:so(i)}}function Hl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];He=h,ab(h,i)}sb(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:ds(8,a,a.return),Hl(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Hl(a));break;default:Hl(a)}i=i.sibling}}function ab(i,a){for(;He!==null;){var c=He;switch(c.tag){case 0:case 11:case 15:ds(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ua(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,He=h;else t:for(c=i;He!==null;){h=He;var g=h.sibling,b=h.return;if(Wg(h),h===c){He=null;break t}if(g!==null){g.return=b,He=g;break t}He=b}}}var Sw={getCacheForType:function(i){var a=Ze(xe),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return Ze(xe).controller.signal}},Aw=typeof WeakMap=="function"?WeakMap:Map,Gt=0,ne=null,Nt=null,zt=0,qt=0,Nn=null,fs=!1,Xr=!1,nd=!1,Vi=0,be=0,ps=0,tr=0,id=0,Ln=0,Yr=0,ro=null,Sn=null,sd=!1,Gl=0,ob=0,$l=1/0,Vl=null,ms=null,ze=0,gs=null,Zr=null,Xi=0,rd=0,ad=null,lb=null,ao=0,od=null;function zn(){return(Gt&2)!==0&&zt!==0?zt&-zt:L.T!==null?fd():Ep()}function cb(){if(Ln===0)if((zt&536870912)===0||It){var i=Ps;Ps<<=1,(Ps&3932160)===0&&(Ps=262144),Ln=i}else Ln=536870912;return i=Rn.current,i!==null&&(i.flags|=32),Ln}function An(i,a,c){(i===ne&&(qt===2||qt===9)||i.cancelPendingCommit!==null)&&(qr(i,0),bs(i,zt,Ln,!1)),Ca(i,c),((Gt&2)===0||i!==ne)&&(i===ne&&((Gt&2)===0&&(tr|=c),be===4&&bs(i,zt,Ln,!1)),Si(i))}function ub(i,a,c){if((Gt&6)!==0)throw Error(n(327));var h=!c&&(a&127)===0&&(a&i.expiredLanes)===0||ts(i,a),g=h?Ew(i,a):cd(i,a,!0),b=h;do{if(g===0){Xr&&!h&&bs(i,a,0,!1);break}else{if(c=i.current.alternate,b&&!ww(c)){g=cd(i,a,!1),b=!1;continue}if(g===2){if(b=a,i.errorRecoveryDisabledLanes&b)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;t:{var C=i;g=ro;var z=C.current.memoizedState.isDehydrated;if(z&&(qr(C,_).flags|=256),_=cd(C,_,!1),_!==2){if(nd&&!z){C.errorRecoveryDisabledLanes|=b,tr|=b,g=4;break t}b=Sn,Sn=g,b!==null&&(Sn===null?Sn=b:Sn.push.apply(Sn,b))}g=_}if(b=!1,g!==2)continue}}if(g===1){qr(i,0),bs(i,a,0,!0);break}t:{switch(h=i,b=g,b){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:bs(h,a,Ln,!fs);break t;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(g=Gl+300-he(),10<g)){if(bs(h,a,Ln,!fs),br(h,0,!0)!==0)break t;Xi=a,h.timeoutHandle=Ub(hb.bind(null,h,c,Sn,Vl,sd,a,Ln,tr,Yr,fs,b,"Throttled",-0,0),g);break t}hb(h,c,Sn,Vl,sd,a,Ln,tr,Yr,fs,b,null,-0,0)}}break}while(!0);Si(i)}function hb(i,a,c,h,g,b,_,C,z,$,K,tt,Y,q){if(i.timeoutHandle=-1,tt=a.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ri},ib(a,b,tt);var dt=(b&62914560)===b?Gl-he():(b&4194048)===b?ob-he():0;if(dt=a_(tt,dt),dt!==null){Xi=b,i.cancelPendingCommit=dt(yb.bind(null,i,a,b,c,h,g,_,C,z,K,tt,null,Y,q)),bs(i,b,_,!$);return}}yb(i,a,b,c,h,g,_,C,z)}function ww(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],b=g.getSnapshot;g=g.value;try{if(!Dn(b(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function bs(i,a,c,h){a&=~id,a&=~tr,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var g=a;0<g;){var b=31-Ve(g),_=1<<b;h[b]=-1,g&=~_}c!==0&&Ap(i,c,a)}function Xl(){return(Gt&6)===0?(oo(0),!1):!0}function ld(){if(Nt!==null){if(qt===0)var i=Nt.return;else i=Nt,zi=Vs=null,Eh(i),Fr=null,Ga=0,i=Nt;for(;i!==null;)Hg(i.alternate,i),i=i.return;Nt=null}}function qr(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Hw(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Xi=0,ld(),ne=i,Nt=c=Ni(i.current,null),zt=a,qt=0,Nn=null,fs=!1,Xr=ts(i,a),nd=!1,Yr=Ln=id=tr=ps=be=0,Sn=ro=null,sd=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var g=31-Ve(h),b=1<<g;a|=i[g],h&=~b}return Vi=a,fl(),c}function db(i,a){Mt=null,L.H=Ka,a===Ir||a===Al?(a=Mm(),qt=3):a===dh?(a=Mm(),qt=4):qt=a===jh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Nn=a,Nt===null&&(be=1,zl(i,Yn(a,i.current)))}function fb(){var i=Rn.current;return i===null?!0:(zt&4194048)===zt?Kn===null:(zt&62914560)===zt||(zt&536870912)!==0?i===Kn:!1}function pb(){var i=L.H;return L.H=Ka,i===null?Ka:i}function mb(){var i=L.A;return L.A=Sw,i}function Yl(){be=4,fs||(zt&4194048)!==zt&&Rn.current!==null||(Xr=!0),(ps&134217727)===0&&(tr&134217727)===0||ne===null||bs(ne,zt,Ln,!1)}function cd(i,a,c){var h=Gt;Gt|=2;var g=pb(),b=mb();(ne!==i||zt!==a)&&(Vl=null,qr(i,a)),a=!1;var _=be;t:do try{if(qt!==0&&Nt!==null){var C=Nt,z=Nn;switch(qt){case 8:ld(),_=6;break t;case 3:case 2:case 9:case 6:Rn.current===null&&(a=!0);var $=qt;if(qt=0,Nn=null,Wr(i,C,z,$),c&&Xr){_=0;break t}break;default:$=qt,qt=0,Nn=null,Wr(i,C,z,$)}}_w(),_=be;break}catch(K){db(i,K)}while(!0);return a&&i.shellSuspendCounter++,zi=Vs=null,Gt=h,L.H=g,L.A=b,Nt===null&&(ne=null,zt=0,fl()),_}function _w(){for(;Nt!==null;)gb(Nt)}function Ew(i,a){var c=Gt;Gt|=2;var h=pb(),g=mb();ne!==i||zt!==a?(Vl=null,$l=he()+500,qr(i,a)):Xr=ts(i,a);t:do try{if(qt!==0&&Nt!==null){a=Nt;var b=Nn;e:switch(qt){case 1:qt=0,Nn=null,Wr(i,a,b,1);break;case 2:case 9:if(Tm(b)){qt=0,Nn=null,bb(a);break}a=function(){qt!==2&&qt!==9||ne!==i||(qt=7),Si(i)},b.then(a,a);break t;case 3:qt=7;break t;case 4:qt=5;break t;case 7:Tm(b)?(qt=0,Nn=null,bb(a)):(qt=0,Nn=null,Wr(i,a,b,7));break;case 5:var _=null;switch(Nt.tag){case 26:_=Nt.memoizedState;case 5:case 27:var C=Nt;if(_?nv(_):C.stateNode.complete){qt=0,Nn=null;var z=C.sibling;if(z!==null)Nt=z;else{var $=C.return;$!==null?(Nt=$,Zl($)):Nt=null}break e}}qt=0,Nn=null,Wr(i,a,b,5);break;case 6:qt=0,Nn=null,Wr(i,a,b,6);break;case 8:ld(),be=6;break t;default:throw Error(n(462))}}xw();break}catch(K){db(i,K)}while(!0);return zi=Vs=null,L.H=h,L.A=g,Gt=c,Nt!==null?0:(ne=null,zt=0,fl(),be)}function xw(){for(;Nt!==null&&!Un();)gb(Nt)}function gb(i){var a=jg(i.alternate,i,Vi);i.memoizedProps=i.pendingProps,a===null?Zl(i):Nt=a}function bb(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Lg(c,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=Lg(c,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:Eh(a);default:Hg(c,a),a=Nt=mm(a,Vi),a=jg(c,a,Vi)}i.memoizedProps=i.pendingProps,a===null?Zl(i):Nt=a}function Wr(i,a,c,h){zi=Vs=null,Eh(a),Fr=null,Ga=0;var g=a.return;try{if(fw(i,g,a,c,zt)){be=1,zl(i,Yn(c,i.current)),Nt=null;return}}catch(b){if(g!==null)throw Nt=g,b;be=1,zl(i,Yn(c,i.current)),Nt=null;return}a.flags&32768?(It||h===1?i=!0:Xr||(zt&536870912)!==0?i=!1:(fs=i=!0,(h===2||h===9||h===3||h===6)&&(h=Rn.current,h!==null&&h.tag===13&&(h.flags|=16384))),vb(a,i)):Zl(a)}function Zl(i){var a=i;do{if((a.flags&32768)!==0){vb(a,fs);return}i=a.return;var c=gw(a.alternate,a,Vi);if(c!==null){Nt=c;return}if(a=a.sibling,a!==null){Nt=a;return}Nt=a=i}while(a!==null);be===0&&(be=5)}function vb(i,a){do{var c=bw(i.alternate,i);if(c!==null){c.flags&=32767,Nt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){Nt=i;return}Nt=i=c}while(i!==null);be=6,Nt=null}function yb(i,a,c,h,g,b,_,C,z){i.cancelPendingCommit=null;do ql();while(ze!==0);if((Gt&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(b=a.lanes|a.childLanes,b|=Ku,s1(i,c,b,_,C,z),i===ne&&(Nt=ne=null,zt=0),Zr=a,gs=i,Xi=c,rd=b,ad=g,lb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Dw(Mn,function(){return Eb(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=L.T,L.T=null,g=F.p,F.p=2,_=Gt,Gt|=4;try{vw(i,a,c)}finally{Gt=_,F.p=g,L.T=h}}ze=1,Sb(),Ab(),wb()}}function Sb(){if(ze===1){ze=0;var i=gs,a=Zr,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var h=F.p;F.p=2;var g=Gt;Gt|=4;try{tb(a,i);var b=Ad,_=am(i.containerInfo),C=b.focusedElem,z=b.selectionRange;if(_!==C&&C&&C.ownerDocument&&rm(C.ownerDocument.documentElement,C)){if(z!==null&&Xu(C)){var $=z.start,K=z.end;if(K===void 0&&(K=$),"selectionStart"in C)C.selectionStart=$,C.selectionEnd=Math.min(K,C.value.length);else{var tt=C.ownerDocument||document,Y=tt&&tt.defaultView||window;if(Y.getSelection){var q=Y.getSelection(),dt=C.textContent.length,At=Math.min(z.start,dt),te=z.end===void 0?At:Math.min(z.end,dt);!q.extend&&At>te&&(_=te,te=At,At=_);var j=sm(C,At),I=sm(C,te);if(j&&I&&(q.rangeCount!==1||q.anchorNode!==j.node||q.anchorOffset!==j.offset||q.focusNode!==I.node||q.focusOffset!==I.offset)){var G=tt.createRange();G.setStart(j.node,j.offset),q.removeAllRanges(),At>te?(q.addRange(G),q.extend(I.node,I.offset)):(G.setEnd(I.node,I.offset),q.addRange(G))}}}}for(tt=[],q=C;q=q.parentNode;)q.nodeType===1&&tt.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<tt.length;C++){var J=tt[C];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}oc=!!Sd,Ad=Sd=null}finally{Gt=g,F.p=h,L.T=c}}i.current=a,ze=2}}function Ab(){if(ze===2){ze=0;var i=gs,a=Zr,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var h=F.p;F.p=2;var g=Gt;Gt|=4;try{qg(i,a.alternate,a)}finally{Gt=g,F.p=h,L.T=c}}ze=3}}function wb(){if(ze===4||ze===3){ze=0,Hn();var i=gs,a=Zr,c=Xi,h=lb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ze=5:(ze=0,Zr=gs=null,_b(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ms=null),Cu(c),a=a.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(pn,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=L.T,g=F.p,F.p=2,L.T=null;try{for(var b=i.onRecoverableError,_=0;_<h.length;_++){var C=h[_];b(C.value,{componentStack:C.stack})}}finally{L.T=a,F.p=g}}(Xi&3)!==0&&ql(),Si(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===od?ao++:(ao=0,od=i):ao=0,oo(0)}}function _b(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Ua(a)))}function ql(){return Sb(),Ab(),wb(),Eb()}function Eb(){if(ze!==5)return!1;var i=gs,a=rd;rd=0;var c=Cu(Xi),h=L.T,g=F.p;try{F.p=32>c?32:c,L.T=null,c=ad,ad=null;var b=gs,_=Xi;if(ze=0,Zr=gs=null,Xi=0,(Gt&6)!==0)throw Error(n(331));var C=Gt;if(Gt|=4,rb(b.current),nb(b,b.current,_,c),Gt=C,oo(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(pn,b)}catch{}return!0}finally{F.p=g,L.T=h,_b(i,a)}}function xb(i,a,c){a=Yn(c,a),a=Fh(i.stateNode,a,2),i=cs(i,a,2),i!==null&&(Ca(i,2),Si(i))}function Wt(i,a,c){if(i.tag===3)xb(i,i,c);else for(;a!==null;){if(a.tag===3){xb(a,i,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ms===null||!ms.has(h))){i=Yn(c,i),c=Tg(2),h=cs(a,c,2),h!==null&&(Cg(c,h,a,i),Ca(h,2),Si(h));break}}a=a.return}}function ud(i,a,c){var h=i.pingCache;if(h===null){h=i.pingCache=new Aw;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(c)||(nd=!0,g.add(c),i=Tw.bind(null,i,a,c),a.then(i,i))}function Tw(i,a,c){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,ne===i&&(zt&c)===c&&(be===4||be===3&&(zt&62914560)===zt&&300>he()-Gl?(Gt&2)===0&&qr(i,0):id|=c,Yr===zt&&(Yr=0)),Si(i)}function Tb(i,a){a===0&&(a=el()),i=Hs(i,a),i!==null&&(Ca(i,a),Si(i))}function Cw(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),Tb(i,c)}function Mw(i,a){var c=0;switch(i.tag){case 31:case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),Tb(i,c)}function Dw(i,a){return je(i,a)}var Wl=null,Kr=null,hd=!1,Kl=!1,dd=!1,vs=0;function Si(i){i!==Kr&&i.next===null&&(Kr===null?Wl=Kr=i:Kr=Kr.next=i),Kl=!0,hd||(hd=!0,Rw())}function oo(i,a){if(!dd&&Kl){dd=!0;do for(var c=!1,h=Wl;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var b=0;else{var _=h.suspendedLanes,C=h.pingedLanes;b=(1<<31-Ve(42|i)+1)-1,b&=g&~(_&~C),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Ob(h,b))}else b=zt,b=br(h,h===ne?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||ts(h,b)||(c=!0,Ob(h,b));h=h.next}while(c);dd=!1}}function Ow(){Cb()}function Cb(){Kl=hd=!1;var i=0;vs!==0&&Uw()&&(i=vs);for(var a=he(),c=null,h=Wl;h!==null;){var g=h.next,b=Mb(h,a);b===0?(h.next=null,c===null?Wl=g:c.next=g,g===null&&(Kr=c)):(c=h,(i!==0||(b&3)!==0)&&(Kl=!0)),h=g}ze!==0&&ze!==5||oo(i),vs!==0&&(vs=0)}function Mb(i,a){for(var c=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var _=31-Ve(b),C=1<<_,z=g[_];z===-1?((C&c)===0||(C&h)!==0)&&(g[_]=tl(C,a)):z<=a&&(i.expiredLanes|=C),b&=~C}if(a=ne,c=zt,c=br(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,c===0||i===a&&(qt===2||qt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&en(h),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||ts(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(h!==null&&en(h),Cu(c)){case 2:case 8:c=Gn;break;case 32:c=Mn;break;case 268435456:c=Ee;break;default:c=Mn}return h=Db.bind(null,i),c=je(c,h),i.callbackPriority=a,i.callbackNode=c,a}return h!==null&&h!==null&&en(h),i.callbackPriority=2,i.callbackNode=null,2}function Db(i,a){if(ze!==0&&ze!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(ql()&&i.callbackNode!==c)return null;var h=zt;return h=br(i,i===ne?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(ub(i,h,a),Mb(i,he()),i.callbackNode!=null&&i.callbackNode===c?Db.bind(null,i):null)}function Ob(i,a){if(ql())return null;ub(i,a,!0)}function Rw(){Gw(function(){(Gt&6)!==0?je(li,Ow):Cb()})}function fd(){if(vs===0){var i=Pr;i===0&&(i=gr,gr<<=1,(gr&261888)===0&&(gr=256)),vs=i}return vs}function Rb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:rl(""+i)}function kb(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function kw(i,a,c,h,g){if(a==="submit"&&c&&c.stateNode===g){var b=Rb((g[mn]||null).action),_=h.submitter;_&&(a=(a=_[mn]||null)?Rb(a.formAction):_.getAttribute("formAction"),a!==null&&(b=a,_=null));var C=new cl("action","action",null,h,g);i.push({event:C,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(vs!==0){var z=_?kb(g,_):new FormData(g);Nh(c,{pending:!0,data:z,method:g.method,action:b},null,z)}}else typeof b=="function"&&(C.preventDefault(),z=_?kb(g,_):new FormData(g),Nh(c,{pending:!0,data:z,method:g.method,action:b},b,z))},currentTarget:g}]})}}for(var pd=0;pd<Wu.length;pd++){var md=Wu[pd],Nw=md.toLowerCase(),Lw=md[0].toUpperCase()+md.slice(1);ci(Nw,"on"+Lw)}ci(cm,"onAnimationEnd"),ci(um,"onAnimationIteration"),ci(hm,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(W1,"onTransitionRun"),ci(K1,"onTransitionStart"),ci(Q1,"onTransitionCancel"),ci(dm,"onTransitionEnd"),wr("onMouseEnter",["mouseout","mouseover"]),wr("onMouseLeave",["mouseout","mouseover"]),wr("onPointerEnter",["pointerout","pointerover"]),wr("onPointerLeave",["pointerout","pointerover"]),Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Is("onBeforeInput",["compositionend","keypress","textInput","paste"]),Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lo));function Nb(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],g=h.event;h=h.listeners;t:{var b=void 0;if(a)for(var _=h.length-1;0<=_;_--){var C=h[_],z=C.instance,$=C.currentTarget;if(C=C.listener,z!==b&&g.isPropagationStopped())break t;b=C,g.currentTarget=$;try{b(g)}catch(K){dl(K)}g.currentTarget=null,b=z}else for(_=0;_<h.length;_++){if(C=h[_],z=C.instance,$=C.currentTarget,C=C.listener,z!==b&&g.isPropagationStopped())break t;b=C,g.currentTarget=$;try{b(g)}catch(K){dl(K)}g.currentTarget=null,b=z}}}}function Lt(i,a){var c=a[Mu];c===void 0&&(c=a[Mu]=new Set);var h=i+"__bubble";c.has(h)||(Lb(a,i,2,!1),c.add(h))}function gd(i,a,c){var h=0;a&&(h|=4),Lb(c,i,h,a)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function bd(i){if(!i[Ql]){i[Ql]=!0,Cp.forEach(function(c){c!=="selectionchange"&&(zw.has(c)||gd(c,!1,i),gd(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Ql]||(a[Ql]=!0,gd("selectionchange",!1,a))}}function Lb(i,a,c,h){switch(cv(a)){case 2:var g=c_;break;case 8:g=u_;break;default:g=kd}c=g.bind(null,a,c,i),g=void 0,!Bu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function vd(i,a,c,h,g){var b=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var C=h.stateNode.containerInfo;if(C===g)break;if(_===4)for(_=h.return;_!==null;){var z=_.tag;if((z===3||z===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;C!==null;){if(_=yr(C),_===null)return;if(z=_.tag,z===5||z===6||z===26||z===27){h=b=_;continue t}C=C.parentNode}}h=h.return}Fp(function(){var $=b,K=zu(c),tt=[];t:{var Y=fm.get(i);if(Y!==void 0){var q=cl,dt=i;switch(i){case"keypress":if(ol(c)===0)break t;case"keydown":case"keyup":q=M1;break;case"focusin":dt="focus",q=Uu;break;case"focusout":dt="blur",q=Uu;break;case"beforeblur":case"afterblur":q=Uu;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=g1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=R1;break;case cm:case um:case hm:q=y1;break;case dm:q=N1;break;case"scroll":case"scrollend":q=p1;break;case"wheel":q=z1;break;case"copy":case"cut":case"paste":q=A1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=$p;break;case"toggle":case"beforetoggle":q=B1}var At=(a&4)!==0,te=!At&&(i==="scroll"||i==="scrollend"),j=At?Y!==null?Y+"Capture":null:Y;At=[];for(var I=$,G;I!==null;){var J=I;if(G=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||G===null||j===null||(J=Oa(I,j),J!=null&&At.push(co(I,J,G))),te)break;I=I.return}0<At.length&&(Y=new q(Y,dt,null,c,K),tt.push({event:Y,listeners:At}))}}if((a&7)===0){t:{if(Y=i==="mouseover"||i==="pointerover",q=i==="mouseout"||i==="pointerout",Y&&c!==Lu&&(dt=c.relatedTarget||c.fromElement)&&(yr(dt)||dt[vr]))break t;if((q||Y)&&(Y=K.window===K?K:(Y=K.ownerDocument)?Y.defaultView||Y.parentWindow:window,q?(dt=c.relatedTarget||c.toElement,q=$,dt=dt?yr(dt):null,dt!==null&&(te=o(dt),At=dt.tag,dt!==te||At!==5&&At!==27&&At!==6)&&(dt=null)):(q=null,dt=$),q!==dt)){if(At=Hp,J="onMouseLeave",j="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(At=$p,J="onPointerLeave",j="onPointerEnter",I="pointer"),te=q==null?Y:Da(q),G=dt==null?Y:Da(dt),Y=new At(J,I+"leave",q,c,K),Y.target=te,Y.relatedTarget=G,J=null,yr(K)===$&&(At=new At(j,I+"enter",dt,c,K),At.target=G,At.relatedTarget=te,J=At),te=J,q&&dt)e:{for(At=Pw,j=q,I=dt,G=0,J=j;J;J=At(J))G++;J=0;for(var bt=I;bt;bt=At(bt))J++;for(;0<G-J;)j=At(j),G--;for(;0<J-G;)I=At(I),J--;for(;G--;){if(j===I||I!==null&&j===I.alternate){At=j;break e}j=At(j),I=At(I)}At=null}else At=null;q!==null&&zb(tt,Y,q,At,!1),dt!==null&&te!==null&&zb(tt,te,dt,At,!0)}}t:{if(Y=$?Da($):window,q=Y.nodeName&&Y.nodeName.toLowerCase(),q==="select"||q==="input"&&Y.type==="file")var Ut=Qp;else if(Wp(Y))if(Jp)Ut=Y1;else{Ut=V1;var mt=$1}else q=Y.nodeName,!q||q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&Nu($.elementType)&&(Ut=Qp):Ut=X1;if(Ut&&(Ut=Ut(i,$))){Kp(tt,Ut,c,K);break t}mt&&mt(i,Y,$),i==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&ku(Y,"number",Y.value)}switch(mt=$?Da($):window,i){case"focusin":(Wp(mt)||mt.contentEditable==="true")&&(Mr=mt,Yu=$,Ia=null);break;case"focusout":Ia=Yu=Mr=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,om(tt,c,K);break;case"selectionchange":if(q1)break;case"keydown":case"keyup":om(tt,c,K)}var Ot;if(Gu)t:{switch(i){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Cr?Zp(i,c)&&(Pt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Pt="onCompositionStart");Pt&&(Vp&&c.locale!=="ko"&&(Cr||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Cr&&(Ot=jp()):(ns=K,Iu="value"in ns?ns.value:ns.textContent,Cr=!0)),mt=Jl($,Pt),0<mt.length&&(Pt=new Gp(Pt,i,null,c,K),tt.push({event:Pt,listeners:mt}),Ot?Pt.data=Ot:(Ot=qp(c),Ot!==null&&(Pt.data=Ot)))),(Ot=F1?j1(i,c):U1(i,c))&&(Pt=Jl($,"onBeforeInput"),0<Pt.length&&(mt=new Gp("onBeforeInput","beforeinput",null,c,K),tt.push({event:mt,listeners:Pt}),mt.data=Ot)),kw(tt,i,$,c,K)}Nb(tt,a)})}function co(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Jl(i,a){for(var c=a+"Capture",h=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Oa(i,c),g!=null&&h.unshift(co(i,g,b)),g=Oa(i,a),g!=null&&h.push(co(i,g,b))),i.tag===3)return h;i=i.return}return[]}function Pw(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zb(i,a,c,h,g){for(var b=a._reactName,_=[];c!==null&&c!==h;){var C=c,z=C.alternate,$=C.stateNode;if(C=C.tag,z!==null&&z===h)break;C!==5&&C!==26&&C!==27||$===null||(z=$,g?($=Oa(c,b),$!=null&&_.unshift(co(c,$,z))):g||($=Oa(c,b),$!=null&&_.push(co(c,$,z)))),c=c.return}_.length!==0&&i.push({event:a,listeners:_})}var Bw=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function Pb(i){return(typeof i=="string"?i:""+i).replace(Bw,`
`).replace(Iw,"")}function Bb(i,a){return a=Pb(a),Pb(i)===a}function Jt(i,a,c,h,g,b){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Er(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Er(i,""+h);break;case"className":il(i,"class",h);break;case"tabIndex":il(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":il(i,c,h);break;case"style":Bp(i,h,b);break;case"data":if(a!=="object"){il(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=rl(""+h),i.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&Jt(i,a,"name",g.name,g,null),Jt(i,a,"formEncType",g.formEncType,g,null),Jt(i,a,"formMethod",g.formMethod,g,null),Jt(i,a,"formTarget",g.formTarget,g,null)):(Jt(i,a,"encType",g.encType,g,null),Jt(i,a,"method",g.method,g,null),Jt(i,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=rl(""+h),i.setAttribute(c,h);break;case"onClick":h!=null&&(i.onclick=Ri);break;case"onScroll":h!=null&&Lt("scroll",i);break;case"onScrollEnd":h!=null&&Lt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}c=rl(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""+h):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":h===!0?i.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,h):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(c,h):i.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(c):i.setAttribute(c,h);break;case"popover":Lt("beforetoggle",i),Lt("toggle",i),nl(i,"popover",h);break;case"xlinkActuate":Oi(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Oi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Oi(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Oi(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Oi(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Oi(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Oi(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Oi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Oi(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":nl(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=d1.get(c)||c,nl(i,c,h))}}function yd(i,a,c,h,g,b){switch(c){case"style":Bp(i,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof h=="string"?Er(i,h):(typeof h=="number"||typeof h=="bigint")&&Er(i,""+h);break;case"onScroll":h!=null&&Lt("scroll",i);break;case"onScrollEnd":h!=null&&Lt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mp.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),b=i[mn]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(a,b,g),typeof h=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,h,g);break t}c in i?i[c]=h:h===!0?i.setAttribute(c,""):nl(i,c,h)}}}function We(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",i),Lt("load",i);var h=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var _=c[b];if(_!=null)switch(b){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Jt(i,a,b,_,c,null)}}g&&Jt(i,a,"srcSet",c.srcSet,c,null),h&&Jt(i,a,"src",c.src,c,null);return;case"input":Lt("invalid",i);var C=b=_=g=null,z=null,$=null;for(h in c)if(c.hasOwnProperty(h)){var K=c[h];if(K!=null)switch(h){case"name":g=K;break;case"type":_=K;break;case"checked":z=K;break;case"defaultChecked":$=K;break;case"value":b=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,a));break;default:Jt(i,a,h,K,c,null)}}Np(i,b,C,z,$,_,g,!1);return;case"select":Lt("invalid",i),h=_=b=null;for(g in c)if(c.hasOwnProperty(g)&&(C=c[g],C!=null))switch(g){case"value":b=C;break;case"defaultValue":_=C;break;case"multiple":h=C;default:Jt(i,a,g,C,c,null)}a=b,c=_,i.multiple=!!h,a!=null?_r(i,!!h,a,!1):c!=null&&_r(i,!!h,c,!0);return;case"textarea":Lt("invalid",i),b=g=h=null;for(_ in c)if(c.hasOwnProperty(_)&&(C=c[_],C!=null))switch(_){case"value":h=C;break;case"defaultValue":g=C;break;case"children":b=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:Jt(i,a,_,C,c,null)}zp(i,h,g,b);return;case"option":for(z in c)c.hasOwnProperty(z)&&(h=c[z],h!=null)&&(z==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":Jt(i,a,z,h,c,null));return;case"dialog":Lt("beforetoggle",i),Lt("toggle",i),Lt("cancel",i),Lt("close",i);break;case"iframe":case"object":Lt("load",i);break;case"video":case"audio":for(h=0;h<lo.length;h++)Lt(lo[h],i);break;case"image":Lt("error",i),Lt("load",i);break;case"details":Lt("toggle",i);break;case"embed":case"source":case"link":Lt("error",i),Lt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in c)if(c.hasOwnProperty($)&&(h=c[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Jt(i,a,$,h,c,null)}return;default:if(Nu(a)){for(K in c)c.hasOwnProperty(K)&&(h=c[K],h!==void 0&&yd(i,a,K,h,c,void 0));return}}for(C in c)c.hasOwnProperty(C)&&(h=c[C],h!=null&&Jt(i,a,C,h,c,null))}function Fw(i,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,_=null,C=null,z=null,$=null,K=null;for(q in c){var tt=c[q];if(c.hasOwnProperty(q)&&tt!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":z=tt;default:h.hasOwnProperty(q)||Jt(i,a,q,null,h,tt)}}for(var Y in h){var q=h[Y];if(tt=c[Y],h.hasOwnProperty(Y)&&(q!=null||tt!=null))switch(Y){case"type":b=q;break;case"name":g=q;break;case"checked":$=q;break;case"defaultChecked":K=q;break;case"value":_=q;break;case"defaultValue":C=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,a));break;default:q!==tt&&Jt(i,a,Y,q,h,tt)}}Ru(i,_,C,z,$,K,b,g);return;case"select":q=_=C=Y=null;for(b in c)if(z=c[b],c.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":q=z;default:h.hasOwnProperty(b)||Jt(i,a,b,null,h,z)}for(g in h)if(b=h[g],z=c[g],h.hasOwnProperty(g)&&(b!=null||z!=null))switch(g){case"value":Y=b;break;case"defaultValue":C=b;break;case"multiple":_=b;default:b!==z&&Jt(i,a,g,b,h,z)}a=C,c=_,h=q,Y!=null?_r(i,!!c,Y,!1):!!h!=!!c&&(a!=null?_r(i,!!c,a,!0):_r(i,!!c,c?[]:"",!1));return;case"textarea":q=Y=null;for(C in c)if(g=c[C],c.hasOwnProperty(C)&&g!=null&&!h.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Jt(i,a,C,null,h,g)}for(_ in h)if(g=h[_],b=c[_],h.hasOwnProperty(_)&&(g!=null||b!=null))switch(_){case"value":Y=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==b&&Jt(i,a,_,g,h,b)}Lp(i,Y,q);return;case"option":for(var dt in c)Y=c[dt],c.hasOwnProperty(dt)&&Y!=null&&!h.hasOwnProperty(dt)&&(dt==="selected"?i.selected=!1:Jt(i,a,dt,null,h,Y));for(z in h)Y=h[z],q=c[z],h.hasOwnProperty(z)&&Y!==q&&(Y!=null||q!=null)&&(z==="selected"?i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":Jt(i,a,z,Y,h,q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in c)Y=c[At],c.hasOwnProperty(At)&&Y!=null&&!h.hasOwnProperty(At)&&Jt(i,a,At,null,h,Y);for($ in h)if(Y=h[$],q=c[$],h.hasOwnProperty($)&&Y!==q&&(Y!=null||q!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,a));break;default:Jt(i,a,$,Y,h,q)}return;default:if(Nu(a)){for(var te in c)Y=c[te],c.hasOwnProperty(te)&&Y!==void 0&&!h.hasOwnProperty(te)&&yd(i,a,te,void 0,h,Y);for(K in h)Y=h[K],q=c[K],!h.hasOwnProperty(K)||Y===q||Y===void 0&&q===void 0||yd(i,a,K,Y,h,q);return}}for(var j in c)Y=c[j],c.hasOwnProperty(j)&&Y!=null&&!h.hasOwnProperty(j)&&Jt(i,a,j,null,h,Y);for(tt in h)Y=h[tt],q=c[tt],!h.hasOwnProperty(tt)||Y===q||Y==null&&q==null||Jt(i,a,tt,Y,h,q)}function Ib(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jw(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var g=c[h],b=g.transferSize,_=g.initiatorType,C=g.duration;if(b&&C&&Ib(_)){for(_=0,C=g.responseEnd,h+=1;h<c.length;h++){var z=c[h],$=z.startTime;if($>C)break;var K=z.transferSize,tt=z.initiatorType;K&&Ib(tt)&&(z=z.responseEnd,_+=K*(z<C?1:(C-$)/(z-$)))}if(--h,a+=8*(b+_)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sd=null,Ad=null;function tc(i){return i.nodeType===9?i:i.ownerDocument}function Fb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jb(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function wd(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _d=null;function Uw(){var i=window.event;return i&&i.type==="popstate"?i===_d?!1:(_d=i,!0):(_d=null,!1)}var Ub=typeof setTimeout=="function"?setTimeout:void 0,Hw=typeof clearTimeout=="function"?clearTimeout:void 0,Hb=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Hb<"u"?function(i){return Hb.resolve(null).then(i).catch($w)}:Ub;function $w(i){setTimeout(function(){throw i})}function ys(i){return i==="head"}function Gb(i,a){var c=a,h=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(h===0){i.removeChild(g),ea(a);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")uo(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,uo(c);for(var b=c.firstChild;b;){var _=b.nextSibling,C=b.nodeName;b[Ma]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=_}}else c==="body"&&uo(i.ownerDocument.body);c=g}while(c);ea(a)}function $b(i,a){var c=i;i=0;do{var h=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=h}while(c)}function Ed(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Ed(c),Du(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Vw(i,a,c,h){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ma])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Qn(i.nextSibling),i===null)break}return null}function Xw(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Qn(i.nextSibling),i===null))return null;return i}function Vb(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Qn(i.nextSibling),i===null))return null;return i}function xd(i){return i.data==="$?"||i.data==="$~"}function Td(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Yw(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var h=function(){a(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Qn(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Cd=null;function Xb(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return Qn(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function Yb(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function Zb(i,a,c){switch(a=tc(c),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function uo(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Du(i)}var Jn=new Map,qb=new Set;function ec(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Yi=F.d;F.d={f:Zw,r:qw,D:Ww,C:Kw,L:Qw,m:Jw,X:e_,S:t_,M:n_};function Zw(){var i=Yi.f(),a=Xl();return i||a}function qw(i){var a=Sr(i);a!==null&&a.tag===5&&a.type==="form"?dg(a):Yi.r(i)}var Qr=typeof document>"u"?null:document;function Wb(i,a,c){var h=Qr;if(h&&typeof a=="string"&&a){var g=Vn(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),qb.has(g)||(qb.add(g),i={rel:i,crossOrigin:c,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),We(a,"link",i),Ue(a),h.head.appendChild(a)))}}function Ww(i){Yi.D(i),Wb("dns-prefetch",i,null)}function Kw(i,a){Yi.C(i,a),Wb("preconnect",i,a)}function Qw(i,a,c){Yi.L(i,a,c);var h=Qr;if(h&&i&&a){var g='link[rel="preload"][as="'+Vn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Vn(c.imageSizes)+'"]')):g+='[href="'+Vn(i)+'"]';var b=g;switch(a){case"style":b=Jr(i);break;case"script":b=ta(i)}Jn.has(b)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),Jn.set(b,i),h.querySelector(g)!==null||a==="style"&&h.querySelector(ho(b))||a==="script"&&h.querySelector(fo(b))||(a=h.createElement("link"),We(a,"link",i),Ue(a),h.head.appendChild(a)))}}function Jw(i,a){Yi.m(i,a);var c=Qr;if(c&&i){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Vn(h)+'"][href="'+Vn(i)+'"]',b=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ta(i)}if(!Jn.has(b)&&(i=m({rel:"modulepreload",href:i},a),Jn.set(b,i),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(fo(b)))return}h=c.createElement("link"),We(h,"link",i),Ue(h),c.head.appendChild(h)}}}function t_(i,a,c){Yi.S(i,a,c);var h=Qr;if(h&&i){var g=Ar(h).hoistableStyles,b=Jr(i);a=a||"default";var _=g.get(b);if(!_){var C={loading:0,preload:null};if(_=h.querySelector(ho(b)))C.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=Jn.get(b))&&Md(i,c);var z=_=h.createElement("link");Ue(z),We(z,"link",i),z._p=new Promise(function($,K){z.onload=$,z.onerror=K}),z.addEventListener("load",function(){C.loading|=1}),z.addEventListener("error",function(){C.loading|=2}),C.loading|=4,nc(_,a,h)}_={type:"stylesheet",instance:_,count:1,state:C},g.set(b,_)}}}function e_(i,a){Yi.X(i,a);var c=Qr;if(c&&i){var h=Ar(c).hoistableScripts,g=ta(i),b=h.get(g);b||(b=c.querySelector(fo(g)),b||(i=m({src:i,async:!0},a),(a=Jn.get(g))&&Dd(i,a),b=c.createElement("script"),Ue(b),We(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function n_(i,a){Yi.M(i,a);var c=Qr;if(c&&i){var h=Ar(c).hoistableScripts,g=ta(i),b=h.get(g);b||(b=c.querySelector(fo(g)),b||(i=m({src:i,async:!0,type:"module"},a),(a=Jn.get(g))&&Dd(i,a),b=c.createElement("script"),Ue(b),We(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function Kb(i,a,c,h){var g=(g=gt.current)?ec(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Jr(c.href),c=Ar(g).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Jr(c.href);var b=Ar(g).hoistableStyles,_=b.get(i);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,_),(b=g.querySelector(ho(i)))&&!b._p&&(_.instance=b,_.state.loading=5),Jn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Jn.set(i,c),b||i_(g,i,c,_.state))),a&&h===null)throw Error(n(528,""));return _}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ta(c),c=Ar(g).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Jr(i){return'href="'+Vn(i)+'"'}function ho(i){return'link[rel="stylesheet"]['+i+"]"}function Qb(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function i_(i,a,c,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),We(a,"link",c),Ue(a),i.head.appendChild(a))}function ta(i){return'[src="'+Vn(i)+'"]'}function fo(i){return"script[async]"+i}function Jb(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Vn(c.href)+'"]');if(h)return a.instance=h,Ue(h),h;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Ue(h),We(h,"style",g),nc(h,c.precedence,i),a.instance=h;case"stylesheet":g=Jr(c.href);var b=i.querySelector(ho(g));if(b)return a.state.loading|=4,a.instance=b,Ue(b),b;h=Qb(c),(g=Jn.get(g))&&Md(h,g),b=(i.ownerDocument||i).createElement("link"),Ue(b);var _=b;return _._p=new Promise(function(C,z){_.onload=C,_.onerror=z}),We(b,"link",h),a.state.loading|=4,nc(b,c.precedence,i),a.instance=b;case"script":return b=ta(c.src),(g=i.querySelector(fo(b)))?(a.instance=g,Ue(g),g):(h=c,(g=Jn.get(b))&&(h=m({},c),Dd(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),Ue(g),We(g,"link",h),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,nc(h,c.precedence,i));return a.instance}function nc(i,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,b=g,_=0;_<h.length;_++){var C=h[_];if(C.dataset.precedence===a)b=C;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Md(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Dd(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var ic=null;function tv(i,a,c){if(ic===null){var h=new Map,g=ic=new Map;g.set(c,h)}else g=ic,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(i))return h;for(h.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var b=c[g];if(!(b[Ma]||b[Xe]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(a)||"";_=i+_;var C=h.get(_);C?C.push(b):h.set(_,[b])}}return h}function ev(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function s_(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(i=a.disabled,typeof a.precedence=="string"&&i==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function nv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function r_(i,a,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Jr(h.href),b=a.querySelector(ho(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=sc.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=b,Ue(b);return}b=a.ownerDocument||a,h=Qb(h),(g=Jn.get(g))&&Md(h,g),b=b.createElement("link"),Ue(b);var _=b;_._p=new Promise(function(C,z){_.onload=C,_.onerror=z}),We(b,"link",h),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=sc.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var Od=0;function a_(i,a){return i.stylesheets&&i.count===0&&ac(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var h=setTimeout(function(){if(i.stylesheets&&ac(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&Od===0&&(Od=62500*jw());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ac(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Od?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ac(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rc=null;function ac(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rc=new Map,a.forEach(o_,i),rc=null,sc.call(i))}function o_(i,a){if(!(a.state.loading&4)){var c=rc.get(i);if(c)var h=c.get(null);else{c=new Map,rc.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var _=g[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),h=_)}h&&c.set(null,h)}g=a.instance,_=g.getAttribute("data-precedence"),b=c.get(_)||h,b===h&&c.set(null,g),c.set(_,g),this.count++,h=sc.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var po={$$typeof:x,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function l_(i,a,c,h,g,b,_,C,z){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xu(0),this.hiddenUpdates=xu(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function iv(i,a,c,h,g,b,_,C,z,$,K,tt){return i=new l_(i,a,c,_,z,$,K,tt,C),a=1,b===!0&&(a|=24),b=On(3,null,null,a),i.current=b,b.stateNode=i,a=ch(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:h,isDehydrated:c,cache:a},fh(b),i}function sv(i){return i?(i=Rr,i):Rr}function rv(i,a,c,h,g,b){g=sv(g),h.context===null?h.context=g:h.pendingContext=g,h=ls(a),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),c=cs(i,h,a),c!==null&&(An(c,i,a),Va(c,i,a))}function av(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Rd(i,a){av(i,a),(i=i.alternate)&&av(i,a)}function ov(i){if(i.tag===13||i.tag===31){var a=Hs(i,67108864);a!==null&&An(a,i,67108864),Rd(i,67108864)}}function lv(i){if(i.tag===13||i.tag===31){var a=zn();a=Tu(a);var c=Hs(i,a);c!==null&&An(c,i,a),Rd(i,a)}}var oc=!0;function c_(i,a,c,h){var g=L.T;L.T=null;var b=F.p;try{F.p=2,kd(i,a,c,h)}finally{F.p=b,L.T=g}}function u_(i,a,c,h){var g=L.T;L.T=null;var b=F.p;try{F.p=8,kd(i,a,c,h)}finally{F.p=b,L.T=g}}function kd(i,a,c,h){if(oc){var g=Nd(h);if(g===null)vd(i,a,h,lc,c),uv(i,h);else if(d_(g,i,a,c,h))h.stopPropagation();else if(uv(i,h),a&4&&-1<h_.indexOf(i)){for(;g!==null;){var b=Sr(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=gi(b.pendingLanes);if(_!==0){var C=b;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var z=1<<31-Ve(_);C.entanglements[1]|=z,_&=~z}Si(b),(Gt&6)===0&&($l=he()+500,oo(0))}}break;case 31:case 13:C=Hs(b,2),C!==null&&An(C,b,2),Xl(),Rd(b,2)}if(b=Nd(h),b===null&&vd(i,a,h,lc,c),b===g)break;g=b}g!==null&&h.stopPropagation()}else vd(i,a,h,null,c)}}function Nd(i){return i=zu(i),Ld(i)}var lc=null;function Ld(i){if(lc=null,i=yr(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=u(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return lc=i,null}function cv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oi()){case li:return 2;case Gn:return 8;case Mn:case mi:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var zd=!1,Ss=null,As=null,ws=null,mo=new Map,go=new Map,_s=[],h_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uv(i,a){switch(i){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":mo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(a.pointerId)}}function bo(i,a,c,h,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:b,targetContainers:[g]},a!==null&&(a=Sr(a),a!==null&&ov(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function d_(i,a,c,h,g){switch(a){case"focusin":return Ss=bo(Ss,i,a,c,h,g),!0;case"dragenter":return As=bo(As,i,a,c,h,g),!0;case"mouseover":return ws=bo(ws,i,a,c,h,g),!0;case"pointerover":var b=g.pointerId;return mo.set(b,bo(mo.get(b)||null,i,a,c,h,g)),!0;case"gotpointercapture":return b=g.pointerId,go.set(b,bo(go.get(b)||null,i,a,c,h,g)),!0}return!1}function hv(i){var a=yr(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,xp(i.priority,function(){lv(c)});return}}else if(a===31){if(a=u(c),a!==null){i.blockedOn=a,xp(i.priority,function(){lv(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cc(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Nd(i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);Lu=h,c.target.dispatchEvent(h),Lu=null}else return a=Sr(c),a!==null&&ov(a),i.blockedOn=c,!1;a.shift()}return!0}function dv(i,a,c){cc(i)&&c.delete(a)}function f_(){zd=!1,Ss!==null&&cc(Ss)&&(Ss=null),As!==null&&cc(As)&&(As=null),ws!==null&&cc(ws)&&(ws=null),mo.forEach(dv),go.forEach(dv)}function uc(i,a){i.blockedOn===a&&(i.blockedOn=null,zd||(zd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,f_)))}var hc=null;function fv(i){hc!==i&&(hc=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){hc===i&&(hc=null);for(var a=0;a<i.length;a+=3){var c=i[a],h=i[a+1],g=i[a+2];if(typeof h!="function"){if(Ld(h||c)===null)continue;break}var b=Sr(c);b!==null&&(i.splice(a,3),a-=3,Nh(b,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function ea(i){function a(z){return uc(z,i)}Ss!==null&&uc(Ss,i),As!==null&&uc(As,i),ws!==null&&uc(ws,i),mo.forEach(a),go.forEach(a);for(var c=0;c<_s.length;c++){var h=_s[c];h.blockedOn===i&&(h.blockedOn=null)}for(;0<_s.length&&(c=_s[0],c.blockedOn===null);)hv(c),c.blockedOn===null&&_s.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],b=c[h+1],_=g[mn]||null;if(typeof b=="function")_||fv(c);else if(_){var C=null;if(b&&b.hasAttribute("formAction")){if(g=b,_=b[mn]||null)C=_.formAction;else if(Ld(g)!==null)continue}else C=_.action;typeof C=="function"?c[h+1]=C:(c.splice(h,3),h-=3),fv(c)}}}function pv(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Pd(i){this._internalRoot=i}dc.prototype.render=Pd.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var c=a.current,h=zn();rv(c,h,i,a,null,null)},dc.prototype.unmount=Pd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;rv(i.current,2,null,i,null,null),Xl(),a[vr]=null}};function dc(i){this._internalRoot=i}dc.prototype.unstable_scheduleHydration=function(i){if(i){var a=Ep();i={blockedOn:null,target:i,priority:a};for(var c=0;c<_s.length&&a!==0&&a<_s[c].priority;c++);_s.splice(c,0,i),c===0&&hv(i)}};var mv=t.version;if(mv!=="19.2.4")throw Error(n(527,mv,"19.2.4"));F.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var p_={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{pn=fc.inject(p_),nn=fc}catch{}}return yo.createRoot=function(i,a){if(!r(i))throw Error(n(299));var c=!1,h="",g=wg,b=_g,_=Eg;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=iv(i,1,!1,null,null,c,h,null,g,b,_,pv),i[vr]=a.current,bd(i),new Pd(a)},yo.hydrateRoot=function(i,a,c){if(!r(i))throw Error(n(299));var h=!1,g="",b=wg,_=_g,C=Eg,z=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.formState!==void 0&&(z=c.formState)),a=iv(i,1,!0,a,c??null,h,g,z,b,_,C,pv),a.context=sv(null),c=a.current,h=zn(),h=Tu(h),g=ls(h),g.callback=null,cs(c,g,h),c=h,a.current.lanes=c,Ca(a,c),Si(a),i[vr]=a.current,bd(i),new dc(a)},yo.version="19.2.4",yo}var Cv;function E_(){if(Cv)return jd.exports;Cv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),jd.exports=__(),jd.exports}var x_=E_();const cn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ff=[.001,0,0,.001,0,0],$d=1.35,Bn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Po="pdfjs_internal_editor_",Ct={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ft={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},T_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pf={TRIANGLES:1,LATTICE:2},Be={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Nc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Oe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},la={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},tu={ERRORS:0,WARNINGS:1,INFOS:5},Bo={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},So={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},C_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let eu=tu.WARNINGS;function M_(s){Number.isInteger(s)&&(eu=s)}function D_(){return eu}function nu(s){eu>=tu.INFOS&&console.info(`Info: ${s}`)}function Et(s){eu>=tu.WARNINGS&&console.warn(`Warning: ${s}`)}function Zt(s){throw new Error(s)}function Yt(s,t){s||Zt(t)}function O_(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function h0(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=P_(s)}catch{}const n=t?URL.parse(s,t):URL.parse(s);return O_(n)?n:null}function d0(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&h0(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function xt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const dr=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class Mv extends dr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Vd extends dr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class mf extends dr{constructor(t){super(t,"InvalidPDFException")}}class Fc extends dr{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class R_ extends dr{constructor(t){super(t,"FormatError")}}class Ds extends dr{constructor(t){super(t,"AbortException")}}function k_(s){(typeof s!="object"||s?.length===void 0)&&Zt("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),l=s.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function iu(s){typeof s!="string"&&Zt("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function N_(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function L_(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function z_(){try{return new Function(""),!0}catch{return!1}}class Ie{static get isLittleEndian(){return xt(this,"isLittleEndian",L_())}static get isEvalSupported(){return xt(this,"isEvalSupported",z_())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return xt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return xt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return xt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return xt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return xt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Xd=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class ct{static makeHexColor(t,e,n){return`#${Xd[t]}${Xd[e]}${Xd[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],o=t[n+1];t[n]=r*e[0]+o*e[2]+e[4],t[n+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],v=t[n+p+1];t[n+p]=m*r+v*l+d,t[n+p+1]=m*o+v*u+f}}static applyInverseTransform(t,e){const n=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const r=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5],p=t[0],m=t[1],v=t[2],y=t[3];let A=r*p+d,S=A,E=r*v+d,w=E,T=u*m+f,x=T,M=u*y+f,O=M;if(o!==0||l!==0){const k=o*p,R=o*v,B=l*m,U=l*y;A+=B,w+=B,E+=U,S+=U,T+=k,O+=k,M+=R,x+=R}n[0]=Math.min(n[0],A,E,S,w),n[1]=Math.min(n[1],T,M,x,O),n[2]=Math.max(n[2],A,E,S,w),n[3]=Math.max(n[3],T,M,x,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],o=t[2],l=t[3],u=n**2+r**2,d=n*o+r*l,f=o**2+l**2,p=(u+f)/2,m=Math.sqrt(p**2-(u*f-d**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,r,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,r)}static#t(t,e,n,r,o,l,u,d,f,p){if(f<=0||f>=1)return;const m=1-f,v=f*f,y=v*f,A=m*(m*(m*t+3*f*e)+3*v*n)+y*r,S=m*(m*(m*o+3*f*l)+3*v*u)+y*d;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],S)}static#e(t,e,n,r,o,l,u,d,f,p,m,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,r,o,l,u,d,-m/p,v);return}const y=p**2-4*m*f;if(y<0)return;const A=Math.sqrt(y),S=2*f;this.#t(t,e,n,r,o,l,u,d,(-p+A)/S,v),this.#t(t,e,n,r,o,l,u,d,(-p-A)/S,v)}static bezierBoundingBox(t,e,n,r,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),this.#e(t,n,o,u,e,r,l,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),this.#e(t,n,o,u,e,r,l,d,3*(-e+3*(r-l)+d),6*(e-2*r+l),3*(r-e),f)}}function P_(s){return decodeURIComponent(escape(s))}let Yd=null,Dv=null;function B_(s){return Yd||(Yd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Dv=new Map([["","t"]])),s.replaceAll(Yd,(t,e,n)=>e?e.normalize("NFKC"):Dv.get(n))}function f0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),k_(s)}const ha="pdfjs_internal_id_";function I_(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...o]=e;if(!s(n)&&!Number.isInteger(n)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Qe(s,t,e){return Math.min(Math.max(s,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class Io{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Io.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)r(d)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class p0{static setupStorage(t,e,n,r,o){const l=r.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);l.append(m),u&&Io.shouldBuildText(r.name)&&f.push(m)}return{textDivs:f}}const p=[[r,-1,l]];for(;p.length>0;){const[m,v,y]=p.at(-1);if(v+1===m.children.length){p.pop();continue}const A=m.children[++p.at(-1)[1]];if(A===null)continue;const{name:S}=A;if(S==="#text"){const w=document.createTextNode(A.value);f.push(w),y.append(w);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,S):document.createElement(S);if(y.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:e,intent:o,linkService:n}),A.children?.length>0)p.push([A,-1,E]);else if(A.value){const w=document.createTextNode(A.value);u&&Io.shouldBuildText(S)&&f.push(w),E.append(w)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const qi="http://www.w3.org/2000/svg";class wa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Xo(s,t="text"){if(Do(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Yo{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,m,v,y;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,m=0,v=0,y=1;break;case 90:p=0,m=1,v=1,y=0;break;case 270:p=0,m=-1,v=-1,y=0;break;case 0:p=1,m=0,v=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,y=-y);let A,S,E,w;p===0?(A=Math.abs(f-t[1])*n+o,S=Math.abs(d-t[0])*n+l,E=(t[3]-t[1])*n,w=(t[2]-t[0])*n):(A=Math.abs(d-t[0])*n+o,S=Math.abs(f-t[1])*n+l,E=(t[2]-t[0])*n,w=(t[3]-t[1])*n),this.transform=[p*n,m*n,v*n,y*n,A-p*n*d-v*n*f,S-m*n*d-y*n*f],this.width=E,this.height=w}get rawDims(){const t=this.viewBox;return xt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Yo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return ct.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ct.applyTransform(e,this.transform);const n=[t[2],t[3]];return ct.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ct.applyInverseTransform(n,this.transform),n}}class Bf extends dr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function su(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function If(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function F_(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function j_(s,t="document.pdf"){if(typeof s!="string")return t;if(su(s))return Et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return r(l);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return r(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return t}class Ov{started=Object.create(null);times=[];time(t){t in this.started&&Et(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Et(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-r}ms
`);return t.join("")}}function Do(s,t){const e=t?URL.parse(s,t):URL.parse(s);return e?.protocol==="http:"||e?.protocol==="https:"}function si(s){s.preventDefault()}function ve(s){s.preventDefault(),s.stopPropagation()}function U_(s){console.log("Deprecated API usage: "+s)}class gf{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(l+=p,u+=m):f==="+"&&(l-=p,u-=m),new Date(Date.UTC(n,r,o,l,u,d))}}function H_(s,{scale:t=1,rotation:e=0}){const{width:n,height:r}=s.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Yo({viewBox:o,userUnit:1,scale:t,rotation:e})}function Zo(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Et(`Not a valid color format: "${s}"`),[0,0,0])}function G_(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,Zo(n))}t.remove()}function de(s){const{a:t,b:e,c:n,d:r,e:o,f:l}=s.getTransform();return[t,e,n,r,o,l]}function _i(s){const{a:t,b:e,c:n,d:r,e:o,f:l}=s.getTransform().invertSelf();return[t,e,n,r,o,l]}function ar(s,t,e=!1,n=!0){if(t instanceof Yo){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=s,u=Ie.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Mi{constructor(){const{pixelRatio:t}=Mi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,o=-1){let l=1/0,u=1/0,d=1/0;n=Mi.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(u=r/t,d=r/e);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const bf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class $_{static get isDarkMode(){return xt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class V_{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),xt(this,"commentForegroundColor",Zo(n))}}function X_(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[s,t,e]}function Rv(s,t){const e=s[0]/255,n=s[1]/255,r=s[2]/255,o=Math.max(e,n,r),l=Math.min(e,n,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((n-r)/d+(n<r?6:0))*60;break;case n:t[0]=((r-e)/d+2)*60;break;case r:t[0]=((e-n)/d+4)*60;break}}t[2]=u}function vf(s,t){const e=s[0],n=s[1],r=s[2],o=(1-Math.abs(2*r-1))*n,l=o*(1-Math.abs(e/60%2-1)),u=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function kv(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function Nv(s,t,e){vf(s,e),e.map(kv);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];vf(t,e),e.map(kv);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const Lv=new Map;function Y_(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=Lv.get(e);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);Rv(s,l);const u=r.subarray(6,9);Rv(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Nv(l,u,o)<f){let p,m;d?(p=l[2],m=1):(p=0,m=l[2]);const v=.005;for(;m-p>v;){const y=l[2]=(p+m)/2;d===Nv(l,u,o)<f?p=y:m=y}l[2]=d?m:p}return vf(l,o),n=ct.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Lv.set(e,n),n}function m0({html:s,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}r.append(o)}else p0.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",e),n.append(r)}function g0(s){const t=new Path2D;if(!s)return t;for(let e=0,n=s.length;e<n;)switch(s[e++]){case So.moveTo:t.moveTo(s[e++],s[e++]);break;case So.lineTo:t.lineTo(s[e++],s[e++]);break;case So.curveTo:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case So.quadraticCurveTo:t.quadraticCurveTo(s[e++],s[e++],s[e++],s[e++]);break;case So.closePath:t.closePath();break;default:Et(`Unrecognized drawing path operator: ${s[e-1]}`);break}return t}class Vt{static#t=null;static#e=null;static#i=null;static#n=0;static#r=[];get pagesNumber(){return Vt.#n}set pagesNumber(t){Vt.#n!==t&&(Vt.#n=t,t===0&&(Vt.#e=null,Vt.#t=null))}addListener(t){Vt.#r.push(t)}removeListener(t){const e=Vt.#r.indexOf(t);e>=0&&Vt.#r.splice(e,1)}#a(){for(const t of Vt.#r)t()}#s(t){if(Vt.#e)return;const e=Vt.#n,n=new Uint32Array(3*e),r=Vt.#e=n.subarray(0,e),o=Vt.#t=n.subarray(e,2*e);if(t)for(let l=0;l<e;l++)r[l]=o[l]=l+1;Vt.#i=n.subarray(2*e)}movePages(t,e,n){this.#s(!0);const r=Vt.#e,o=Vt.#t;Vt.#i.set(o);const l=e.length,u=new Uint32Array(l);let d=0;for(let y=0;y<l;y++){const A=e[y]-1;u[y]=r[A],A<n&&(d+=1)}const f=Vt.#n;let p=n-d;const m=f-l;p=Qe(p,0,m);for(let y=0,A=0;y<f;y++)t.has(y+1)||(r[A++]=r[y]);r.copyWithin(p+l,p,m),r.set(u,p);let v=!1;for(let y=0,A=f;y<A;y++){const S=r[y];v||=S!==y+1,o[S-1]=y+1}this.#a(),v||(this.pagesNumber=0)}hasBeenAltered(){return Vt.#e!==null}getPageMappingForSaving(){return{pageIndices:Vt.#t?Vt.#t.map(t=>t-1):null}}getPrevPageNumber(t){return Vt.#i[Vt.#e[t-1]-1]}getPageNumber(t){return Vt.#t?.[t-1]??t}getPageId(t){return Vt.#e?.[t-1]??t}static get instance(){return xt(this,"instance",new Vt)}getMapping(){return Vt.#e.subarray(0,this.pagesNumber)}}class Lo{#t=null;#e=null;#i;#n=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#i=t,Lo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",si,{signal:e}),t.addEventListener("pointerdown",Lo.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const r=this.#i.toolbarPosition;if(r){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ve(t)}#h(t){this.#i._focusEventsAllowed=!0,ve(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",si,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Lo.#c[t]),this.#f(n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#a)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const r=this.#s=this.#g;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(r,e)):this.#n.append(n,r),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const r=this.#n.querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Z_{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",si,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let n=0,r=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const u=o.x+(e?o.width:0);if(l>n){r=u,n=l;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,n]}show(t,e,n){const[r,o]=this.#r(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,n,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",si,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function b0(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}class Xt{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(Xt.#e||=new Set).add(t)}static setPointer(t,e){Xt.#t||=e,Xt.#n??=t}static setTimeStamp(t){Xt.#i=t}static isSamePointerId(t){return Xt.#t===t}static isSamePointerIdOrRemove(t){return Xt.#t===t?!0:(Xt.#e?.delete(t),!1)}static isSamePointerType(t){return Xt.#n===t}static isInitializedAndDifferentPointerType(t){return Xt.#n!==null&&!Xt.isSamePointerType(t)}static isSameTimeStamp(t){return Xt.#i===t}static isUsingMultiplePointers(){return Xt.#e?.size>=1}static clearPointerType(){Xt.#n=null}static clearPointerIds(){Xt.#t=NaN,Xt.#e=null}static clearTimeStamp(){Xt.#i=NaN}}class q_{#t=0;get id(){return`${Po}${this.#t++}`}}class Ff{#t=f0();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return xt(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(n.url=e,r=await Xo(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=Ff._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const m=n.svgUrl=l.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=l.onerror=p});l.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Et(r),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:r,type:o}=t;return this.#n(`${e}_${n}_${r}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class W_{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:e,post:n,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class qo{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ie.platform;for(const[n,r,o={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(r.bind(t,...l,e)(),o||ve(e))}}class jf{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return G_(t),xt(this,"_colors",t)}convert(t){const e=Zo(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((o,l)=>o===e[l]))return jf._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ct.makeHexColor(...e):t}}class Os{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new W_;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#y=!1;#v=!1;#x=null;#_=null;#A=null;#C=null;#S=!1;#E=null;#O=new q_;#M=!1;#D=!1;#B=!1;#k=null;#L=null;#I=null;#z=null;#$=null;#T=Ct.NONE;#w=new Set;#N=null;#F=null;#U=null;#Y=null;#X=null;#Z={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#V=null;#Q=null;#J=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Os.prototype,e=l=>l.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return xt(this,"_keyboardManager",new qo([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#V.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,n,r,o,l,u,d,f,p,m,v,y,A,S,E){const w=this._signal=this.#t.signal;this.#V=t,this.#Q=e,this.#J=n,this.#a=r,this.#l=o,this.#F=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:w}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:w}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:w}),this.#at(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#x=d.filterFactory,this.#U=f,this.#C=p||null,this.#b=m,this.#y=v,this.#v=y,this.#$=A||null,this.viewParameters={realScale:wa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#z?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#E?.hide(),this.#E=null,this.#I?.destroy(),this.#I=null,this.#i=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return xt(this,"hcmFilter",this.#U?this.#x.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return xt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return xt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return xt(this,"highlightColors",null);const e=new Map,n=!!this.#U;for(const[r,o]of t){const l=r.endsWith("_HCM");if(n&&l){e.set(r.replace("_HCM",""),o);continue}!n&&!l&&e.set(r,o)}return xt(this,"highlightColors",e)}get highlightColorNames(){return xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#I=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,r){this.#l?.showDialog(this,t,e,n,r)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},r=()=>{this._editorUndoBar?.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){this.#F?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#F}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#v=e)}onPagesEdited({pagesMapper:t}){for(const r of this.#n.values())r.updatePageIndex(t.getPrevPageNumber(r.pageIndex+1)-1);const e=this.#r,n=this.#r=new Map;for(const[r,o]of e){const l=t.getPrevPageNumber(r+1)-1;if(l===-1){o.destroy();continue}n.set(l,o),o.updatePageIndex(l)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const n of this.#r.values()){const{x:r,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(t>=r&&t<=r+l&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*wa.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#K({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#r.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=n,d=n.toString(),p=this.#K(n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const v=this.#tt(p),y=this.#T===Ct.NONE,A=()=>{const S=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:d});y&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(y){this.switchToMode(Ct.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#K(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#E||=new Z_(this),this.#E.show(n,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${Po}${t}`,n=this.#s.getRawValue(e);return n&&this.#s.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#rt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#E?.hide(),this.#N=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#N)return;const r=this.#K(t).closest(".textLayer");if(!r){this.#N&&(this.#E?.hide(),this.#N=null,this.#R({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#N=e,this.#R({hasSelectedText:!0}),!(this.#T!==Ct.HIGHLIGHT&&this.#T!==Ct.NONE)&&(this.#T===Ct.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===Ct.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#D){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#q("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#q("main_toolbar")}}#q(t=""){this.#T===Ct.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#st()}#at(){document.addEventListener("selectionchange",this.#rt.bind(this),{signal:this._signal})}#ot(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#q("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#k?.abort(),this.#k=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#w){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Et(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const f=await r.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#nt(d);this.#it(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){Et(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Ct.NONE&&!this.isEditorHandlingKeyboard&&Os._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#q("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(t){Object.entries(t).some(([n,r])=>this.#Z[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Z,t)}),this.#T===Ct.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ft.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#R({isEditing:this.#T!==Ct.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#O.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,o=!1,l=!1){if(this.#T!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===Ct.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===Ct.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#n.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const u of this.#n.values())u.addStandaloneCommentButton();t===Ct.SIGNATURE&&await this.#F?.loadSignatures(),n&&Xt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#r.values())u.updateMode(t);if(t===Ct.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#n.values()){const{annotationElementId:p,hasComment:m,deleted:v}=f;p&&u.add(p),m&&!v&&d.push(f.getData())}for(const f of this.#i){const{id:p,popupRef:m,contentsObj:v}=f;m&&v?.str&&!u.has(p)&&!this.#g.has(p)&&d.push(f)}this.#l?.showSidebar(d)}if(!e){r&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const u of this.#n.values())u.uid===e?(this.setSelected(u),l?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Ft.CREATE:this.currentLayer.addNewEditor(e);return;case Ft.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#Y?.get(Ft.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Ft.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#B!==t){this.#B=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#z?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#mt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],n=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},r=()=>{for(const o of e)this.#nt(o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==Ct.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[r,o]=this.#H,l=[...this.#w],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#w)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,e||=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const n=(r,o,l,u)=>{if(this.#n.has(r.id)){const d=this.#r.get(u);d?r._setParentAndPosition(d,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)n(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)n(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const n of this.#m.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==Ct.NONE}get imageManager(){return xt(this,"imageManager",new Ff)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,m,v)=>({x:(p-r)/l,y:1-(f+m-n)/o,width:v/l,height:m/o});break;case"180":u=(f,p,m,v)=>({x:1-(f+m-n)/o,y:1-(p+v-r)/l,width:m/o,height:v/l});break;case"270":u=(f,p,m,v)=>({x:1-(p+v-r)/l,y:(f-n)/o,width:v/l,height:m/o});break;default:u=(f,p,m,v)=>({x:(f-n)/o,y:(p-r)/l,width:m/o,height:v/l});break}const d=[];for(let f=0,p=e.rangeCount;f<p;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:v,y,width:A,height:S}of m.getClientRects())A===0||S===0||d.push(u(v,y,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#T===Ct.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const r=this.#z?.get(t);r&&(r.setCanvas(e,n),this.#z.delete(t))}addMissingCanvas(t,e){(this.#z||=new Map).set(t,e)}}class Ti{#t=null;#e=!1;#i=null;#n=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Ti.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ti._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ti.#f.missing),e.setAttribute("data-l10n-id",Ti.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",si,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:n}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Ti._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(this.#l=n,this.#d=r),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#i&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ti.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Ti.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class pc{#t=null;#e=null;#i=!1;#n=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(n.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-r)/l,(e+n-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",si,{signal:n}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,ve(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,ve(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,r(o))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=this.#n.commentButtonPosition;const{width:p,height:m,x:v,y}=this.#n;n=v+n*p,r=y+r*m}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+n*d,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:e,date:n}){this.#s=t,this.#a=e,this.#o=n,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class ru{#t;#e=!1;#i=null;#n;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=n,this.#n=e,this.#r=r,this.#a=o,this.#s=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Mi.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ve(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const u=this.#m.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",ve,l),o.addEventListener("pointermove",ve,l),o.addEventListener("pointercancel",ve,l),o.addEventListener("pointerup",ve,l),this.#r?.()}if(ve(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;ve(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:o}=e,{screenX:l,screenY:u}=n,d=this.#l,{touch0X:f,touch0Y:p,touch1X:m,touch1Y:v}=d,y=m-f,A=v-p,S=l-r,E=u-o,w=Math.hypot(S,E)||1,T=Math.hypot(y,A)||1;if(!this.#e&&Math.abs(T-w)<=ru.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const x=[(r+l)/2,(o+u)/2];this.#a?.(x,T,w)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ve(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class vt{#t=null;#e=null;#i=null;#n=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#b=!1;#y=!1;#v=null;#x=0;#_=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#E=vt._zIndex++;static _borderLineWidth=-1;static _colorManager=new jf;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=vt.prototype._resizeWithKeyboard,e=Os.TRANSLATE_SMALL,n=Os.TRANSLATE_BIG;return xt(this,"_resizerKeyboardManager",new qo([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],vt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new K_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(vt._l10n??=t,vt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),vt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);vt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(e+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}#O([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#O(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#O(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=vt,r=n/t,o=n/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=n,d*=r,o*=n,l*=r,this._mustFixPosition)switch(t){case 0:o=Qe(o,0,n-u),l=Qe(l,0,r-d);break;case 90:o=Qe(o,0,n-d),l=Qe(l,u,r);break;case 180:o=Qe(o,u,n),l=Qe(l,d,r);break;case 270:o=Qe(o,d,n),l=Qe(l,0,r-u);break}this.x=o/=n,this.y=l/=r;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#M(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return vt.#M(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return vt.#M(t,e,360-this.parentRotation)}#D(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#k.bind(this,n),{signal:e}),r.addEventListener("contextmenu",si,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:n}=Ie.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ve,{passive:!1,signal:l}),window.addEventListener("contextmenu",si,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#I()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#L(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===e&&u===n&&d===r||this.addCommands({cmd:this.#L.bind(this,o,l,u,d),undo:this.#L.bind(this,t,e,n,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#z(t,e){const[n,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=vt.MIN_SIZE/n,p=vt.MIN_SIZE/r,m=this.#D(this.rotation),v=(L,F)=>[m[0]*L+m[2]*F,m[1]*L+m[3]*F],y=this.#D(360-this.rotation),A=(L,F)=>[y[0]*L+y[2]*F,y[1]*L+y[3]*F];let S,E,w=!1,T=!1;switch(t){case"topLeft":w=!0,S=(L,F)=>[0,0],E=(L,F)=>[L,F];break;case"topMiddle":S=(L,F)=>[L/2,0],E=(L,F)=>[L/2,F];break;case"topRight":w=!0,S=(L,F)=>[L,0],E=(L,F)=>[0,F];break;case"middleRight":T=!0,S=(L,F)=>[L,F/2],E=(L,F)=>[0,F/2];break;case"bottomRight":w=!0,S=(L,F)=>[L,F],E=(L,F)=>[0,0];break;case"bottomMiddle":S=(L,F)=>[L/2,F],E=(L,F)=>[L/2,0];break;case"bottomLeft":w=!0,S=(L,F)=>[0,F],E=(L,F)=>[L,0];break;case"middleLeft":T=!0,S=(L,F)=>[0,F/2],E=(L,F)=>[L,F/2];break}const x=S(u,d),M=E(u,d);let O=v(...M);const k=vt._round(o+O[0]),R=vt._round(l+O[1]);let B=1,U=1,Z,H;if(e.fromKeyboard)({deltaX:Z,deltaY:H}=e);else{const{screenX:L,screenY:F}=e,[V,lt]=this.#l;[Z,H]=this.screenToPageTranslation(L-V,F-lt),this.#l[0]=L,this.#l[1]=F}if([Z,H]=A(Z/n,H/r),w){const L=Math.hypot(u,d);B=U=Math.max(Math.min(Math.hypot(M[0]-x[0]-Z,M[1]-x[1]-H)/L,1/u,1/d),f/u,p/d)}else T?B=Qe(Math.abs(M[0]-x[0]-Z),f,1)/u:U=Qe(Math.abs(M[1]-x[1]-H),p,1)/d;const it=vt._round(u*B),Q=vt._round(d*U);O=v(...E(it,Q));const nt=k-O[0],rt=R-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=it,this.height=Q,this.x=nt,this.y=rt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Lo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Ti.initialize(vt._l10n),this.#i=new Ti(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new pc(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:t,text:e,date:n,deleted:r}}=this.#n;return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new pc(this),typeof t=="object"&&t!==null?this.#n.restoreData(t):this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new pc(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new pc(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),b0(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new ru({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#$(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=this.#D(this.rotation),u=(k,R)=>[l[0]*k+l[2]*R,l[1]*k+l[3]*R],[d,f]=this.parentDimensions,p=this.x,m=this.y,v=this.width,y=this.height,A=vt.MIN_SIZE/d,S=vt.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/y),A/v,S/y);const E=vt._round(v*o),w=vt._round(y*o);if(E===v&&w===y)return;this.#u||=[p,m,v,y];const T=u(v/2,y/2),x=vt._round(p+T[0]),M=vt._round(m+T[1]),O=u(E/2,w/2);this.x=x-O[0],this.y=M-O[1],this.width=E,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(t){const{isMac:e}=Ie.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#F(t);return}this.#N(t)}#N(t){const{isMac:e}=Ie.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#N(f),n&&this._onStopDragging()};e&&(this.#x=t.clientX,this.#_=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:v}=f;if(v!==this.#s){ve(f);return}const[y,A]=this.screenToPageTranslation(p-this.#x,m-this.#_);this.#x=p,this.#_=m,this._uiManager.dragSelectedEditors(y,A)},l),window.addEventListener("touchmove",ve,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),ve(f)},l));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ve(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,p=e/r,m=this.x*o,v=this.y*l,y=this.width*o,A=this.height*l;switch(n){case 0:return[m+f+u,l-v-p-A+d,m+f+y+u,l-v-p+d];case 90:return[m+p+u,l-v+f+d,m+p+A+u,l-v+f+y+d];case 180:return[m-f-y+u,l-v+p+d,m-f+u,l-v+p+A+d];case 270:return[m-p-A+u,l-v-f-y+d,m-p+u,l-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,o,l]=t,u=o-n,d=l-r;switch(this.rotation){case 0:return[n,e-l,u,d];case 90:return[n,e-r,d,u];case 180:return[o,e-r,u,d];case 270:return[o,e-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&vt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&r>0&&t<o&&n>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,d,f,p]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=d/l,r.width=f/o,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,o,l]=this.getPDFRect();return[vt._round(n+(o-n)*t),vt._round(r+(l-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#Z.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",vt._l10nResizer[p])}}const n=this.#e[0];let r=0;for(const l of e){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const u of e){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",vt._l10nResizer[f])}}this.#H(0),this.#y=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){vt._resizerKeyboardManager.exec(this,t)}#X(t){this.#y&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#Z(t){this.#g=this.#y?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#y&&this.#z(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#y=!1,this.#H(-1),this.#I()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:n}=t;let r=this.#A.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(n),this.#A.size===0&&(this.#A=null)},vt._telemetryTimeout),this.#A.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class K_ extends vt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const zv=3285377520,ti=4294901760,Ei=65535;class v0{constructor(t){this.h1=t?t&4294967295:zv,this.h2=t?t&4294967295:zv}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,E=t.length;S<E;S++){const w=t.charCodeAt(S);w<=255?e[n++]=w:(e[n++]=w>>>8,e[n++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(e.buffer,0,r);let u=0,d=0,f=this.h1,p=this.h2;const m=3432918353,v=461845907,y=m&Ei,A=v&Ei;for(let S=0;S<r;S++)S&1?(u=l[S],u=u*m&ti|u*y&Ei,u=u<<15|u>>>17,u=u*v&ti|u*A&Ei,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*m&ti|d*y&Ei,d=d<<15|d>>>17,d=d*v&ti|d*A&Ei,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*m&ti|u*y&Ei,u=u<<15|u>>>17,u=u*v&ti|u*A&Ei,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ti|t*36045&Ei,e=e*4283543511&ti|((e<<16|t>>>16)*2950163797&ti)>>>16,t^=e>>>1,t=t*444984403&ti|t*60499&Ei,e=e*3301882366&ti|((e<<16|t>>>16)*3120437893&ti)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const yf=Object.freeze({map:null,hash:"",transfer:void 0});class Uf{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof vt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof vt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(r=!0,n[o]=l);else r=!0,this.#n.set(t,e);r&&this.#r(),e instanceof vt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new y0(this)}get serializable(){if(this.#n.size===0)return yf;const t=new Map,e=new v0,n=[],r=Object.create(null);let o=!1;for(const[l,u]of this.#n){const d=u instanceof vt?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:yf}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const o of this.#n.values()){if(!(o instanceof vt)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,p]of Object.entries(l)){if(f==="type")continue;let m=d.get(f);m||(m=new Map,d.set(f,m));const v=m.get(p)??0;m.set(p,v+1)}}if((r>0||n>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#i?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class y0 extends Uf{#t;constructor(t){super();const{map:e,hash:n,transfer:r}=t.serializable,o=structuredClone(e,r?{transfer:r}:null);this.#t={map:o,hash:n,transfer:r}}get print(){Zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return xt(this,"modifiedIds",{ids:new Set,hash:""})}}class Q_{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(Yt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),n?.(t)}catch{Et(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Et(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return xt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return xt(this,"isSyncFontLoadingSupported",cn||Ie.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Yt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(M,O){return M.charCodeAt(O)<<24|M.charCodeAt(O+1)<<16|M.charCodeAt(O+2)<<8|M.charCodeAt(O+3)&255}function r(M,O,k,R){const B=M.substring(0,O),U=M.substring(O+k);return B+R+U}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(M,O){if(++f>30){Et("Load test font never loaded."),O();return}if(d.font="30px "+M,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(p.bind(null,M,O))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,m.length,m);const A=16,S=1482184792;let E=n(v,A);for(o=0,l=m.length-3;o<l;o+=4)E=E-S+n(m,o)|0;o<m.length&&(E=E-S+n(m+"XXX",o)|0),v=r(v,A,4,N_(E));const w=`url(data:font/opentype;base64,${btoa(v)});`,T=`@font-face {font-family:"${m}";src:${w}}`;this.insertRule(T);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const M of[t.loadedName,m]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=M,x.append(O)}this._document.body.append(x),p(m,()=>{x.remove(),e.complete()})}}class J_{#t;constructor(t,e=null,n,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(l){Et(`getPathGenerator - ignoring character: "${l}".`)}const o=g0(r?.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){xt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){xt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class ma{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let r=0;for(const f of ma.strings){const p=e.encode(t[f]);n[f]=p,r+=4+p.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of ma.strings){const p=n[f],m=p.length;u.setUint32(d,m),l.set(p,d+4),d+=4+m}return Yt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Yt(t<ma.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class ga{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let r=0;for(const v of ga.strings){const y=e.encode(t[v]);n[v]=y,r+=4+y.length}r+=4;let o,l,u=1+r;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let m=0;p.setUint8(m++,t.guessFallback?1:0),p.setUint32(m,0),m+=4,r=0;for(const v of ga.strings){const y=n[v],A=y.length;r+=4+A,p.setUint32(m,A),f.set(y,m+4),m+=4+A}return p.setUint32(m-r-4,r),t.style&&(p.setUint32(m,o.length),f.set(o,m+4),m+=4+o.length,p.setUint32(m,l.length),f.set(l,m+4),m+=4+l.length),Yt(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Yt(t<ga.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,r));return{style:n,weight:o}}}class ee{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){Yt(t<ee.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=this.#o.getUint8(e)>>n&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Yt(t<ee.numbers.length,"Invalid number index"),this.#o.getFloat64(ee.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=ee.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=ee.#i;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=ee.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#d(t){Yt(t<ee.strings.length,"Invalid string index");let e=ee.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(this.#a,e+4,n)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=ee.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=ee.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=ee.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#a,t+4,r)),new ma(o.buffer)}get systemFontInfo(){let t=ee.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(this.#a,t+4,n)),new ga(r.buffer)}static write(t){const e=t.systemFontInfo?ga.write(t.systemFontInfo):null,n=t.cssFontInfo?ma.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const S of ee.strings)o[S]=r.encode(t[S]),l+=4+o[S].length;const u=ee.#r+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let m=0;const v=ee.bools.length;let y=0,A=0;for(let S=0;S<v;S++){const E=t[ee.bools[S]];y|=(E===void 0?0:E?2:1)<<A,A+=2,(A===8||S===v-1)&&(p.setUint8(m++,y),y=0,A=0)}Yt(m===ee.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of ee.numbers)p.setFloat64(m,t[S]),m+=8;if(Yt(m===ee.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(m++,4);for(const S of t.bbox)p.setInt16(m,S,!0),m+=2}else p.setUint8(m++,0),m+=8;if(Yt(m===ee.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(m++,6);for(const S of t.fontMatrix)p.setFloat64(m,S,!0),m+=8}else p.setUint8(m++,0),m+=48;if(Yt(m===ee.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(m++,1);for(const S of t.defaultVMetrics)p.setInt16(m,S,!0),m+=2}else p.setUint8(m++,0),m+=6;Yt(m===ee.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(ee.#r,0),m+=4;for(const S of ee.strings){const E=o[S],w=E.length;p.setUint32(m,w),f.set(E,m+4),m+=4+w}if(p.setUint32(ee.#r,m-ee.#r-4),!e)p.setUint32(m,0),m+=4;else{const S=e.byteLength;p.setUint32(m,S),Yt(m+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),m+4),m+=4+S}if(!n)p.setUint32(m,0),m+=4;else{const S=n.byteLength;p.setUint32(m,S),Yt(m+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),m+4),m+=4+S}return t.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,t.data.length),f.set(t.data,m+4),m+=4+t.data.length),Yt(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class Ge{static#t=0;static#e=1;static#i=2;static#n=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,r=[],o=[],l=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],r=t[2],o=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(r.length/2),m=Math.floor(o.length/3),v=l.length,y=u.length;let A=0;for(const O of u)A+=1,A=Math.ceil(A/4)*4,A+=4+O.coords.length*4,A+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(A+=4);const S=20+p*8+m*3+v*8+(n?16:0)+(f?3:0)+A,E=new ArrayBuffer(S),w=new DataView(E),T=new Uint8Array(E);w.setUint8(Ge.#t,e),w.setUint8(Ge.#e,n?1:0),w.setUint8(Ge.#i,f?1:0),w.setUint8(Ge.#n,d),w.setUint32(Ge.#r,p,!0),w.setUint32(Ge.#a,m,!0),w.setUint32(Ge.#s,v,!0),w.setUint32(Ge.#o,y,!0);let x=20;new Float32Array(E,x,p*2).set(r),x+=p*8,T.set(o,x),x+=m*3;for(const[O,k]of l)w.setFloat32(x,O,!0),x+=4,w.setUint32(x,parseInt(k.slice(1),16),!0),x+=4;if(n)for(const O of n)w.setFloat32(x,O,!0),x+=4;f&&(T.set(f,x),x+=3);for(let O=0;O<u.length;O++){const k=u[O];w.setUint8(x,k.type),x+=1,x=Math.ceil(x/4)*4,w.setUint32(x,k.coords.length,!0),x+=4,new Int32Array(E,x,k.coords.length).set(k.coords),x+=k.coords.length*4,w.setUint32(x,k.colors.length,!0),x+=4,new Int32Array(E,x,k.colors.length).set(k.colors),x+=k.colors.length*4,k.verticesPerRow!==void 0&&(w.setUint32(x,k.verticesPerRow,!0),x+=4)}return E}getIR(){const t=this.view,e=this.data[Ge.#t],n=!!this.data[Ge.#e],r=!!this.data[Ge.#i],o=t.getUint32(Ge.#r,!0),l=t.getUint32(Ge.#a,!0),u=t.getUint32(Ge.#s,!0),d=t.getUint32(Ge.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const m=new Uint8Array(this.buffer,f,l*3);f+=l*3;const v=[];for(let E=0;E<u;++E){const w=t.getFloat32(f,!0);f+=4;const T=t.getUint32(f,!0);f+=4,v.push([w,`#${T.toString(16).padStart(6,"0")}`])}let y=null;if(n){y=[];for(let E=0;E<4;++E)y.push(t.getFloat32(f,!0)),f+=4}let A=null;r&&(A=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let E=0;E<d;++E){const w=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const T=t.getUint32(f,!0);f+=4;const x=new Int32Array(this.buffer,f,T);f+=T*4;const M=t.getUint32(f,!0);f+=4;const O=new Int32Array(this.buffer,f,M);f+=M*4;const k={type:w,coords:x,colors:O};w===pf.LATTICE&&(k.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(k)}if(e===1)return["RadialAxial","axial",y,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",y,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const E=this.data[Ge.#n];let w=null;if(p.length>0){let T=p[0],x=p[0],M=p[1],O=p[1];for(let k=0;k<p.length;k+=2){const R=p[k],B=p[k+1];T=T>R?R:T,M=M>B?B:M,x=x<R?R:x,O=O<B?B:O}w=[T,M,x,O]}return["Mesh",E,p,m,S,w,y,A]}throw new Error(`Unsupported pattern kind: ${e}`)}}class tE{static write(t){let e,n;return Ie.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}#t;constructor(t){this.#t=t}get path(){return Ie.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function eE(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(cn)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nE(s){if(cn&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return iu(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function mc(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Sf=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,iE=s=>typeof s=="object"&&typeof s?.name=="string",sE=I_.bind(null,Sf,iE);class rE{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Et("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const gc={DATA:1,ERROR:2},De={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Pv(){}function _n(s){if(s instanceof Ds||s instanceof mf||s instanceof Mv||s instanceof Fc||s instanceof Vd)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Ds(s.message);case"InvalidPDFException":return new mf(s.message);case"PasswordException":return new Mv(s.message,s.code);case"ResponseException":return new Fc(s.message,s.status,s.missing);case"UnknownErrorException":return new Vd(s.message,s.details)}return new Vd(s.message,s.toString())}class Oo{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===gc.DATA)r.resolve(t.data);else if(t.callback===gc.ERROR)r.reject(_n(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:gc.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:gc.ERROR,callbackId:t.callbackId,reason:_n(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:l,targetName:u,stream:De.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Yt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:De.CANCEL,streamId:o,reason:_n(f)}),p.promise}},n)}#i(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:De.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:De.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){Yt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:De.ERROR,streamId:e,reason:_n(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:De.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:De.START_COMPLETE,streamId:e,reason:_n(f)})})}#n(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case De.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(_n(t.reason));break;case De.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(_n(t.reason));break;case De.PULL:if(!u){o.postMessage({sourceName:n,targetName:r,stream:De.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Pv).then(function(){o.postMessage({sourceName:n,targetName:r,stream:De.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:De.PULL_COMPLETE,streamId:e,reason:_n(f)})});break;case De.ENQUEUE:if(Yt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case De.CLOSE:if(Yt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case De.ERROR:Yt(l,"error should have stream controller"),l.controller.error(_n(t.reason)),this.#r(l,e);break;case De.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(_n(t.reason)),this.#r(l,e);break;case De.CANCEL:if(!u)break;const d=_n(t.reason);Promise.try(u.onCancel||Pv,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:De.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:De.CANCEL_COMPLETE,streamId:e,reason:_n(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class S0{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Zt("Abstract method `_createCanvas` called.")}}class aE extends S0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class A0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class Bv extends A0{async _fetch(t){const e=await Xo(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):iu(e)}}class w0{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,o){return"none"}destroy(t=!1){}}class oE extends w0{#t;#e;#i;#n;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(qi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#r.createElementNS(qi,"defs"),t.append(n),n.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=d[m]/255;const p=f.join(",");return[p,p,p]}const[e,n,r]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=n[d]/255,u[d]=r[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(su(e)?Et('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=d0(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,r,o]=this.#d(t),l=t.length===1?n:`${n}${r}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#s++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#m(u);return this.#p(n,r,o,f),d}addHCMFilter(t,e){const n=`${t}-${e}`,r="base";let o=this.#c.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(r,o)),!t||!e))return o.url;const l=this.#y(t);t=ct.makeHexColor(...l);const u=this.#y(e);if(e=ct.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let y=0;y<=255;y++){const A=y/255;d[y]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#n}_hcm_filter`,m=o.filter=this.#m(p);this.#p(f,f,f,m),this.#g(m);const v=(y,A)=>{const S=l[y]/255,E=u[y]/255,w=new Array(A+1);for(let T=0;T<=A;T++)w[T]=S+T/A*(E-S);return w.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),m),o.url=this.#h(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#d([t]),r=`alpha_${n}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#m(o);return this.#b(n,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,r;if(t?([n]=this.#d([t]),r=`luminosity_${n}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#m(o);return this.#f(u),t&&this.#b(n,u),l}addHighlightHCMFilter(t,e,n,r,o){const l=`${e}-${n}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!e||!n))return u.url;const[d,f]=[e,n].map(this.#y.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,y]=[r,o].map(this.#y.bind(this));m<p&&([p,m,v,y]=[m,p,y,v]),this.#l.style.color="";const A=(w,T,x)=>{const M=new Array(256),O=(m-p)/x,k=w/255,R=(T-w)/(255*x);let B=0;for(let U=0;U<=x;U++){const Z=Math.round(p+U*O),H=k+U*R;for(let it=B;it<=Z;it++)M[it]=H;B=Z+1}for(let U=B;U<256;U++)M[U]=M[B-1];return M.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,E=u.filter=this.#m(S);return this.#g(E),this.#p(A(v[0],y[0],5),A(v[1],y[1],5),A(v[2],y[2],5),E),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const e=this.#r.createElementNS(qi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(qi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(qi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const r=this.#r.createElementNS(qi,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)}#p(t,e,n,r){const o=this.#r.createElementNS(qi,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",n)}#b(t,e){const n=this.#r.createElementNS(qi,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#y(t){return this.#l.style.color=t,Zo(getComputedStyle(this.#l).getPropertyValue("color"))}}class _0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class Iv extends _0{async _fetch(t){const e=await Xo(t,"arraybuffer");return new Uint8Array(e)}}class E0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class Fv extends E0{async _fetch(t){const e=await Xo(t,"arraybuffer");return new Uint8Array(e)}}cn&&Et("Please use the `legacy` build in Node.js environments.");async function Hf(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class lE extends w0{}class cE extends S0{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class uE extends A0{async _fetch(t){return Hf(t)}}class hE extends _0{async _fetch(t){return Hf(t)}}class dE extends E0{async _fetch(t){return Hf(t)}}const na="__forcedDependency",{floor:jv,ceil:Uv}=Math;function bc(s,t,e,n,r,o){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],r),s[t*4+3]=Math.max(s[t*4+3],o)}const Af=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class fE{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Af}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const vc=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};class pE{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[na]:[]};#i=new Map;#n=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,n=!1){this.#f=t.width,this.#g=t.height,this.#b(e),n&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const n=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill(Af,e.length)):this.#u.fill(Af)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[na]:{__proto__:this.#e[na]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const n=this.#n.pop();return n!==void 0&&(vc(this.#p,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(vc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(vc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(ct.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#i.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(na,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(na,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,r,o,l){const u=ct.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];ct.axialAlignedBoundingBox([n,o,r,l],u,d);const f=ct.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,n,r,o,l){const u=this.#s;if(u[0]===1/0)return this;const d=ct.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(u[0]===-1/0)return ct.axialAlignedBoundingBox([n,o,r,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return ct.axialAlignedBoundingBox([n,o,r,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,r=1,o=0,l=0,u){const d=n.bbox;let f,p;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(n),f!==!1&&(p=[0,0,0,0],ct.axialAlignedBoundingBox(d,n.fontMatrix,p),(r!==1||o!==0||l!==0)&&ct.scaleMinMax([r,0,0,-r,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const m=u();return d&&p&&f===void 0&&(f=p[0]<=o-m.actualBoundingBoxLeft&&p[2]>=o+m.actualBoundingBoxRight&&p[1]<=l-m.actualBoundingBoxAscent&&p[3]>=l+m.actualBoundingBoxDescent,this.#h.set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,r=this.#t,o=this.#e;for(const l of e)l in this.#t?n.add(r[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[na]),this.#p){const n=vc(this.#p,t),{dependencies:r}=n;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=jv(this.#o[0]*256/this.#f),r=jv(this.#o[1]*256/this.#g),o=Uv(this.#o[2]*256/this.#f),l=Uv(this.#o[3]*256/this.#g);bc(this.#m,t,n,r,o,l);for(const u of this.#l)u!==t&&bc(this.#m,u,n,r,o,l);for(const u of this.#n)u!==t&&bc(this.#m,u,n,r,o,l);for(const u of this.#r)u!==t&&bc(this.#m,u,n,r,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new fE(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class jc{#t;#e;#i;#n=0;#r=0;constructor(t,e,n){if(t instanceof jc&&t.#i===!!n)return t;this.#t=t,this.#e=e,this.#i=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,r,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,n,r,o,l),this}recordBBox(t,e,n,r,o,l){return this.#i||this.#t.recordBBox(this.#e,e,n,r,o,l),this}recordCharacterBBox(t,e,n,r,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,n,r,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const ei={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Je={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function wf(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),s.clip(r)}class Gf{isModifyingCurrentTransform(){return!1}getPattern(){Zt("Abstract method `getPattern` called.")}}class mE extends Gf{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,r=this._p0,o=this._p1;if(e&&(r=r.slice(),o=o.slice(),ct.applyTransform(r,e),ct.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(e){const d=new Float32Array(2);ct.singularValueDecompose2dScale(e,d),l*=d[0],u*=d[0]}n=t.createRadialGradient(r[0],r[1],l,o[0],o[1],u)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,r){let o;if(r===Je.STROKE||r===Je.FILL){if(this.isOriginBased()){let v=ct.transform(n,e.baseTransform);this.matrix&&(v=ct.transform(v,this.matrix));const y=.001,A=Math.hypot(v[0],v[1]),S=Math.hypot(v[2],v[3]),E=(v[0]*v[2]+v[1]*v[3])/(A*S);if(Math.abs(E)<y)if(this.isRadial()){if(Math.abs(A-S)<y)return this._createGradient(t,v)}else return this._createGradient(t,v)}const l=e.current.getClippedPathBoundingBox(r,de(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=ct.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),wf(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(n);o.setTransform(m)}else wf(t,this._bbox),o=this._createGradient(t);return o}}function Zd(s,t,e,n,r,o,l,u){const d=t.coords,f=t.colors,p=s.data,m=s.width*4;let v;d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v),d[n+1]>d[r+1]&&(v=n,n=r,r=v,v=l,l=u,u=v),d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v);const y=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,S=(d[n]+t.offsetX)*t.scaleX,E=(d[n+1]+t.offsetY)*t.scaleY,w=(d[r]+t.offsetX)*t.scaleX,T=(d[r+1]+t.offsetY)*t.scaleY;if(A>=T)return;const x=f[o],M=f[o+1],O=f[o+2],k=f[l],R=f[l+1],B=f[l+2],U=f[u],Z=f[u+1],H=f[u+2],it=Math.round(A),Q=Math.round(T);let nt,rt,L,F,V,lt,yt,N;for(let X=it;X<=Q;X++){if(X<E){const at=X<A?0:(A-X)/(A-E);nt=y-(y-S)*at,rt=x-(x-k)*at,L=M-(M-R)*at,F=O-(O-B)*at}else{let at;X>T?at=1:E===T?at=0:at=(E-X)/(E-T),nt=S-(S-w)*at,rt=k-(k-U)*at,L=R-(R-Z)*at,F=B-(B-H)*at}let W;X<A?W=0:X>T?W=1:W=(A-X)/(A-T),V=y-(y-w)*W,lt=x-(x-U)*W,yt=M-(M-Z)*W,N=O-(O-H)*W;const st=Math.round(Math.min(nt,V)),ut=Math.round(Math.max(nt,V));let gt=m*X+st*4;for(let at=st;at<=ut;at++)W=(nt-at)/(nt-V),W<0?W=0:W>1&&(W=1),p[gt++]=rt-(rt-lt)*W|0,p[gt++]=L-(L-yt)*W|0,p[gt++]=F-(F-N)*W|0,p[gt++]=255}}function gE(s,t,e){const n=t.coords,r=t.colors;let o,l;switch(t.type){case pf.LATTICE:const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let p=o*u;for(let m=0;m<f;m++,p++)Zd(s,e,n[p],n[p+1],n[p+u],r[p],r[p+1],r[p+u]),Zd(s,e,n[p+u+1],n[p+1],n[p+u],r[p+u+1],r[p+1],r[p+u])}break;case pf.TRIANGLES:for(o=0,l=n.length;o<l;o+=3)Zd(s,e,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class bE extends Gf{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),y=f/m,A=p/v,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/y,scaleY:1/A},E=m+4,w=v+4,T=n.getCanvas("mesh",E,w),x=T.context,M=x.createImageData(m,v);if(e){const k=M.data;for(let R=0,B=k.length;R<B;R+=4)k[R]=e[0],k[R+1]=e[1],k[R+2]=e[2],k[R+3]=255}for(const k of this._figures)gE(M,k,S);return x.putImageData(M,2,2),{canvas:T.canvas,offsetX:u-2*y,offsetY:d-2*A,scaleX:y,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){wf(t,this._bbox);const o=new Float32Array(2);if(r===Je.SHADING)ct.singularValueDecompose2dScale(de(t),o);else if(this.matrix){ct.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;ct.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else ct.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,r===Je.SHADING?null:this._background,e.cachedCanvases);return r!==Je.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class vE extends Gf{getPattern(){return"hotpink"}}function yE(s){switch(s[0]){case"RadialAxial":return new mE(s);case"Mesh":return new bE(s);case"Dummy":return new vE}throw new Error(`Unknown IR type: ${s[0]}`)}const Hv={COLORED:1,UNCOLORED:2};class $f{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:n,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),nu("TilingType: "+l);const m=n[0],v=n[1],y=n[2],A=n[3],S=y-m,E=A-v,w=new Float32Array(2);ct.singularValueDecompose2dScale(this.matrix,w);const[T,x]=w;ct.singularValueDecompose2dScale(this.baseTransform,w);const M=T*w[0],O=x*w[1];let k=S,R=E,B=!1,U=!1;const Z=Math.ceil(f*M),H=Math.ceil(p*O),it=Math.ceil(S*M),Q=Math.ceil(E*O);Z>=it?k=f:B=!0,H>=Q?R=p:U=!0;const nt=this.getSizeAndScale(k,this.ctx.canvas.width,M),rt=this.getSizeAndScale(R,this.ctx.canvas.height,O),L=t.cachedCanvases.getCanvas("pattern",nt.size,rt.size),F=L.context,V=d.createCanvasGraphics(F,e);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,o,u),F.translate(-nt.scale*m,-rt.scale*v),V.transform(0,nt.scale,0,0,rt.scale,0,0),F.save(),V.dependencyTracker?.save(),this.clipBbox(V,m,v,y,A),V.baseTransform=de(V.ctx),V.executeOperatorList(r),V.endDrawing(),V.dependencyTracker?.restore(),F.restore(),B||U){const lt=L.canvas;B&&(k=f),U&&(R=p);const yt=this.getSizeAndScale(k,this.ctx.canvas.width,M),N=this.getSizeAndScale(R,this.ctx.canvas.height,O),X=yt.size,W=N.size,st=t.cachedCanvases.getCanvas("pattern-workaround",X,W),ut=st.context,gt=B?Math.floor(S/f):0,at=U?Math.floor(E/p):0;for(let _t=0;_t<=gt;_t++)for(let wt=0;wt<=at;wt++)ut.drawImage(lt,X*_t,W*wt,X,W,0,0,X,W);return{canvas:st.canvas,scaleX:yt.scale,scaleY:N.scale,offsetX:m,offsetY:v}}return{canvas:L.canvas,scaleX:nt.scale,scaleY:rt.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,n){const r=Math.max($f.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,r,o){const l=r-e,u=o-n;t.ctx.rect(e,n,l,u),ct.axialAlignedBoundingBox([e,n,r,o],de(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case Hv.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case Hv.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new R_(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,o){let l=n;r!==Je.SHADING&&(l=ct.transform(l,e.baseTransform),this.matrix&&(l=ct.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function SE({src:s,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Ie.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],p=n>>3,m=n&7,v=s.length;e=new Uint32Array(e.buffer);let y=0;for(let A=0;A<r;A++){for(const E=t+p;t<E;t++){const w=t<v?s[t]:255;e[y++]=w&128?f:d,e[y++]=w&64?f:d,e[y++]=w&32?f:d,e[y++]=w&16?f:d,e[y++]=w&8?f:d,e[y++]=w&4?f:d,e[y++]=w&2?f:d,e[y++]=w&1?f:d}if(m===0)continue;const S=t<v?s[t++]:255;for(let E=0;E<m;E++)e[y++]=S&1<<7-E?f:d}return{srcPos:t,destPos:y}}const Gv=16,$v=100,AE=15,Vv=10,En=16,qd=new DOMMatrix,Fn=new Float32Array(2),da=new Float32Array([1/0,1/0,-1/0,-1/0]);function wE(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,r,o,l,u){t.transform(e,n,r,o,l,u),this.__originalTransform(e,n,r,o,l,u)},s.setTransform=function(e,n,r,o,l,u){t.setTransform(e,n,r,o,l,u),this.__originalSetTransform(e,n,r,o,l,u)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,r,o,l,u){t.bezierCurveTo(e,n,r,o,l,u),this.__originalBezierCurveTo(e,n,r,o,l,u)},s.rect=function(e,n,r,o){t.rect(e,n,r,o),this.__originalRect(e,n,r,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class _E{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function yc(s,t,e,n,r,o,l,u,d,f){const[p,m,v,y,A,S]=de(s);if(m===0&&v===0){const T=l*p+A,x=Math.round(T),M=u*y+S,O=Math.round(M),k=(l+d)*p+A,R=Math.abs(Math.round(k)-x)||1,B=(u+f)*y+S,U=Math.abs(Math.round(B)-O)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(y),x,O),s.drawImage(t,e,n,r,o,0,0,R,U),s.setTransform(p,m,v,y,A,S),[R,U]}if(p===0&&y===0){const T=u*v+A,x=Math.round(T),M=l*m+S,O=Math.round(M),k=(u+f)*v+A,R=Math.abs(Math.round(k)-x)||1,B=(l+d)*m+S,U=Math.abs(Math.round(B)-O)||1;return s.setTransform(0,Math.sign(m),Math.sign(v),0,x,O),s.drawImage(t,e,n,r,o,0,0,U,R),s.setTransform(p,m,v,y,A,S),[U,R]}s.drawImage(t,e,n,r,o,l,u,d,f);const E=Math.hypot(p,m),w=Math.hypot(v,y);return[E*d,w*f]}class Xv{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ff;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Be.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=da.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Je.FILL,e=null){const n=this.minMax.slice();if(t===Je.STROKE){e||Zt("Stroke bounding box must include transform."),ct.singularValueDecompose2dScale(e,Fn);const r=Fn[0]*this.lineWidth/2,o=Fn[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(da,0)}getClippedPathBoundingBox(t=Je.FILL,e=null){return ct.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Yv(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%En,o=(e-r)/En,l=r===0?o:o+1,u=s.createImageData(n,En);let d=0,f;const p=t.data,m=u.data;let v,y,A,S;if(t.kind===Nc.GRAYSCALE_1BPP){const E=p.byteLength,w=new Uint32Array(m.buffer,0,m.byteLength>>2),T=w.length,x=n+7>>3,M=4294967295,O=Ie.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(A=v<o?En:r,f=0,y=0;y<A;y++){const k=E-d;let R=0;const B=k>x?n:k*8-7,U=B&-8;let Z=0,H=0;for(;R<U;R+=8)H=p[d++],w[f++]=H&128?M:O,w[f++]=H&64?M:O,w[f++]=H&32?M:O,w[f++]=H&16?M:O,w[f++]=H&8?M:O,w[f++]=H&4?M:O,w[f++]=H&2?M:O,w[f++]=H&1?M:O;for(;R<B;R++)Z===0&&(H=p[d++],Z=128),w[f++]=H&Z?M:O,Z>>=1}for(;f<T;)w[f++]=0;s.putImageData(u,0,v*En)}}else if(t.kind===Nc.RGBA_32BPP){for(y=0,S=n*En*4,v=0;v<o;v++)m.set(p.subarray(d,d+S)),d+=S,s.putImageData(u,0,y),y+=En;v<l&&(S=n*r*4,m.set(p.subarray(d,d+S)),s.putImageData(u,0,y))}else if(t.kind===Nc.RGB_24BPP)for(A=En,S=n*A,v=0;v<l;v++){for(v>=o&&(A=r,S=n*A),f=0,y=S;y--;)m[f++]=p[d++],m[f++]=p[d++],m[f++]=p[d++],m[f++]=255;s.putImageData(u,0,v*En)}else throw new Error(`bad image kind: ${t.kind}`)}function Zv(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%En,o=(e-r)/En,l=r===0?o:o+1,u=s.createImageData(n,En);let d=0;const f=t.data,p=u.data;for(let m=0;m<l;m++){const v=m<o?En:r;({srcPos:d}=SE({src:f,srcPos:d,dest:p,width:n,height:v,nonBlackColor:0})),s.putImageData(u,0,m*En)}}function Ao(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function Sc(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function qv(s,t){if(t)return!0;ct.singularValueDecompose2dScale(s,Fn);const e=Math.fround(Mi.pixelRatio*wa.PDF_TO_CSS_UNITS);return Fn[0]<=e&&Fn[1]<=e}const EE=["butt","round","square"],xE=["miter","round","bevel"],TE={},Wv={};class ba{constructor(t,e,n,r,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,p){this.ctx=t,this.current=new Xv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new _E(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...de(this.compositeCtx))}this.ctx.save(),Sc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=de(this.ctx)}executeOperatorList(t,e,n,r,o){const l=t.argsArray,u=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const p=f-d>Vv&&typeof n=="function",m=p?Date.now()+AE:0;let v=0;const y=this.commonObjs,A=this.objs;let S,E;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,n),d;if(!o||o(d))if(S=u[d],E=l[d]??null,S!==Bo.dependency)E===null?this[S](d):this[S](d,...E);else for(const w of E){this.dependencyTracker?.recordNamedData(w,d);const T=w.startsWith("g_")?y:A;if(!T.has(w))return T.get(w,n),d}if(d++,d===f)return d;if(p&&++v>Vv){if(Date.now()>m)return n(),d;v=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=r,f="prescale1",p,m;for(;o>2&&u>1||l>2&&d>1;){let v=u,y=d;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),l>2&&d>1&&(y=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/y),p=this.cachedCanvases.getCanvas(f,v,y),m=p.context,m.clearRect(0,0,v,y),m.drawImage(t,0,0,u,d,0,0,v,y),t=p.canvas,u=v,d=y,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const n=this.ctx,{width:r,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,d=de(n);let f,p,m,v;if((e.bitmap||e.data)&&e.count>1){const Z=e.bitmap||e.data.buffer;p=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(Z),f||(f=new Map,this._cachedBitmapsMap.set(Z,f));const H=f.get(p);if(H&&!u){const it=Math.round(Math.min(d[0],d[2])+d[4]),Q=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,ei.transformAndFill),{canvas:H,offsetX:it,offsetY:Q}}m=H}m||(v=this.cachedCanvases.getCanvas("maskCanvas",r,o),Zv(v.context,e));let y=ct.transform(d,[1/r,0,0,-1/o,0,0]);y=ct.transform(y,[1,0,0,1,0,-o]);const A=da.slice();ct.axialAlignedBoundingBox([0,0,r,o],y,A);const[S,E,w,T]=A,x=Math.round(w-S)||1,M=Math.round(T-E)||1,O=this.cachedCanvases.getCanvas("fillCanvas",x,M),k=O.context,R=S,B=E;k.translate(-R,-B),k.transform(...y),m||(m=this._scaleImage(v.canvas,_i(k)),m=m.img,f&&u&&f.set(p,m)),k.imageSmoothingEnabled=qv(de(k),e.interpolate),yc(k,m,0,0,m.width,m.height,0,0,r,o),k.globalCompositeOperation="source-in";const U=ct.transform(_i(k),[1,0,0,1,-R,-B]);return k.fillStyle=u?l.getPattern(n,this,U,Je.FILL,t):l,k.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,O.canvas)),this.dependencyTracker?.recordDependencies(t,ei.transformAndFill),{canvas:O.canvas,offsetX:Math.round(R),offsetY:Math.round(B)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=EE[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=xE[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,r]of e)switch(n){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Ao(this.suspendedCtx,l),wE(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ao(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const o=r[0],l=r[1],u=r[2]-o,d=r[3]-l;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,o,l,u,d,f,p,m){let v=t.canvas,y=d-p,A=f-m;if(l)if(y<0||A<0||y+n>v.width||A+r>v.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,r),w=E.context;w.drawImage(v,-y,-A),w.globalCompositeOperation="destination-atop",w.fillStyle=l,w.fillRect(0,0,n,r),w.globalCompositeOperation="source-over",v=E.canvas,y=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(y,A,n,r),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(y,A,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,n,r),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(v,y,A,n,r,d,f,n,r),e.restore()}save(t){this.inSMaskMode&&Ao(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ao(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[o]=n;if(!r){o||=n[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Bo.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=g0(o)),ct.axialAlignedBoundingBox(r,de(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,_i(r),Je.STROKE,t),l){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,ei.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Je.STROKE,de(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,_i(r),Je.FILL,t),f){const p=new Path2D;p.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,ei.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,ei.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=TE}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Wv}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:p}of e)p&&r.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||ff,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Et("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const f=r.italic?"italic":"normal";let p=n;n<Gv?p=Gv:n>$v&&(p=$v),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${d} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r}paintChar(t,e,n,r,o,l){const u=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,v=p&Be.FILL_STROKE_MASK,y=!!(p&Be.ADD_TO_PATH_FLAG),A=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||y||A||S)&&!f.missingFile&&(E=f.getPathGenerator(this.commonObjs,e)),E&&(f.disableFontFace||A||S)){u.save(),u.translate(n,r),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,u,f);let w;if(v===Be.FILL||v===Be.FILL_STROKE)if(o){w=u.getTransform(),u.setTransform(...o);const T=this.#i(E,w,o);u.fill(T)}else u.fill(E);if(v===Be.STROKE||v===Be.FILL_STROKE)if(l){w||=u.getTransform(),u.setTransform(...l);const{a:T,b:x,c:M,d:O}=w,k=ct.inverseTransform(l),R=ct.transform([T,x,M,O,0,0],k);ct.singularValueDecompose2dScale(R,Fn),u.lineWidth*=Math.max(Fn[0],Fn[1])/m,u.stroke(this.#i(E,w,l))}else u.lineWidth/=m,u.stroke(E);u.restore()}else(v===Be.FILL||v===Be.FILL_STROKE)&&(u.fillText(e,n,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,r,()=>u.measureText(e))),(v===Be.STROKE||v===Be.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,r,()=>u.measureText(e)).recordDependencies(t,ei.stroke),u.strokeText(e,n,r));y&&((this.pendingTextPaths||=[]).push({transform:de(u),x:n,y:r,fontSize:m,path:E}),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return xt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,ei.showText).resetBBox(t),this.current.textRenderingMode&Be.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=n.fontSizeScale,d=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,v=e.length,y=r.vertical,A=y?1:-1,S=r.defaultVMetrics,E=o*n.fontMatrix[0],w=n.textRenderingMode===Be.FILL&&!r.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(m,-1):l.scale(m,1);let T,x;const M=n.textRenderingMode&Be.FILL_STROKE_MASK,O=M===Be.FILL||M===Be.FILL_STROKE,k=M===Be.STROKE||M===Be.FILL_STROKE;if(O&&n.patternFill){l.save();const H=n.fillColor.getPattern(l,this,_i(l),Je.FILL,t);T=de(l),l.restore(),l.fillStyle=H}if(k&&n.patternStroke){l.save();const H=n.strokeColor.getPattern(l,this,_i(l),Je.STROKE,t);x=de(l),l.restore(),l.strokeStyle=H}let R=n.lineWidth;const B=n.textMatrixScale;if(B===0||R===0?k&&(R=this.getSinglePixelWidth()):R/=B,u!==1&&(l.scale(u,u),R/=u),l.lineWidth=R,r.isInvalidPDFjsFont){const H=[];let it=0;for(const nt of e)H.push(nt.unicode),it+=nt.width;const Q=H.join("");if(l.fillText(Q,0,0),this.dependencyTracker!==null){const nt=l.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-nt.actualBoundingBoxLeft,nt.actualBoundingBoxRight,-nt.actualBoundingBoxAscent,nt.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=it*E*m,l.restore(),this.compose();return}let U=0,Z;for(Z=0;Z<v;++Z){const H=e[Z];if(typeof H=="number"){U+=A*H*o/1e3;continue}let it=!1;const Q=(H.isSpace?f:0)+d,nt=H.fontChar,rt=H.accent;let L,F,V=H.width;if(y){const N=H.vmetric||S,X=-(H.vmetric?N[1]:V*.5)*E,W=N[2]*E;V=N?-N[0]:V,L=X/u,F=(U+W)/u}else L=U/u,F=0;let lt;if(r.remeasure&&V>0){lt=l.measureText(nt);const N=lt.width*1e3/o*u;if(V<N&&this.isFontSubpixelAAEnabled){const X=V/N;it=!0,l.save(),l.scale(X,1),L/=X}else V!==N&&(L+=(V-N)/2e3*o/u)}if(this.contentVisible&&(H.isInFont||r.missingFile)){if(w&&!rt)l.fillText(nt,L,F),this.dependencyTracker?.recordCharacterBBox(t,l,lt?{bbox:null}:r,o/u,L,F,()=>lt??l.measureText(nt));else if(this.paintChar(t,nt,L,F,T,x),rt){const N=L+o*rt.offset.x/u,X=F-o*rt.offset.y/u;this.paintChar(t,rt.fontChar,N,X,T,x)}}const yt=y?V*E-Q*p:V*E+Q*p;U+=yt,it&&l.restore()}y?n.y-=U:n.x+=U*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,d=o.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,m=r.textHScale*u,v=r.fontMatrix||ff,y=e.length,A=r.textRenderingMode===Be.INVISIBLE;let S,E,w,T;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(m,u);const x=this.dependencyTracker;for(this.dependencyTracker=x?new jc(x,t):null,S=0;S<y;++S){if(E=e[S],typeof E=="number"){T=d*E*l/1e3,this.ctx.translate(T,0),r.x+=T*m;continue}const M=(E.isSpace?p:0)+f,O=o.charProcOperatorList[E.operatorListId];O?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...v),this.executeOperatorList(O),this.restore()):Et(`Type3 character "${E.operatorListId}" is not available.`);const k=[E.width,0];ct.applyTransform(k,v),w=k[0]*l+M,n.translate(w,0),r.x+=w*m}n.restore(),x&&(this.dependencyTracker=x)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,o,l,u){const d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||de(this.ctx),o={createCanvasGraphics:(l,u)=>new ba(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new jc(this.dependencyTracker,u,!0):null)};n=new $f(e,this.ctx,o,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=yE(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,_i(n),Je.SHADING,t);const o=_i(n);if(o){const{width:l,height:u}=n.canvas,d=da.slice();ct.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,p,m,v]=d;this.ctx.fillRect(f,p,m-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,ei.transform).recordDependencies(t,ei.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Zt("Should not call beginInlineImage")}beginImageData(){Zt("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=de(this.ctx),n)){ct.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,l,u]=n,d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||nu("TODO: Support non-isolated groups."),e.knockout&&Et("Knockout groups not supported.");const r=de(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=da.slice();ct.axialAlignedBoundingBox(e.bbox,de(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=ct.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,p),y=v.context;y.translate(-u,-d),y.transform(...r);let A=new Path2D;const[S,E,w,T]=e.bbox;if(A.rect(S,E,w-S,T-E),e.matrix){const x=new Path2D;x.addPath(A,new DOMMatrix(e.matrix)),A=x}y.clip(A),e.smask&&this.smaskStack.push({canvas:v.canvas,context:y,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),Ao(n,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=de(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=da.slice();ct.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,r,o,l){if(this.#t(),Sc(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,ct.singularValueDecompose2dScale(de(this.ctx),Fn);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),m=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:v,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Fn[0],0,0,-Fn[1],0,d*Fn[1]),Sc(this.ctx)}else{Sc(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,d),this.ctx.clip(f)}}this.current=new Xv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=de(d);d.transform(n,r,o,l,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,v=u.length;m<v;m+=2){const y=ct.transform(f,[n,r,o,l,u[m],u[m+1]]);d.drawImage(p.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(t,this.ctx,y[4],y[4]+p.canvas.width,y[5],y[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,ei.transformAndFill);for(const l of e){const{data:u,width:d,height:f,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=m.context;v.save();const y=this.getObject(t,u,l);Zv(v,y),v.globalCompositeOperation="source-in",v.fillStyle=o?r.getPattern(v,this,_i(n),Je.FILL,t):r,v.fillRect(0,0,d,f),v.restore(),n.save(),n.transform(...p),n.scale(1,-1),yc(n,m.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,d,0,f),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Et("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let p=0,m=o.length;p<m;p+=2)f.push({transform:[n,0,0,r,o[p],o[p+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,r).context;Yv(p,e),u=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(u,_i(o));o.imageSmoothingEnabled=qv(de(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,n,-r,0).recordDependencies(t,ei.imageXObject).recordOperation(t),yc(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;Yv(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of n)r.save(),r.transform(...l.transform),r.scale(1,-1),yc(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,ei.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===Wv?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=de(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:o}=this.ctx.getTransform();let l,u;if(n===0&&r===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const p=d*t;l=u=p<1?1/p:1}else if(t===0)l=1/d,u=1/f;else{const p=d*t,m=f*t;l=p<1?1/p:1,u=m<1?1/m:1}}else{const d=Math.abs(e*o-n*r),f=Math.hypot(e,n),p=Math.hypot(r,o);if(t===0)l=p/d,u=f/d;else{const m=t*d;l=p>m?p/m:1,u=f>m?f/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(r||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,l),qd.a=1/o,qd.d=1/l;const d=new Path2D;if(d.addPath(t,qd),u.length>0){const f=Math.max(o,l);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=r||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in Bo)ba.prototype[s]!==void 0&&(ba.prototype[Bo[s]]=ba.prototype[s]);class va{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class CE{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ca=Symbol("INTERNAL");class ME{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:n,usage:r,rbGroups:o}){this.#t=!!(t&Bn.DISPLAY),this.#e=!!(t&Bn.PRINT),this.name=e,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==ca&&Zt("Internal method `_setVisible` called."),this.#i=n,this.#n=e}}class DE{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Bn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new ME(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(ca,!1);for(const n of t.on)this.#e.get(n)._setVisible(ca,!0);for(const n of t.off)this.#e.get(n)._setVisible(ca,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const o=t[r];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return Et(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return nu("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Et(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Et(`Unknown optional content policy ${t.policy}.`),!0}return Et(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const r=this.#e.get(t);if(!r){Et(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(ca,!1,!0);r._setVisible(ca,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=this.#e.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new v0;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class au{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,e,n){this._source=t,this.#t=e,this.#e=n}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Yt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new this.#e(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){this._fullReader?.cancel(t);for(const e of new Set(this._rangeReaders))e.cancel(t)}}class ou{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){Zt("Abstract method `read` called")}cancel(t){Zt("Abstract method `cancel` called")}}class lu{_stream=null;constructor(t,e,n){this._stream=t}async read(){Zt("Abstract method `read` called")}cancel(t){Zt("Abstract method `cancel` called")}}function Kv(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}class OE extends au{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,RE,kE);const{pdfDataRangeTransport:e}=t,{initialData:n,progressiveDone:r}=e;if(n?.length>0){const o=Kv(n);this._queuedChunks.push(o)}this._progressiveDone=r,e.addRangeListener((o,l)=>{this.#t(o,l)}),e.addProgressListener((o,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:l})}),e.addProgressiveReadListener(o=>{this.#t(void 0,o)}),e.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),e.transportReady()}#t(t,e){const n=Kv(e);if(t===void 0)this._fullReader?this._fullReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.keys().find(o=>o._begin===t);Yt(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(n)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onDone=()=>this._rangeReaders.delete(n),this._source.pdfDataRangeTransport.requestDataRange(t,e)),n}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class RE extends ou{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:e,disableRange:n,disableStream:r}=t._source,{length:o,contentDispositionFilename:l}=e;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!n,If(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class kE extends lu{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,e,n){super(t,e,n),this._begin=e}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function NE(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let p=u(e);return p=unescape(p),p=d(p),p=f(p),o(p)}if(e=l(s),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(s),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(p,{fatal:!0}),y=iu(m);m=v.decode(y),t=!1}catch{}}return m}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function l(p){const m=[];let v;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=y.exec(p))!==null;){let[,S,E,w]=v;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[E,w]}const A=[];for(let S=0;S<m.length&&S in m;++S){let[E,w]=m[S];w=u(w),E&&(w=unescape(w),S===0&&(w=d(w))),A.push(w)}return A.join("")}function u(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let v=0;v<m.length;++v){const y=m[v].indexOf('"');y!==-1&&(m[v]=m[v].slice(0,y),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function d(p){const m=p.indexOf("'");if(m===-1)return p;const v=p.slice(0,m),A=p.slice(m+1).replace(/^[^']*'/,"");return r(v,A)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,y,A){if(y==="q"||y==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),r(v,A);try{A=atob(A)}catch{}return r(v,A)})}return""}function x0(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function cu(s){return URL.parse(s)?.origin??null}function T0({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function C0(s){const t=s.get("Content-Disposition");if(t){let e=NE(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(If(e))return e}return null}function uu(s,t){return new Fc(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function M0(s,t){if(s!==t)throw new Error(`Expected range response-origin "${s}" to match "${t}".`)}function D0(s,t,e,n){return fetch(s,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function O0(s,t){if(s!==200&&s!==206)throw uu(s,t)}function R0(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Et(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class LE extends au{_responseOrigin=null;constructor(t){super(t,zE,PE),this.isHttp=/^https?:/i.test(t.url),this.headers=x0(this.isHttp,t.httpHeaders)}}class zE extends ou{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:r,rangeChunkSize:o,url:l,withCredentials:u}=t._source;this._contentLength=r,this._isStreamingSupported=!n,this._isRangeSupported=!e;const d=new Headers(t.headers);D0(l,d,u,this._abortController).then(f=>{t._responseOrigin=cu(f.url),O0(f.status,l),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:m,suggestedLength:v}=T0({responseHeaders:p,isHttp:t.isHttp,rangeChunkSize:o,disableRange:e});this._isRangeSupported=m,this._contentLength=v||this._contentLength,this._filename=C0(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ds("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:R0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class PE extends lu{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const{url:r,withCredentials:o}=t._source,l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`),D0(r,l,o,this._abortController).then(u=>{const d=cu(u.url);M0(d,t._responseOrigin),O0(u.status,r),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:R0(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Wd=200,Qv=206;function BE(s){return typeof s!="string"?s:iu(s).buffer}class IE extends au{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,FE,jE),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=x0(this.isHttp,t.httpHeaders)}_request(t){const e=new XMLHttpRequest,n={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(e,n),e.open("GET",this.url),e.withCredentials=this._source.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.validateStatus=r=>r===Qv||r===Wd):n.validateStatus=r=>r===Wd,e.responseType="arraybuffer",Yt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>t.onError(e.status),e.onreadystatechange=this.#i.bind(this,e),e.onprogress=this.#e.bind(this,e),e.send(null),e}#e(t,e){this.#t.get(t)?.onProgress?.(e)}#i(t,e){const n=this.#t.get(t);if(!n||(t.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){n.onError(t.status);return}const r=t.status||Wd;if(!n.validateStatus(r)){n.onError(t.status);return}const o=BE(t.response);if(r===Qv){const l=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?n.onDone(o):(Et('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone(o):n.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onClosed=()=>this._rangeReaders.delete(n)),n}}class FE extends ou{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:e}=t._source;this._contentLength=e,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#t(){const t=this._stream,{disableRange:e,rangeChunkSize:n}=t._source,r=this._fullRequestXhr;t._responseOrigin=cu(r.responseURL);const o=r.getAllResponseHeaders(),l=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...m]=f.split(": ");return[p,m.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:d}=T0({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:n,disableRange:e});u&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=C0(l),this._isRangeSupported&&t._abortRequest(r),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}#i(t){this._storedError=uu(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class jE extends lu{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,e,n){super(t,e,n),this._requestXhr=t._request({begin:e,end:n,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:null})}#t(){const t=cu(this._requestXhr?.responseURL);try{M0(t,this._stream._responseOrigin)}catch(e){this._storedError=e,this.#i(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(t){this._storedError??=uu(t,this._stream.url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const UE=/^[a-z][a-z0-9\-+.]+:/i;function HE(s){if(UE.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}function k0(s){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function N0(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Et(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class GE extends au{constructor(t){super(t,$E,VE),this.url=HE(t.url),Yt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class $E extends ou{_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:r,rangeChunkSize:o}=t._source;this._contentLength=r,this._isStreamingSupported=!n,this._isRangeSupported=!e;const l=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(l).then(d=>{const f=u.createReadStream(l),p=k0(f);this._reader=p.getReader();const{size:m}=d;m<=2*o&&(this._isRangeSupported=!1),this._contentLength=m,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ds("Streaming is disabled.")),this._headersCapability.resolve()}).catch(d=>{d.code==="ENOENT"&&(d=uu(0,l.href)),this._headersCapability.reject(d)})}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:N0(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class VE extends lu{_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const r=t.url,o=process.getBuiltinModule("fs");try{const l=o.createReadStream(r,{start:e,end:n-1}),u=k0(l);this._reader=u.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:N0(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const wo=Symbol("INITIAL_DATA");class L0{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:wo}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const n=this.#t[t];if(!n||n.data===wo)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==wo}delete(t){const e=this.#t[t];return!e||e.data===wo?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==wo&&(yield[t,e])}}}const XE=1e5,Jv=30;class In{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#b=null;static#y=new Map;static#v=new Map;static#x=new WeakMap;static#_=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=n.scale*Mi.pixelRatio,this.#d=n.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=n.rawDims;this.#b=[1,0,0,-1,-l,u+o],this.#o=r,this.#s=o,In.#D(),e.style.setProperty("--min-font-size",In.#_),ar(e,n),this.#t.promise.finally(()=>{In.#A.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ie.platform;return xt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),In.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Mi.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,ar(this.#l,{rotation:r})),n!==this.#h){e?.(),this.#h=n;const o={div:null,properties:null,ctx:In.#O(this.#r)};for(const l of this.#u)o.properties=this.#p.get(l),o.div=l,this.#E(o)}}cancel(){const t=new Ds("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(t){if(this.#i)return;this.#a.ctx??=In.#O(this.#r);const e=this.#u,n=this.#g;for(const r of t){if(e.length>XE){Et("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),r.tag==="Artifact"&&(this.#e.ariaHidden=!0),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#S(r)}}#S(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=ct.transform(this.#b,t.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=In.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*In.#B(u,l,this.#r);let p,m;o===0?(p=r[4],m=r[5]-f):(p=r[4]+f*Math.sin(o),m=r[5]-f*Math.cos(o));const v=e.style;v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*m/this.#s).toFixed(2)}%`,v.setProperty("--font-height",`${d.toFixed(2)}px`),v.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);A!==S&&Math.max(A,S)/Math.min(A,S)>1.5&&(y=!0)}if(y&&(n.canvasWidth=l.vertical?t.height:t.width),this.#p.set(e,n),this.#a.div=e,this.#a.properties=n,this.#E(this.#a),n.hasText&&this.#e.append(e),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#E(t){const{div:e,properties:n,ctx:r}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=o,{canvasWidth:u,fontSize:d}=n;In.#M(r,d*this.#h,l);const{width:f}=r.measureText(e.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#O(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#x.set(e,{size:0,family:""})}return e}static#M(t,e,n){const r=this.#x.get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)}static#D(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#B(t,e,n){const r=this.#y.get(t);if(r)return r;const o=this.#O(n);o.canvas.width=o.canvas.height=Jv,this.#M(o,Jv,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(Ie.platform.isFirefox&&Et("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#y.set(t,f),f}}const YE=100;function _f(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new Vf,{docId:e}=t,n=s.url?eE(s.url):null,r=s.data?nE(s.data):null,o=s.httpHeaders||null,l=s.withCredentials===!0,u=s.password??null,d=s.range instanceof z0?s.range:null,f=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof Fo?s.worker:null;const m=s.verbosity,v=typeof s.docBaseUrl=="string"&&!su(s.docBaseUrl)?s.docBaseUrl:null,y=mc(s.cMapUrl),A=s.cMapPacked!==!1,S=s.CMapReaderFactory||(cn?uE:Bv),E=mc(s.iccUrl),w=mc(s.standardFontDataUrl),T=s.StandardFontDataFactory||(cn?hE:Iv),x=mc(s.wasmUrl),M=s.WasmFactory||(cn?dE:Fv),O=s.stopAtErrors!==!0,k=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,R=s.isEvalSupported!==!1,B=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!cn,U=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!cn&&(Ie.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,H=typeof s.disableFontFace=="boolean"?s.disableFontFace:cn,it=s.fontExtraProperties===!0,Q=s.enableXfa===!0,nt=s.ownerDocument||globalThis.document,rt=s.disableRange===!0,L=s.disableStream===!0,F=s.disableAutoFetch===!0,V=s.pdfBug===!0,lt=s.CanvasFactory||(cn?cE:aE),yt=s.FilterFactory||(cn?lE:oE),N=s.enableHWA===!0,X=s.useWasm!==!1,W=d?d.length:s.length??NaN,st=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!cn&&!H,ut=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(S===Bv&&T===Iv&&M===Fv&&y&&w&&x&&Do(y,document.baseURI)&&Do(w,document.baseURI)&&Do(x,document.baseURI)),gt=null;M_(m);const at={canvasFactory:new lt({ownerDocument:nt,enableHWA:N}),filterFactory:new yt({docId:e,ownerDocument:nt}),cMapReaderFactory:ut?null:new S({baseUrl:y,isCompressed:A}),standardFontDataFactory:ut?null:new T({baseUrl:w}),wasmFactory:ut?null:new M({baseUrl:x})};p||(p=Fo.create({verbosity:m,port:va.workerPort}),t._worker=p);const _t={docId:e,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:F,rangeChunkSize:f,length:W,docBaseUrl:v,enableXfa:Q,evaluatorOptions:{maxImageSize:k,disableFontFace:H,ignoreErrors:O,isEvalSupported:R,isOffscreenCanvasSupported:B,isImageDecoderSupported:U,canvasMaxAreaInBytes:Z,fontExtraProperties:it,useSystemFonts:st,useWasm:X,useWorkerFetch:ut,cMapUrl:y,iccUrl:E,standardFontDataUrl:w,wasmUrl:x}},wt={ownerDocument:nt,pdfBug:V,styleElement:gt,enableHWA:N,loadingParams:{disableAutoFetch:F,enableXfa:Q}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const jt=p.messageHandler.sendWithPromise("GetDocRequest",_t,r?[r.buffer]:null);let Dt;if(d)Dt=new OE({pdfDataRangeTransport:d,disableRange:rt,disableStream:L});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ot=Do(n)?LE:cn?GE:IE;Dt=new ot({url:n,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:rt,disableStream:L})}return jt.then(ot=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Rt=new Oo(e,ot,p.port),Bt=new WE(Rt,t,Dt,wt,at);t._transport=Bt,Rt.send("Ready",null)})}).catch(t._capability.reject),t}class Vf{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Vf.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class z0{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ZE{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class qE{#t=!1;#e=Vt.instance;constructor(t,e,n,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new Ov:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new L0,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Yo({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:o=Cs.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1,recordOperations:y=!1,operationsFilter:A=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,m,v),{renderingIntent:E,cacheKey:w}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(E);let T=this._intentStates.get(w);T||(T=Object.create(null),this._intentStates.set(w,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const x=!!(E&Bn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(y||M),k=U=>{if(T.renderTasks.delete(R),O){const Z=R.gfx?.dependencyTracker.take();Z&&(R.stepper&&R.stepper.setOperatorBBoxes(Z,R.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=Z))}x&&(this.#t=!0),this.#i(),U?(R.capability.reject(U),this._abortOperatorList({intentState:T,reason:U instanceof Error?U:new Error(U)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new fa({callback:k,params:{canvas:e,canvasContext:t,dependencyTracker:O?new pE(e,T.operatorList.length,M):null,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(T.renderTasks||=new Set).add(R);const B=R.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([U,Z])=>{if(this.destroyed){k();return}if(this._stats?.time("Rendering"),!(Z.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:U,optionalContentConfig:Z}),R.operatorListChanged()}).catch(k),B}getOperatorList({intent:t="display",annotationMode:e=Cs.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,n,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Io.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function o(){l.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#i();return t&&e&&(this._stats&&=new Ov),e}#i(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:m,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),p())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#i()}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Bf){let r=YE;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Ds(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Ms,di,Qi,ir,Qc,sr,rr,un,Lc,P0,B0,Ro,Aa,zc;const ce=class ce{constructor({name:t=null,port:e=null,verbosity:n=D_()}={}){Ai(this,un);Ai(this,Ms,Promise.withResolvers());Ai(this,di,null);Ai(this,Qi,null);Ai(this,ir,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(le(ce,rr).has(e))throw new Error("Cannot use more than one PDFWorker per port.");le(ce,rr).set(e,this),wi(this,un,P0).call(this,e)}else wi(this,un,B0).call(this)}get promise(){return le(this,Ms).promise}get port(){return le(this,Qi)}get messageHandler(){return le(this,di)}destroy(){this.destroyed=!0,le(this,ir)?.terminate(),wn(this,ir,null),le(ce,rr).delete(le(this,Qi)),wn(this,Qi,null),le(this,di)?.destroy(),wn(this,di,null)}static create(t){const e=le(this,rr).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ce(t)}static get workerSrc(){if(va.workerSrc)return va.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xt(this,"_setupFakeWorkerGlobal",(async()=>le(this,Aa,zc)?le(this,Aa,zc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ms=new WeakMap,di=new WeakMap,Qi=new WeakMap,ir=new WeakMap,Qc=new WeakMap,sr=new WeakMap,rr=new WeakMap,un=new WeakSet,Lc=function(){le(this,Ms).resolve(),le(this,di).send("configure",{verbosity:this.verbosity})},P0=function(t){wn(this,Qi,t),wn(this,di,new Oo("main","worker",t)),le(this,di).on("ready",()=>{}),wi(this,un,Lc).call(this)},B0=function(){if(le(ce,sr)||le(ce,Aa,zc)){wi(this,un,Ro).call(this);return}let{workerSrc:t}=ce;try{ce._isSameOrigin(window.location,t)||(t=ce._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Oo("main","worker",e),r=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?le(this,Ms).reject(new Error("Worker was destroyed")):wi(this,un,Ro).call(this)},o=new AbortController;e.addEventListener("error",()=>{le(this,ir)||r()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}wn(this,di,n),wn(this,Qi,e),wn(this,ir,e),wi(this,un,Lc).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{wi(this,un,Ro).call(this)}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{nu("The worker has been disabled.")}wi(this,un,Ro).call(this)},Ro=function(){le(ce,sr)||(Et("Setting up fake worker."),wn(ce,sr,!0)),ce._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){le(this,Ms).reject(new Error("Worker was destroyed"));return}const e=new rE;wn(this,Qi,e);const n=`fake${bv(ce,Qc)._++}`,r=new Oo(n+"_worker",n,e);t.setup(r,e),wn(this,di,new Oo(n,n+"_worker",e)),wi(this,un,Lc).call(this)}).catch(t=>{le(this,Ms).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Aa=new WeakSet,zc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ai(ce,Aa),Ai(ce,Qc,0),Ai(ce,sr,!1),Ai(ce,rr,new WeakMap),cn&&(wn(ce,sr,!0),va.workerSrc||="./pdf.worker.mjs"),ce._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},ce._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ce.fromPort=t=>{if(U_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return ce.create(t)};let Fo=ce;class WE{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#i=null;#n=new Map;#r=new Map;#a=new Map;#s=null;#o=Vt.instance;constructor(t,e,n,r,o){this.messageHandler=t,this.loadingTask=e,this.#i=n,this.commonObjs=new L0,this.fontLoader=new Q_({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,e=new Map;for(let n=0,r=this.#o.pagesNumber;n<r;n++){const o=this.#o.getPrevPageNumber(n+1)-1,l=this.#n.get(o);l&&t.set(n,l);const u=this.#r.get(o);u&&e.set(n,u)}this.#n=t,this.#r=e}#l(t,e=null){const n=this.#e.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,r),r}#d({loaded:t,total:e}){this.loadingTask.onProgress?.({loaded:t,total:e,percent:Qe(Math.round(t/e*100),0,100)})}get annotationStorage(){return xt(this,"annotationStorage",new Uf)}getRenderingIntent(t,e=Cs.ENABLE,n=null,r=!1,o=!1){let l=Bn.DISPLAY,u=yf;switch(t){case"any":l=Bn.ANY;break;case"display":break;case"print":l=Bn.PRINT;break;default:Et(`getRenderingIntent - invalid intent: ${t}`)}const d=l&Bn.PRINT&&n instanceof y0?n:this.annotationStorage;switch(e){case Cs.DISABLE:l+=Bn.ANNOTATIONS_DISABLE;break;case Cs.ENABLE:break;case Cs.ENABLE_FORMS:l+=Bn.ANNOTATIONS_FORMS;break;case Cs.ENABLE_STORAGE:l+=Bn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Et(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(l+=Bn.IS_EDITING),o&&(l+=Bn.OPLIST);const{ids:f,hash:p}=d.modifiedIds,m=[l,u.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#n.values())t.push(n._destroy());this.#n.clear(),this.#r.clear(),this.#a.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),In.cleanup(),this.#i?.cancelAllRequests(new Ds("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{Yt(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#i.getFullReader(),this.#t.onProgress=o=>this.#d(o),r.onPull=()=>{this.#t.read().then(function({value:o,done:l}){if(l){r.close();return}Yt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this.#t.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this.#t.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this.#t;return r&&o&&(this.#t.onProgress=null),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,r)=>{Yt(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#i.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}Yt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this.#o.pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new ZE(n,this))}),t.on("DocException",n=>{e._capability.reject(_n(n))}),t.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw _n(n);const r=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};e.onPassword(r,n.code)}catch(r){this.#s.reject(r)}return this.#s.promise}),t.on("DataLoaded",n=>{this.#d({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#n.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const m=o.error;Et(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const l=new ee(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,v)=>globalThis.FontInspector.fontAdded(m,v):null,d=new J_(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Yt(f,"The imageRef must be defined.");for(const m of this.#n.values())for(const[,v]of m.objs)if(v?.ref===f)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new tE(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const p=new Ge(o);this.commonObjs.resolve(n,p.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,l])=>{if(this.destroyed)return;const u=this.#n.get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||this.#d(n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#o.getPageId(t)-1,r=this.#r.get(e);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#a.set(l.refStr,n);const u=new qE(e,l,this,this._params.pdfBug);return this.#n.set(e,u),u});return this.#r.set(e,o),o}async getPageIndex(t){if(!Sf(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:e})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(e=>new DE(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#e.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new CE(r[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:r[2]}));return this.#e.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#n.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),In.cleanup()}}cachedPageNumber(t){if(!Sf(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=this.#a.get(e);return n>=0?this.#o.getPageNumber(n+1):null}}class KE{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&e?.size>0}}class fa{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:v=null,enableHWA:y=!1,operationsFilter:A=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new KE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=y,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(fa.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");fa.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ba(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),fa.#e.delete(this._canvas),t||=new Bf(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),fa.#e.delete(this._canvas),this.callback())))}}const QE="5.4.624",JE="384c6208b";class ni{#t=null;#e=null;#i;#n=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return xt(this,"_keyboardManager",new qo([[["Escape","mac+Escape"],ni.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ni.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ni.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ni.prototype._moveToPrevious],[["Home","mac+Home"],ni.prototype._moveToBeginning],[["End","mac+End"],ni.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ni.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",si,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[n,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",ni.#d[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#i,o.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ft.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#n.lastElementChild?.focus()}#g(t){ni._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class jo{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,jo.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:n}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",jo.#n[t]),r.addEventListener("input",()=>{this.#i.updateParams(e,r.value)},{signal:this.#i._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function ty(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function _o(s){return Math.max(0,Math.min(255,255*s))}class ey{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=_o(t),[t,t,t]}static G_HTML([t]){const e=ty(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(_o)}static RGB_HTML(t){return`#${t.map(ty).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[_o(1-Math.min(1,t+r)),_o(1-Math.min(1,n+r)),_o(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,o=1-e,l=1-n,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class tx{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Zt("Abstract method `_createSVG` called.")}}class Uc extends tx{_createSVG(t){return document.createElementNS(qi,t)}}const ex=9,or=new WeakSet,nx=new Date().getTimezoneOffset()*60*1e3;class Kd{static create(t){switch(t.data.annotationType){case Oe.LINK:return new Xf(t);case Oe.TEXT:return new sx(t);case Oe.WIDGET:switch(t.data.fieldType){case"Tx":return new rx(t);case"Btn":return t.data.radioButton?new I0(t):t.data.checkBox?new ox(t):new lx(t);case"Ch":return new cx(t);case"Sig":return new ax(t)}return new fr(t);case Oe.POPUP:return new Ef(t);case Oe.FREETEXT:return new F0(t);case Oe.LINE:return new hx(t);case Oe.SQUARE:return new dx(t);case Oe.CIRCLE:return new fx(t);case Oe.POLYLINE:return new j0(t);case Oe.CARET:return new mx(t);case Oe.INK:return new Yf(t);case Oe.POLYGON:return new px(t);case Oe.HIGHLIGHT:return new U0(t);case Oe.UNDERLINE:return new gx(t);case Oe.SQUIGGLY:return new bx(t);case Oe.STRIKEOUT:return new vx(t);case Oe.STAMP:return new H0(t);case Oe.FILEATTACHMENT:return new yx(t);default:return new pe(t)}}}class pe{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return pe._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>l?(l=e[u+1],o=e[u+2]):e[u+1]===l&&(o=Math.max(o,e[u+2]));return[o,l]}if(n?.length>=1){for(const u of n)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Po}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Po}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let r=this.#i?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#i.popup),r&&(r.updateEdited(t),n?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof fr)&&!(this instanceof Xf)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Ef){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(S>0||E>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof I0){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(e.borderStyle.style){case la.SOLID:l.borderStyle="solid";break;case la.DASHED:l.borderStyle="dashed";break;case la.BEVELED:Et("Unimplemented border style: beveled");break;case la.INSET:Et("Unimplemented border style: inset");break;case la.UNDERLINE:l.borderBottomStyle="solid";break}const w=e.borderColor||null;w?(this.#e=!0,l.borderColor=ct.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):l.borderWidth=0}const f=ct.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:v,pageY:y}=r.rawDims;l.left=`${100*(f[0]-v)/p}%`,l.top=`${100*(f[1]-y)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(l.width=`${100*u/p}%`,l.height=`${100*d/m}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const o=r.detail[e],l=o[0],u=o.slice(1);r.target.style[n]=ey[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:ey[`${l}_rgb`](u)})};return xt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||n[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,o]of Object.entries(e)){const l=n[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,E,w,T]=t.subarray(2,6);if(r===S&&o===E&&e===w&&n===T)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:E}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=r-e,f=o-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const v=p.createElement("defs");m.append(v);const y=p.createElement("clipPath"),A=`clippath_${this.data.id}`;y.setAttribute("id",A),y.setAttribute("clipPathUnits","objectBoundingBox"),v.append(y);for(let S=2,E=t.length;S<E;S+=8){const w=t[S],T=t[S+1],x=t[S+2],M=t[S+3],O=p.createElement("rect"),k=(x-e)/d,R=(o-T)/f,B=(w-x)/d,U=(T-M)/f;O.setAttribute("x",k),O.setAttribute("y",R),O.setAttribute("width",B),O.setAttribute("height",U),y.append(O),u?.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${R}" width="${B}" height="${U}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate),this.#i=new Ef({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!or.has(f)){Et(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==e&&or.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class ix extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Xf extends pe{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#i(n,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=n,this.container.append(n)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#i(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const o=n.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:r,refs:o,include:l}=e,u=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const m of r){const v=this._fieldObjects[m]||[];for(const{id:y}of v)p.add(y)}for(const m of Object.values(this._fieldObjects))for(const v of m)p.has(v.id)===l&&u.push(v)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const d=this.annotationStorage,f=[];for(const p of u){const{id:m}=p;switch(f.push(m),p.type){case"text":{const y=p.defaultValue||"";d.setValue(m,{value:y});break}case"checkbox":case"radiobutton":{const y=p.defaultValue===p.exportValues;d.setValue(m,{value:y});break}case"combobox":case"listbox":{const y=p.defaultValue||"";d.setValue(m,{value:y});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!or.has(v)){Et(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class sx extends pe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class fr extends pe{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ie.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,o){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(t,e,n,r){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ct.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||ex,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/($d*r))||1,m=f/p;l=Math.min(r,d(m/$d))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,d(f/$d))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=ct.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class rx extends fr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[r]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),or.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,v=!!p&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",A=>{const S=this.data.defaultFieldValue??"";n.value=d.userValue=S,d.formattedValue=null});let y=A=>{const{formattedValue:S}=d;S!=null&&(A.target.value=S),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{if(d.focused)return;const{target:E}=S;if(v&&(E.type=p,m&&(E.step=m)),d.userValue){const w=d.userValue;if(v)if(p==="time"){const T=new Date(w),x=[T.getHours(),T.getMinutes(),T.getSeconds()];E.value=x.map(M=>M.toString().padStart(2,"0")).join(":")}else E.value=new Date(w-nx).toISOString().split(p==="date"?"T":".",1)[0];else E.value=w}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const E={value(w){d.userValue=w.detail.value??"",v||t.setValue(e,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:T}=w.detail;d.formattedValue=T,T!=null&&w.target!==document.activeElement&&(w.target.value=T);const x={formattedValue:T};v&&(x.value=T),t.setValue(e,x)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:T}=w.detail,{target:x}=w;if(T===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",T);let M=d.userValue;!M||M.length<=T||(M=M.slice(0,T),x.value=d.userValue=M,t.setValue(e,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(E,S)}),n.addEventListener("keydown",S=>{d.commitKey=1;let E=-1;if(S.key==="Escape"?E=0:S.key==="Enter"&&!this.data.multiLine?E=2:S.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:w}=S.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:E,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const A=y;y=null,n.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=S;let{value:w}=E;if(v){if(w&&p==="time"){const T=w.split(":").map(x=>parseInt(x,10));w=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),E.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();E.type="text"}d.userValue=w,d.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),A(S)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:E,target:w}=S,{value:T,selectionStart:x,selectionEnd:M}=w;let O=x,k=M;switch(S.inputType){case"deleteWordBackward":{const R=T.substring(0,x).match(/\w*[^\w]*$/);R&&(O-=R[0].length);break}case"deleteWordForward":{const R=T.substring(x).match(/^[^\w]*\w*/);R&&(k+=R[0].length);break}case"deleteContentBackward":x===M&&(O-=1);break;case"deleteContentForward":x===M&&(k+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:E||"",willCommit:!1,selStart:O,selEnd:k}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class ax extends fr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ox extends fr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return or.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n)){const p=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class I0 extends fr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(or.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=l===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const v=p&&m.id===n;m.domElement&&(m.domElement.checked=v),t.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class lx extends Xf{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class cx extends fr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");or.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),o=!1),r.append(m)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=p=>{const m=p?"value":"textContent",{options:v,multiple:y}=r;return y?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let d=u(!1);const f=p=>{const m=p.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const m={value(v){l?.();const y=v.detail.value,A=new Set(Array.isArray(y)?y:[y]);for(const S of r.options)S.selected=A.has(S.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(v){r.multiple=!0},remove(v){const y=r.options,A=v.detail.remove;y[A].selected=!1,r.remove(A),y.length>0&&Array.prototype.findIndex.call(y,E=>E.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(v){const{index:y,displayValue:A,exportValue:S}=v.detail.insert,E=r.children[y],w=document.createElement("option");w.textContent=A,w.value=S,E?E.before(w):r.append(w),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},items(v){const{items:y}=v.detail;for(;r.length!==0;)r.remove(0);for(const A of y){const{displayValue:S,exportValue:E}=A,w=document.createElement("option");w.textContent=S,w.value=E,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},indices(v){const y=new Set(v.detail.indices);for(const A of v.target.options)A.selected=y.has(A.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("input",p=>{const m=u(!0),v=u(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ef extends pe{constructor(t){const{data:e,elements:n,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&pe._hasPopupData(e)}),this.elements=n,o&&pe._hasPopupData(e)){const l=this.popup=this.#t();for(const u of n)u.popup=l}else this.popup=null}#t(){return new ux({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${ha}${r}`).join(",")),this.container}}class ux{#t=null;#e=this.#$.bind(this);#i=this.#F.bind(this);#n=this.#N.bind(this);#r=this.#w.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#b=null;#y=null;#v=null;#x=null;#_=null;#A=null;#C=!1;#S=null;#E=null;constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:p,open:m,commentManager:v=null}){this.#s=t,this.#_=r,this.#o=l,this.#x=u,this.#d=d,this.#a=e,this.#v=f,this.#h=p,this.#l=n,this.#t=v,this.#S=n[0],this.#c=gf.toDateObject(o),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),v||(this.#O(),this.#s.hidden=!0,m&&this.#w())}#O(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#S.container.after(this.#p);return}if(this.#b||this.#M(),!this.#b)return;const{signal:t}=this.#m=new AbortController,e=this.#S.hasOwnCommentButton,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const u=this.#S.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#D(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#D(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#b,{style:n}=this.#p;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#B(){this.#S.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#S.commentText,this.#E}set comment(t){t!==this.comment&&(this.#S.commentText=this.#E=t)}focus(){this.#S.container?.focus()}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:t,y:e,height:n}=this.#p.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#S.layer.getBoundingClientRect();return[(t-r)/l,(e+n-o)/u]}set commentPopupPosition(t){this.#y=t}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#y||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=r;this.#t.showDialog(null,this,o+e*u,l+n*d,{...t,parentDimensions:r})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#a){const n=t.style.outlineColor=ct.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#_?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#_}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}m0({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#k(){const t=this.#x,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#x.html||null}get#L(){return this.#k?.attributes?.style?.fontSize||0}get#I(){return this.#k?.attributes?.style?.color||null}#z(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#I,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return n}#$(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#B(),this.#E=e.text)),t&&(this.#b=null,this.#M(),this.#D());return}if(n||e?.deleted){this.remove();return}this.#O(),this.#A||={contentsObj:this.#o,richText:this.#x},t&&(this.#u=null),e&&e.text&&(this.#x=this.#z(e.text),this.#c=gf.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#x}=this.#A,this.#A=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#v;for(const A of this.#l)if(!u||ct.intersect(A.data.rect,u)!==null){u=A.data.rect,l=!0;break}const d=ct.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,m=d[0]+p,v=d[1];this.#u=[100*(m-r)/e,100*(v-o)/n];const{style:y}=this.#s;y.left=`${this.#u[0]}%`,y.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#F(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#N(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#F(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#O(),this.#C&&(this.#g||this.#N(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class F0 extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ct.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class hx extends pe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dx extends pe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class fx extends pe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class j0 extends pe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:r},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let p=0,m=e.length;p<m;p+=2){const v=e[p]-t[0],y=t[3]-e[p+1];d.push(`${v},${y}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class px extends j0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mx extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Yf extends pe{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ct.HIGHLIGHT:Ct.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#i(e,t),f=this.svgFactory.create(u,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,v=n.length;m<v;m++){const y=this.svgFactory.createElement(this.svgElementName);this.#e.push(y),y.setAttribute("points",n[m].join(",")),p.append(y)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:r}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),n)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:u,height:d}=this.#i(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class U0 extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ct.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class gx extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class bx extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class vx extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class H0 extends pe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ct.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class yx extends pe{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:r}=Ie.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Zf{#t=null;#e=null;#i=null;#n=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#r=u||null,this.#a=f||null,this.#i=p||new Uf,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,n=this.div;ar(n,this.viewport);const r=new Map,o=[],l={data:null,layer:n,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Uc,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===Oe.POPUP;if(d){const m=r.get(u.id);if(!m)continue;if(!this._commentManager){o.push(u);continue}l.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const f=Kd.create(l);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const m=r.get(u.popupRef);m?m.push(f):r.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=l.elements=r.get(u.id);l.data=u;const f=Kd.create(l);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${ha}${u.id}`,u.hidden&&(p.style.visibility="hidden"),d.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:n,data:{id:r}}of this.#s){const o=n.id=`${ha}${r}`;t.push(this.#r?.getAriaAttributes(o).then(l=>{if(l)for(const[u,d]of l)n.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[n,r,o,l]}},{data:{rect:[u,d,f,p]}})=>{if(n===o&&r===l)return 1;if(u===f&&d===p)return-1;const m=l,v=r,y=(r+l)/2,A=p,S=d,E=(d+p)/2;if(y>=A&&E<=v)return-1;if(E>=m&&y<=S)return 1;const w=(n+o)/2,T=(u+f)/2;return w-T});const e=document.createDocumentFragment();for(const n of this.#s)e.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&e.append(n.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const n of this.#s)this.#t.addPointerInTextLayer(n.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new Uc,parent:this};for(const n of t){n.borderStyle||=Zf._defaultBorderStyle,e.data=n;const r=Kd.create(e);r.isRenderable&&(r.render(),r.contentElement.id=`${ha}${n.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,ar(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,o=new ix({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return o.render(),o.contentElement.id=`${ha}${n}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const e=this.#s.findIndex(r=>r.data.id===t);if(e<0)return;const[n]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return xt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:la.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Ac=/\r\n?|\n/g;class $e extends vt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=$e.prototype,e=o=>o.isEmpty(),n=Os.TRANSLATE_SMALL,r=Os.TRANSLATE_BIG;return xt(this,"_keyboardManager",new qo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=Ct.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||$e._defaultColor||vt._defaultLineColor,this.#n=t.fontSize||$e._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){vt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ft.FREETEXT_SIZE:$e._defaultFontSize=e;break;case Ft.FREETEXT_COLOR:$e._defaultColor=e;break}}updateParams(t,e){switch(t){case Ft.FREETEXT_SIZE:this.#r(e);break;case Ft.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Ft.FREETEXT_SIZE,$e._defaultFontSize],[Ft.FREETEXT_COLOR,$e._defaultColor||vt._defaultLineColor]]}get propertiesToUpdate(){return[[Ft.FREETEXT_SIZE,this.#n],[Ft.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new jo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ft.FREETEXT_COLOR}#r(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=r=>{this.color=r,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-$e._internalPadding*t,-($e._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push($e.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const n=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){$e._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[m,v]=this.pageTranslation;let y,A;switch(this.rotation){case 0:y=t+(l[0]-m)/f,A=e+this.height-(l[1]-v)/p;break;case 90:y=t+(l[0]-m)/f,A=e-(l[1]-v)/p,[u,d]=[d,-u];break;case 180:y=t-this.width+(l[0]-m)/f,A=e-(l[1]-v)/p,[u,d]=[-u,-d];break;case 270:y=t+(l[0]-m-this.height*p)/f,A=e+(l[1]-v-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(y*r,A*o,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ac,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=$e.#h(e.getData("text")||"").replaceAll(Ac,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const y=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(Ac,"")),y!==this.editorDiv){let A=f;for(const S of this.editorDiv.childNodes){if(S===y){A=p;continue}A.push($e.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(Ac,""))}else if(u===this.editorDiv){let y=f,A=0;for(const S of this.editorDiv.childNodes)A++===d&&(y=p),y.push($e.#c(S))}this.#t=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#l();const m=new Range;let v=Math.sumPrecise(f.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const A=y.nodeValue.length;if(v<=A){m.setStart(y,v),m.setEnd(y,v);break}v-=A}o.removeAllRanges(),o.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=$e._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let r=null;if(t instanceof F0){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:p,popupRef:m,richText:v,contentsObj:y,creationDate:A,modificationDate:S},textContent:E,textPosition:w,parent:{page:{pageNumber:T}}}=t;if(!E||E.length===0)return null;r=t={annotationType:Ct.FREETEXT,color:Array.from(u),fontSize:l,value:E.join(`
`),position:w,pageIndex:T-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:y?.str||null,richText:v,creationDate:A,modificationDate:S}}const o=await super.deserialize(t,e,n);return o.#n=t.fontSize,o.color=ct.makeHexColor(...t.color),o.#t=$e.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,u)=>l!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class ht{static PRECISION=1e-4;toSVGPath(){Zt("Abstract method `toSVGPath` must be implemented.")}get box(){Zt("Abstract getter `box` must be implemented.")}serialize(t,e){Zt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u]*r,l[u+1]=n+t[u+1]*o;return l}static _rescaleAndSwap(t,e,n,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u+1]*r,l[u+1]=n+t[u]*o;return l}static _translate(t,e,n,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=e+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,o){switch(o){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,o,l){return[(t+5*n)/6,(e+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}class nr{#t;#e=[];#i;#n;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=nr.#g+nr.#m;constructor({x:t,y:e},n,r,o,l,u=0){this.#t=n,this.#h=o*r,this.#n=l,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=nr.#g*r,this.#c=nr.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[n,r,o,l]=this.#t;return[(this.#s+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-r)/l,(this.#s+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-r)/l]}add({x:t,y:e}){this.#s=t,this.#o=e;const[n,r,o,l]=this.#t;let[u,d,f,p]=this.#a.subarray(8,12);const m=t-f,v=e-p,y=Math.hypot(m,v);if(y<this.#c)return!1;const A=y-this.#l,S=A/y,E=S*m,w=S*v;let T=u,x=d;u=f,d=p,f+=E,p+=w,this.#f?.push(t,e);const M=-w/A,O=E/A,k=M*this.#h,R=O*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+k,p+R],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-k,p-R],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+k,d+R],2),this.#r.push(NaN,NaN,NaN,NaN,(u+k-n)/o,(d+R-r)/l),this.#a.set([u-k,d-R],14),this.#e.push(NaN,NaN,NaN,NaN,(u-k-n)/o,(d-R-r)/l)),this.#a.set([T,x,u,d,f,p],6),!this.isEmpty()):(this.#a.set([T,x,u,d,f,p],6),Math.abs(Math.atan2(x-d,T-u)-Math.atan2(w,E))<Math.PI/2?([u,d,f,p]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+p)/2-r)/l),[u,d,T,x]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-n)/o,((x+d)/2-r)/l),!0):([T,x,u,d,f,p]=this.#a.subarray(0,6),this.#r.push(((T+5*u)/6-n)/o,((x+5*d)/6-r)/l,((5*u+f)/6-n)/o,((5*d+p)/6-r)/l,((u+f)/2-n)/o,((d+p)/2-r)/l),[f,p,u,d,T,x]=this.#a.subarray(12,18),this.#e.push(((T+5*u)/6-n)/o,((x+5*d)/6-r)/l,((5*u+f)/6-n)/o,((5*d+p)/6-r)/l,((u+f)/2-n)/o,((d+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#b();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#y(n),n.join(" ")}#b(){const[t,e,n,r]=this.#t,[o,l,u,d]=this.#p();return`M${(this.#a[2]-t)/n} ${(this.#a[3]-e)/r} L${(this.#a[4]-t)/n} ${(this.#a[5]-e)/r} L${o} ${l} L${u} ${d} L${(this.#a[16]-t)/n} ${(this.#a[17]-e)/r} L${(this.#a[14]-t)/n} ${(this.#a[15]-e)/r} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,r,o]=this.#t,l=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[d,f,p,m]=this.#p();t.push(`L${(l[0]-e)/r} ${(l[1]-n)/o} L${d} ${f} L${p} ${m} L${(u[0]-e)/r} ${(u[1]-n)/o}`)}newFreeDrawOutline(t,e,n,r,o,l){return new G0(t,e,n,r,o,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#a,[r,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,v=d.length-2;m<v;m+=2)d[m]=(this.#f[m]-r)/l,d[m+1]=(this.#f[m+1]-o)/u;if(d[d.length-2]=(this.#s-r)/l,d[d.length-1]=(this.#o-o)/u,isNaN(n[6])&&!this.isEmpty())return this.#x(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}p=this.#A(f,p);for(let m=e.length-6;m>=6;m-=6)for(let v=0;v<6;v+=2){if(isNaN(e[m+v])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[m+v],f[p+1]=e[m+v+1],p+=2}return this.#_(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#x(t){const e=this.#a,[n,r,o,l]=this.#t,[u,d,f,p]=this.#p(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-r)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-r)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-r)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-r)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#i,this.#n)}#_(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#A(t,e){const n=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[o,l,u,d]=this.#t,[f,p,m,v]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/d],e),e+=24}}class G0 extends ht{#t;#e=new Float32Array(4);#i;#n;#r;#a;#s;constructor(t,e,n,r,o,l){super(),this.#s=t,this.#r=e,this.#t=n,this.#a=r,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,p]=this.#e;for(let m=0,v=t.length;m<v;m+=2)t[m]=(t[m]-u)/f,t[m+1]=(t[m+1]-d)/p;for(let m=0,v=e.length;m<v;m+=2)e[m]=(e[m]-u)/f,e[m+1]=(e[m+1]-d)/p}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,n=this.#s.length;e<n;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,r],o){const l=n-t,u=r-e;let d,f;switch(o){case 0:d=ht._rescale(this.#s,t,r,l,-u),f=ht._rescale(this.#r,t,r,l,-u);break;case 90:d=ht._rescaleAndSwap(this.#s,t,e,l,u),f=ht._rescaleAndSwap(this.#r,t,e,l,u);break;case 180:d=ht._rescale(this.#s,n,e,-l,u),f=ht._rescale(this.#r,n,e,-l,u);break;case 270:d=ht._rescaleAndSwap(this.#s,n,r,-l,-u),f=ht._rescaleAndSwap(this.#r,n,r,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#s;let n=e[4],r=e[5];const o=[n,r,n,r];let l=n,u=r,d=n,f=r;const p=t?Math.max:Math.min,m=new Float32Array(4);for(let y=6,A=e.length;y<A;y+=6){const S=e[y+4],E=e[y+5];isNaN(e[y])?(ct.pointBoundingBox(S,E,o),u>E?(l=S,u=E):u===E&&(l=p(l,S)),f<E?(d=S,f=E):f===E&&(d=p(d,S))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,ct.bezierBoundingBox(n,r,...e.slice(y,y+6),m),ct.rectBoundingBox(m[0],m[1],m[2],m[3],o),u>m[1]?(l=m[0],u=m[1]):u===m[1]&&(l=p(l,m[0])),f<m[3]?(d=m[2],f=m[3]):f===m[3]&&(d=p(d,m[2]))),n=S,r=E}const v=this.#e;v[0]=o[0]-this.#i,v[1]=o[1]-this.#i,v[2]=o[2]-o[0]+2*this.#i,v[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,n,r,o,l=0){return new nr(t,e,n,r,o,l)}getNewOutline(t,e){const[n,r,o,l]=this.#e,[u,d,f,p]=this.#t,m=o*f,v=l*p,y=n*f+u,A=r*p+d,S=this.newOutliner({x:this.#r[0]*m+y,y:this.#r[1]*v+A},this.#t,this.#a,t,this.#n,e??this.#i);for(let E=2;E<this.#r.length;E+=2)S.add({x:this.#r[E]*m+y,y:this.#r[E+1]*v+A});return S.getOutlines()}}class xf{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,n=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:E,width:w,height:T}of t){const x=Math.floor((S-e)/l)*l,M=Math.ceil((S+w+e)/l)*l,O=Math.floor((E-e)/l)*l,k=Math.ceil((E+T+e)/l)*l,R=[x,O,k,!0],B=[M,O,k,!1];this.#n.push(R,B),ct.rectBoundingBox(x,O,M,k,o)}const u=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let m=r?-1/0:1/0,v=1/0;const y=this.#n.at(r?-1:-2),A=[y[0],y[2]];for(const S of this.#n){const[E,w,T,x]=S;!x&&r?w<v?(v=w,m=E):w===v&&(m=Math.max(m,E)):x&&!r&&(w<v?(v=w,m=E):w===v&&(m=Math.min(m,E))),S[0]=(E-f)/u,S[1]=(w-p)/d,S[2]=(T-p)/d}this.#t=new Float32Array([f,p,u,d]),this.#e=[m,v],this.#i=A}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],n=new Set;for(const l of t){const[u,d,f]=l;e.push([u,d,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,d,f,p,m]=l;n.delete(l);let v=u,y=d;for(o=[u,f],r.push(o);;){let A;if(n.has(p))A=p;else if(n.has(m))A=m;else break;n.delete(A),[u,d,f,p,m]=A,v!==u&&(o.push(v,y,u,y===d?d:f),v=u),y=y===d?f:d}o.push(v,y)}return new Sx(r,this.#t,this.#e,this.#i)}#s(t){const e=this.#r;let n=0,r=e.length-1;for(;n<=r;){const o=n+r>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:r=o-1}return r+1}#o([,t,e]){const n=this.#s(t);this.#r.splice(n,0,[t,e])}#c([,t,e]){const n=this.#s(t);for(let r=n;r<this.#r.length;r++){const[o,l]=this.#r[r];if(o!==t)break;if(o===t&&l===e){this.#r.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=this.#r[r];if(o!==t)break;if(o===t&&l===e){this.#r.splice(r,1);return}}}#l(t){const[e,n,r]=t,o=[[e,n,r]],l=this.#s(r);for(let u=0;u<l;u++){const[d,f]=this.#r[u];for(let p=0,m=o.length;p<m;p++){const[,v,y]=o[p];if(!(f<=v||y<=d)){if(v>=d){if(y>f)o[p][1]=f;else{if(m===1)return[];o.splice(p,1),p--,m--}continue}o[p][2]=d,y>f&&o.push([e,f,y])}}}return o}}class Sx extends ht{#t;#e;constructor(t,e,n,r){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[n,r]=e;t.push(`M${n} ${r}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===n?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,r],o){const l=[],u=n-t,d=r-e;for(const f of this.#e){const p=new Array(f.length);for(let m=0;m<f.length;m+=2)p[m]=t+f[m]*u,p[m+1]=r-f[m+1]*d;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Tf extends nr{newFreeDrawOutline(t,e,n,r,o,l){return new Ax(t,e,n,r,o,l)}}class Ax extends G0{newOutliner(t,e,n,r,o,l=0){return new Tf(t,e,n,r,o,l)}}class _e extends vt{#t=null;#e=0;#i;#n=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ct.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=_e.prototype;return xt(this,"_keyboardManager",new qo([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||_e._defaultColor,this.#p=t.thickness||_e._defaultThickness,this.opacity=t.opacity||_e._defaultOpacity,this.#i=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#S()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#y(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new xf(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new xf(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:r}=this.#a;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const r=1.5;if(this.#a=t.getNewOutline(this.#p/2+r,.0025),e>=0)this.#d=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:_e.#E(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:_e.#E(this.#a.box,m),path:{d:this.#a.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[m,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*v/m,this.height=d*m/v;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*v/m,this.height=d*m/v;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:p}=this.#a;this.#g=[(p[0]-o)/u,(p[1]-l)/d]}static initialize(t,e){vt.initialize(t,e),_e._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ft.HIGHLIGHT_COLOR:_e._defaultColor=e;break;case Ft.HIGHLIGHT_THICKNESS:_e._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ft.HIGHLIGHT_COLOR:this.#x(e);break;case Ft.HIGHLIGHT_THICKNESS:this.#_(e);break}}static get defaultPropertiesToUpdate(){return[[Ft.HIGHLIGHT_COLOR,_e._defaultColor],[Ft.HIGHLIGHT_THICKNESS,_e._defaultThickness]]}get propertiesToUpdate(){return[[Ft.HIGHLIGHT_COLOR,this.color||_e._defaultColor],[Ft.HIGHLIGHT_THICKNESS,this.#p||_e._defaultThickness],[Ft.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#x(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,_e._defaultOpacity),undo:e.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#_(t){const e=this.#p,n=r=>{this.#p=r,this.#A(r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new ni({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([t,e,n,r],o){switch(o){case 90:return[1-e-r,t,r,n];case 180:return[1-t-n,1-e-r,n,r];case 270:return[e,1-t-n,r,n]}return[t,e,n,r]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=_e.#E(this.#l.box,t)):n=_e.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:_e.#E(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#O.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),b0(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#O(t){_e._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:p,height:m}of o){const v=d*t+n,y=(1-f)*e+r;l[u]=l[u+4]=v,l[u+1]=l[u+3]=y,l[u+2]=l[u+6]=v+p*t,l[u+5]=l[u+7]=y-m*e,u+=8}return l}#k(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,e,{target:n,x:r,y:o}){const{x:l,y:u,width:d,height:f}=n.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),v=y=>{p.abort(),this.#I(t,y)};window.addEventListener("blur",v,{signal:m}),window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("pointerdown",ve,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",si,{signal:m}),n.addEventListener("pointermove",this.#L.bind(this,t),{signal:m}),this._freeHighlight=new Tf({x:r,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#I(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let r=null;if(t instanceof U0){const{data:{quadPoints:A,rect:S,rotation:E,id:w,color:T,opacity:x,popupRef:M,richText:O,contentsObj:k,creationDate:R,modificationDate:B},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:Ct.HIGHLIGHT,color:Array.from(T),opacity:x,quadPoints:A,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:E,annotationElementId:w,id:w,deleted:!1,popupRef:M,richText:O,comment:k?.str||null,creationDate:R,modificationDate:B}}else if(t instanceof Yf){const{data:{inkLists:A,rect:S,rotation:E,id:w,color:T,borderStyle:{rawWidth:x},popupRef:M,richText:O,contentsObj:k,creationDate:R,modificationDate:B},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:Ct.HIGHLIGHT,color:Array.from(T),thickness:x,inkLists:A,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:E,annotationElementId:w,id:w,deleted:!1,popupRef:M,richText:O,comment:k?.str||null,creationDate:R,modificationDate:B}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,e,n);f.color=ct.makeHexColor(...o),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[p,m]=f.pageDimensions,[v,y]=f.pageTranslation;if(l){const A=f.#i=[];for(let S=0;S<l.length;S+=8)A.push({x:(l[S]-v)/p,y:1-(l[S+1]-y)/m,width:(l[S+2]-l[S])/p,height:(l[S+1]-l[S+5])/m});f.#y(),f.#S(),f.rotate(f.rotation)}else if(u){f.#h=!0;const A=u[0],S={x:A[0]-v,y:m-(A[1]-y)},E=new Tf(S,[0,0,p,m],1,f.#p/2,!0,.001);for(let x=0,M=A.length;x<M;x+=2)S.x=A[x]-v,S.y=m-(A[x+1]-y),E.add(S);const{id:w,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);f.#v({highlightOutlines:E.getOutlines(),highlightId:w,clipPathId:T}),f.#S(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=vt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#B(),outlines:this.#k(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#z(n)?null:(n.id=this.annotationElementId,n)}#z(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,r)=>n!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class $0{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Zt("Not implemented")}}class $t extends vt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:n}=e.drawLayer.draw($t._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[r,o]of Object.entries(e))n.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Zt("Not implemented")}static get typesMap(){Zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&($t.#i.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,e[r]]);return t}_updateProperty(t,e,n){const r=this._drawingOptions,o=r[e],l=u=>{r.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,n,r]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,n*(l/o),r*(o/l)];case 180:return[1-t,1-e,n,r];case 270:return[1-e,t,n*(l/o),r*(o/l)];default:return[t,e,n,r]}}#d(){const{x:t,y:e,width:n,height:r,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,n*(o/l),r*(l/o)];case 180:return[1-t,1-e,n,r];case 270:return[e,1-t,n*(o/l),r*(l/o)];default:return[t,e,n,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:n,height:r,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-e-r,t,r,n];case 2:return[1-t-n,1-e-r,n,r];case 3:return[e,1-t-n,r,n];case 4:return[t,e-n*(u/d),r*(d/u),n*(u/d)];case 5:return[1-e,t,n*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-e,r*(d/u),n*(u/d)];case 7:return[e-n*(u/d),1-t-r*(d/u),n*(u/d),r*(d/u)];case 8:return[t-n,e-r,n,r];case 9:return[1-e,t-n,r,n];case 10:return[1-t,1-e,n,r];case 11:return[e-r,1-t,r,n];case 12:return[t-r*(d/u),e,r*(d/u),n*(u/d)];case 13:return[1-e-n*(u/d),t-r*(d/u),n*(u/d),r*(d/u)];case 14:return[1-t,1-e-n*(u/d),r*(d/u),n*(u/d)];case 15:return[e,1-t,n*(u/d),r*(d/u)];default:return[t,e,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,r,o){Zt("Not implemented")}static startDrawing(t,e,n,r){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=r;if(Xt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:m,height:v}=o.getBoundingClientRect(),y=$t.#n=new AbortController,A=t.combinedSignal(y);if(Xt.setPointer(f,d),window.addEventListener("pointerup",S=>{Xt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:A}),window.addEventListener("pointercancel",S=>{Xt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:A}),window.addEventListener("pointerdown",S=>{Xt.isSamePointerType(S.pointerType)&&(Xt.initializeAndAddPointerId(S.pointerId),$t.#i.isCancellable()&&($t.#i.removeLastElement(),$t.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",si,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",S=>{Xt.isSameTimeStamp(S.timeStamp)&&ve(S)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),$t.#i){t.drawLayer.updateProperties(this._currentDrawId,$t.#i.startNew(l,u,m,v,p));return}e.updateUIForDefaultProperties(this),$t.#i=this.createDrawerInstance(l,u,m,v,p),$t.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties($t.#r.toSVGProperties(),$t.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Xt.isSameTimeStamp(t.timeStamp),!$t.#i)return;const{offsetX:e,offsetY:n,pointerId:r}=t;if(Xt.isSamePointerId(r)){if(Xt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,$t.#i.add(e,n)),Xt.setTimeStamp(t.timeStamp),ve(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,$t.#i=null,$t.#r=null,Xt.clearTimeStamp()),$t.#n&&($t.#n.abort(),$t.#n=null,Xt.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,$t.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=$t.#i,r=this._currentDrawId,o=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Ft.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ft.DRAW_STEP),!$t.#i.isEmpty()){const{pageDimensions:[n,r],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:$t.#i.getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:$t.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,r,o,l){Zt("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:u}}=e.viewport,d=this.deserializeDraw(l,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,n);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,n]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([e,n,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class wx{#t=new Float64Array(6);#e;#i;#n;#r;#a;#s="";#o=0;#c=new Wo;#l;#d;constructor(t,e,n,r,o,l){this.#l=n,this.#d=r,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#i=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return ht._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,r,o,l]=this.#t.subarray(2,6),u=t-o,d=e-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#a.push(t,e),isNaN(n)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,o,l,t,e],0),this.#e.push(...ht.createBezierPoints(n,r,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,o){this.#l=n,this.#d=r,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#a}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let t=0,e=this.#i.length;t<e;t++){const{line:n,points:r}=this.#i[t];this.#e=n,this.#a=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=ht.svgRound(this.#e[4]),e=ht.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const r=ht.svgRound(this.#e[10]),o=ht.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${o}`,this.#o=12,this.#s}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[l,u,d,f,p,m]=this.#e.slice(r,r+6).map(ht.svgRound);n.push(`C${l} ${u} ${d} ${f} ${p} ${m}`)}return this.#s+=n.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,n,r){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,n,this.#n,this.#r,r),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Wo extends ht{#t;#e=0;#i;#n;#r;#a;#s;#o;#c;build(t,e,n,r,o,l,u){this.#r=e,this.#a=n,this.#s=r,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${ht.svgRound(e[4])} ${ht.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${ht.svgRound(e[10])} ${ht.svgRound(e[11])}`);continue}for(let n=6,r=e.length;n<r;n+=6){const[o,l,u,d,f,p]=e.subarray(n,n+6).map(ht.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,e,n,r],o){const l=[],u=[],[d,f,p,m]=this.#d();let v,y,A,S,E,w,T,x,M;switch(this.#o){case 0:M=ht._rescale,v=t,y=e+r,A=n,S=-r,E=t+d*n,w=e+(1-f-m)*r,T=t+(d+p)*n,x=e+(1-f)*r;break;case 90:M=ht._rescaleAndSwap,v=t,y=e,A=n,S=r,E=t+f*n,w=e+d*r,T=t+(f+m)*n,x=e+(d+p)*r;break;case 180:M=ht._rescale,v=t+n,y=e,A=-n,S=r,E=t+(1-d-p)*n,w=e+f*r,T=t+(1-d)*n,x=e+(f+m)*r;break;case 270:M=ht._rescaleAndSwap,v=t+n,y=e+r,A=-n,S=-r,E=t+(1-f-m)*n,w=e+(1-d-p)*r,T=t+(1-f)*n,x=e+(1-d)*r;break}for(const{line:O,points:k}of this.#n)l.push(M(O,v,y,A,S,o?new Array(O.length):null)),u.push(M(k,v,y,A,S,o?new Array(k.length):null));return{lines:l,points:u,rect:[E,w,T,x]}}static deserialize(t,e,n,r,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const p=[];let m,v,y,A,S;switch(d){case 0:S=ht._rescale,m=-t/n,v=e/r+1,y=1/n,A=-1/r;break;case 90:S=ht._rescaleAndSwap,m=-e/r,v=-t/n,y=1/r,A=1/n;break;case 180:S=ht._rescale,m=t/n+1,v=-e/r,y=-1/n,A=1/r;break;case 270:S=ht._rescaleAndSwap,m=e/r+1,v=t/n+1,y=-1/r,A=-1/n;break}if(!l){l=[];for(const w of u){const T=w.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const x=new Float32Array(3*(T-2));l.push(x);let[M,O,k,R]=w.subarray(0,4);x.set([NaN,NaN,NaN,NaN,M,O],0);for(let B=4;B<T;B+=2){const U=w[B],Z=w[B+1];x.set(ht.createBezierPoints(M,O,k,R,U,Z),(B-2)*3),[M,O,k,R]=[k,R,U,Z]}}}for(let w=0,T=l.length;w<T;w++)p.push({line:S(l[w].map(x=>x??NaN),m,v,y,A),points:S(u[w].map(x=>x??NaN),m,v,y,A)});const E=new this.prototype.constructor;return E.build(p,n,r,1,d,f,o),E}#l(t=this.#c){const e=this.#i+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#d(){const[t,e,n,r]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,n-2*o,r-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)ct.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],l=r[5];for(let u=6,d=r.length;u<d;u+=6){const[f,p,m,v,y,A]=r.subarray(u,u+6);ct.bezierBoundingBox(o,l,f,p,m,v,y,A,t),o=y,l=A}}const[e,n]=this.#l();t[0]=Qe(t[0]-e,0,1),t[1]=Qe(t[1]-n,0,1),t[2]=Qe(t[2]+e,0,1),t[3]=Qe(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[r,o]=this.#l(),[l,u]=[r-e,o-n],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,e],n){const[r,o]=this.#l();this.#r=t,this.#a=e,this.#s=n;const[l,u]=this.#l(),d=l-r,f=u-o,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ht.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,r=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:r=e/t,o=-t/e,u=t;break;case 180:n=-1,l=-1,u=t,d=e;break;case 270:r=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${n} ${r} ${o} ${l} ${ht.svgRound(u)} ${ht.svgRound(d)})`}getPathResizingSVGProperties([t,e,n,r]){const[o,l]=this.#l(),[u,d,f,p]=this.#t;if(Math.abs(f-o)<=ht.PRECISION||Math.abs(p-l)<=ht.PRECISION){const S=t+n/2-(u+f/2),E=e+r/2-(d+p/2);return{path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${E})`}}}const m=(n-2*o)/(f-2*o),v=(r-2*l)/(p-2*l),y=f/n,A=p/r;return{path:{"transform-origin":`${ht.svgRound(u)} ${ht.svgRound(d)}`,transform:`${this.rotationTransform} scale(${y} ${A}) translate(${ht.svgRound(o)} ${ht.svgRound(l)}) scale(${m} ${v}) translate(${ht.svgRound(-o)} ${ht.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,r]){const[o,l]=this.#l(),u=this.#t,[d,f,p,m]=u;if(u[0]=t,u[1]=e,u[2]=n,u[3]=r,Math.abs(p-o)<=ht.PRECISION||Math.abs(m-l)<=ht.PRECISION){const E=t+n/2-(d+p/2),w=e+r/2-(f+m/2);for(const{line:T,points:x}of this.#n)ht._translate(T,E,w,T),ht._translate(x,E,w,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(n-2*o)/(p-2*o),y=(r-2*l)/(m-2*l),A=-v*(d+o)+t+o,S=-y*(f+l)+e+l;if(v!==1||y!==1||A!==0||S!==0)for(const{line:E,points:w}of this.#n)ht._rescale(E,A,S,v,y,E),ht._rescale(w,A,S,v,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[r,o]=n,l=this.#t,u=t-l[0],d=e-l[1];if(this.#r===r&&this.#a===o)for(const{line:f,points:p}of this.#n)ht._translate(f,u,d,f),ht._translate(p,u,d,p);else{const f=this.#r/r,p=this.#a/o;this.#r=r,this.#a=o;for(const{line:m,points:v}of this.#n)ht._rescale(m,u,d,f,p,m),ht._rescale(v,u,d,f,p,v);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(t)} ${ht.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ht.svgRound(t[0])} ${ht.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class hu extends $0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new hu(this._viewParameters);return t.updateAll(this),t}}class qf extends $t{static _type="ink";static _editorType=Ct.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new hu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return xt(this,"typesMap",new Map([[Ft.INK_THICKNESS,"stroke-width"],[Ft.INK_COLOR,"stroke"],[Ft.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,r,o){return new wx(t,e,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,r,o,l){return Wo.deserialize(t,e,n,r,o,l)}static async deserialize(t,e,n){let r=null;if(t instanceof Yf){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:p,opacity:m,borderStyle:{rawWidth:v},popupRef:y,richText:A,contentsObj:S,creationDate:E,modificationDate:w},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:Ct.INK,color:Array.from(p),thickness:v,opacity:m,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:y,richText:A,comment:S?.str||null,creationDate:E,modificationDate:w}}const o=await super.deserialize(t,e,n);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new jo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ft.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=qf.getDefaultDrawingOptions({stroke:ct.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:vt._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:e,points:n}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==n||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Cf extends Wo{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const wc=8,Eo=3;class ua{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,r,o,l,u){const d=this.#e(n,r,o,l);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,m=this.#i[2*p],v=this.#i[2*p+1];if(t[(n+m)*e+(r+v)]!==0)return p}return-1}static#r(t,e,n,r,o,l,u){const d=this.#e(n,r,o,l);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,m=this.#i[2*p],v=this.#i[2*p+1];if(t[(n+m)*e+(r+v)]!==0)return p}return-1}static#a(t,e,n,r){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let u=1,d;const f=[];for(let p=1;p<n-1;p++){d=1;for(let m=1;m<e-1;m++){const v=p*e+m,y=l[v];if(y===0)continue;let A=p,S=m;if(y===1&&l[v-1]===0)u+=1,S-=1;else if(y>=1&&l[v+1]===0)u+=1,S+=1,y>1&&(d=y);else{y!==1&&(d=Math.abs(y));continue}const E=[m,p],w=S===m+1,T={isHole:w,points:E,id:u,parent:0};f.push(T);let x;for(const H of f)if(H.id===d){x=H;break}x?x.isHole?T.parent=w?x.parent:d:T.parent=w?d:x.parent:T.parent=w?d:0;const M=this.#n(l,e,p,m,A,S,0);if(M===-1){l[v]=-u,l[v]!==1&&(d=Math.abs(l[v]));continue}let O=this.#i[2*M],k=this.#i[2*M+1];const R=p+O,B=m+k;A=R,S=B;let U=p,Z=m;for(;;){const H=this.#r(l,e,U,Z,A,S,1);O=this.#i[2*H],k=this.#i[2*H+1];const it=U+O,Q=Z+k;E.push(Q,it);const nt=U*e+Z;if(l[nt+1]===0?l[nt]=-u:l[nt]===1&&(l[nt]=u),it===p&&Q===m&&U===R&&Z===B){l[v]!==1&&(d=Math.abs(l[v]));break}else A=U,S=Z,U=it,Z=Q}}}return f}static#s(t,e,n,r){if(n-e<=4){for(let R=e;R<n-2;R+=2)r.push(t[R],t[R+1]);return}const o=t[e],l=t[e+1],u=t[n-4]-o,d=t[n-3]-l,f=Math.hypot(u,d),p=u/f,m=d/f,v=p*l-m*o,y=d/u,A=1/f,S=Math.atan(y),E=Math.cos(S),w=Math.sin(S),T=A*(Math.abs(E)+Math.abs(w)),x=A*(1-T+T**2),M=Math.max(Math.atan(Math.abs(w+E)*x),Math.atan(Math.abs(w-E)*x));let O=0,k=e;for(let R=e+2;R<n-2;R+=2){const B=Math.abs(v-p*t[R+1]+m*t[R]);B>O&&(k=R,O=B)}O>(f*M)**2?(this.#s(t,e,k+2,r),this.#s(t,k,n,r)):r.push(o,l)}static#o(t){const e=[],n=t.length;return this.#s(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,r,o,l){const u=new Float32Array(l**2),d=-2*r**2,f=l>>1;for(let S=0;S<l;S++){const E=(S-f)**2;for(let w=0;w<l;w++)u[S*l+w]=Math.exp((E+(w-f)**2)/d)}const p=new Float32Array(256),m=-2*o**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/m);const v=t.length,y=new Uint8Array(v),A=new Uint32Array(256);for(let S=0;S<n;S++)for(let E=0;E<e;E++){const w=S*e+E,T=t[w];let x=0,M=0;for(let k=0;k<l;k++){const R=S+k-f;if(!(R<0||R>=n))for(let B=0;B<l;B++){const U=E+B-f;if(U<0||U>=e)continue;const Z=t[R*e+U],H=u[k*l+B]*p[Math.abs(Z-T)];x+=Z*H,M+=H}}const O=y[w]=Math.round(x/M);A[O]++}return[y,A]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let u=0,d=n.length;u<d;u++){const f=n[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const l=255/(r-o);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-o)*l;return n}static#h(t){let e,n=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(e=o;e<256;e++){const d=t[e];d>n&&(e-l>r&&(r=e-l,u=e-1),n=d,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:r}=t,{maxDim:o}=this.#t;let l=n,u=r;if(n>o||r>o){let v=n,y=r,A=Math.log2(Math.max(n,r)/o);const S=Math.floor(A);A=A===S?S-1:S;for(let w=0;w<A;w++){l=Math.ceil(v/2),u=Math.ceil(y/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(t,0,0,v,y,0,0,l,u),v=l,y=u,t!==e&&t.close(),t=T.transferToImageBitmap()}const E=Math.min(o/l,o/u);l=Math.round(l*E),u=Math.round(u*E)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[this.#d(p),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},o,l,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const m=200,v=p.font=`${n} ${r} ${m}px ${e}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:A,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:w,fontBoundingBoxDescent:T,width:x}=p.measureText(t),M=1.5,O=Math.ceil(Math.max(Math.abs(y)+Math.abs(A)||0,x)*M),k=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||m,Math.abs(w)+Math.abs(T)||m)*M);f=new OffscreenCanvas(O,k),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,O,k),p.fillStyle="black",p.fillText(t,O*(M-1)/2,k*(3-M)/2);const R=this.#d(p.getImageData(0,0,O,k).data),B=this.#l(R),U=this.#h(B),Z=this.#a(R,O,k,U);return this.processDrawnLines({lines:{curves:Z,width:O,height:k},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,o){const[l,u,d]=this.#f(t),[f,p]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#h(p),v=this.#a(f,u,d,m);return this.processDrawnLines({lines:{curves:v,width:u,height:d},pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([e,n]=[n,e]);const{curves:d,width:f,height:p}=t,m=t.thickness??0,v=[],y=Math.min(e/f,n/p),A=y/e,S=y/n,E=[];for(const{points:T}of d){const x=l?this.#o(T):T;if(!x)continue;E.push(x);const M=x.length,O=new Float32Array(M),k=new Float32Array(3*(M===2?2:M-2));if(v.push({line:k,points:O}),M===2){O[0]=x[0]*A,O[1]=x[1]*S,k.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[R,B,U,Z]=x;R*=A,B*=S,U*=A,Z*=S,O.set([R,B,U,Z],0),k.set([NaN,NaN,NaN,NaN,R,B],0);for(let H=4;H<M;H+=2){const it=O[H]=x[H]*A,Q=O[H+1]=x[H+1]*S;k.set(ht.createBezierPoints(R,B,U,Z,it,Q),(H-2)*3),[R,B,U,Z]=[U,Z,it,Q]}}if(v.length===0)return null;const w=u?new Cf:new Wo;return w.build(v,e,n,1,r,u?0:m,o),{outline:w,newCurves:E,areContours:u,thickness:m,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:o}){let l=1/0,u=-1/0,d=0;for(const x of t){d+=x.length;for(let M=2,O=x.length;M<O;M++){const k=x[M]-x[M-2];l=Math.min(l,k),u=Math.max(u,k)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,m=wc+Eo*p,v=new Uint32Array(m);let y=0;v[y++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,v[y++]=0,v[y++]=r,v[y++]=o,v[y++]=e?0:1,v[y++]=Math.max(0,Math.floor(n??0)),v[y++]=p,v[y++]=f.BYTES_PER_ELEMENT;for(const x of t)v[y++]=x.length-2,v[y++]=x[0],v[y++]=x[1];const A=new CompressionStream("deflate-raw"),S=A.writable.getWriter();await S.ready,S.write(v);const E=f.prototype.constructor;for(const x of t){const M=new E(x.length-2);for(let O=2,k=x.length;O<k;O++)M[O-2]=x[O]-x[O-2];S.write(M)}S.close();const w=await new Response(A.readable).arrayBuffer();return new Uint8Array(w).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const x of n)l||=new Uint8Array(new Uint32Array(x.buffer,0,4)[0]),l.set(x,u),u+=x.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],m=d[3],v=d[4]===0,y=d[5],A=d[6],S=d[7],E=[],w=(wc+Eo*A)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,w);break}u=0;for(let x=0;x<A;x++){const M=d[Eo*x+wc],O=new Float32Array(M+2);E.push(O);for(let k=0;k<Eo-1;k++)O[k]=d[Eo*x+wc+k+1];for(let k=0;k<M;k++)O[k+2]=O[k]+T[u++]}return{areContours:v,thickness:y,outlines:E,width:p,height:m}}catch(e){return Et(`decompressSignature: ${e}`),null}}}class Wf extends $0{constructor(){super(),super.updateProperties({fill:vt._defaultLineColor,"stroke-width":0})}clone(){const t=new Wf;return t.updateAll(this),t}}class Kf extends hu{constructor(t){super(t),super.updateProperties({stroke:vt._defaultLineColor,"stroke-width":1})}clone(){const t=new Kf(this._viewParameters);return t.updateAll(this),t}}class xi extends $t{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=Ct.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new Wf,this._defaultDrawnSignatureOptions=new Kf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return xt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:m},rotation:v}=this.parent.viewport,y=ua.processDrawnLines({lines:r,pageWidth:p,pageHeight:m,rotation:v,innerMargin:xi._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:r,height:o}=this.#i,l=Math.max(r,o),u=ua.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:n,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,r){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof Cf,this.description=n;let d;this.#t?d=xi.getDefaultDrawingOptions():(d=xi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return ua.process(t,e,n,r,xi._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return ua.extractContoursFromText(t,e,n,r,o,xi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return ua.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:xi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=xi.getDefaultDrawingOptions():(this._drawingOptions=xi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:e,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,n,r,o,l){return l.areContours?Cf.deserialize(t,e,n,r,o,l):Wo.deserialize(t,e,n,r,o,l)}static async deserialize(t,e,n){const r=await super.deserialize(t,e,n);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#n=t.uuid,r}}class _x extends vt{#t=null;#e=null;#i=null;#n=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Ct.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){vt.initialize(t,e)}static isHandlingMimeForPasting(t){return bf.includes(t)}static paste(t,e){e.pasteEditor({mode:Ct.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#m()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await n.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=bf.join(",");const e=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,r&&(this.#t=r),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:n}=this.#t;const[r,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*r,n=this.height*o;else if(e>l*r||n>l*o){const d=Math.min(l*r/e,l*o/n);e*=d,n*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/r,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:r,height:o}=this.#t,l=new Mi;let u=this.#t,d=r,f=o,p=null;if(e){if(r>e||o>e){const k=Math.min(e/r,e/o);d=Math.floor(r*k),f=Math.floor(o*k)}p=document.createElement("canvas");const v=p.width=Math.ceil(d*l.sx),y=p.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(v,y));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let S="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":$_.isDarkMode&&(S="#8f8f9d",E="#42414d");const w=15,T=w*l.sx,x=w*l.sy,M=new OffscreenCanvas(T*2,x*2),O=M.getContext("2d");O.fillStyle=S,O.fillRect(0,0,T*2,x*2),O.fillStyle=E,O.fillRect(0,0,T,x),O.fillRect(T,x,T,x),A.fillStyle=A.createPattern(M,"repeat"),A.fillRect(0,0,v,y),A.drawImage(u,0,0,u.width,u.height,0,0,v,y)}let m=null;if(n){let v,y;if(l.symmetric&&u.width<t&&u.height<t)v=u.width,y=u.height;else if(u=this.#t,r>t||o>t){const E=Math.min(t/r,t/o);v=Math.floor(r*E),y=Math.floor(o*E),this.#l||(u=this.#u(v,y))}const S=new OffscreenCanvas(v,y).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,v,y),m={width:v,height:y,data:S.getImageData(0,0,v,y).data}}return{canvas:p,width:d,height:f,imageData:m}}#u(t,e){const{width:n,height:r}=this.#t;let o=n,l=r,u=this.#t;for(;o>2*t||l>2*e;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=p.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:n,height:r}=this,o=new Mi,l=Math.ceil(n*t*o.sx),u=Math.ceil(r*e*o.sy),d=this.#s;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#b(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,r=Math.round(this.width*e*wa.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*wa.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let r=null,o=!1;if(t instanceof H0){const{data:{rect:S,rotation:E,id:w,structParent:T,popupRef:x,richText:M,contentsObj:O,creationDate:k,modificationDate:R},container:B,parent:{page:{pageNumber:U}},canvas:Z}=t;let H,it;Z?(delete t.canvas,{id:H,bitmap:it}=n.imageManager.getFromCanvas(B.id,Z),Z.remove()):(o=!0,t._hasNoCanvas=!0);const Q=(await e._structTree.getAriaAttributes(`${ha}${w}`))?.get("aria-label")||"";r=t={annotationType:Ct.STAMP,bitmapId:H,bitmap:it,pageIndex:U-1,rect:S.slice(0),rotation:E,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:T,popupRef:x,richText:M,comment:O?.str||null,creationDate:k,modificationDate:R}}const l=await super.deserialize(t,e,n),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:m,accessibilityData:v}=t;o?(n.addMissingCanvas(t.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,d&&(l.#t=d)):l.#n=f,l.#l=m;const[y,A]=l.pageDimensions;return l.width=(u[2]-u[0])/y,l.height=(u[3]-u[1])/A,v&&(l.altTextData=v),l._initialData=r,t.comment&&l.setCommentData(t),l.#d=!!r,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#b(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#y(n);return u.isSame?null:(u.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#b(!1);else if(this.#l){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return n}#y(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Wi{#t;#e=!1;#i=null;#n=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([$e,qf,_x,_e,xi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:p}){const m=[...Wi.#p.values()];if(!Wi._initialized){Wi._initialized=!0;for(const v of m)v.initialize(p,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=n,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ct.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case Ct.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ct.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ct.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ct.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Wi.#p.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#b(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#b)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#i;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const r=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,p=this.#m;if(f-p>500){this.#m=f;return}this.#m=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const v=document.elementsFromPoint(u,d);if(m.toggle("getElements",!1),!this.div.contains(v[0]))return;let y;const A=new RegExp(`^${Po}[0-9]+$`);for(const E of v)if(A.test(E.id)){y=E.id;break}if(!y)return;const S=this.#a.get(y);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:r,capture:!0})}const t=this.#i,e=[];if(t){const r=new Map,o=new Map;for(const u of this.#b){if(u.disableEditing(),!u.annotationElementId){e.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const l=t.getEditableAnnotations();for(const u of l){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of Wi.#p.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=Ie.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),_e.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),vt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Wi.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#x(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:r}=this.#_(),o=this.getNextId(),l=this.#x({parent:this,id:o,x:n,y:r,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Wi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),o=this.#x({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+r),f=(o+u)/2-t,p=(l+d)/2-e,[m,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:m,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#_(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Ie.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===Ct.STAMP||n===Ct.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Ct.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Ie.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const r=this.#u.findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ar(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ar(this.div,{rotation:n}),e!==n)for(const r of this.#a.values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ke{#t=null;#e=new Map;#i=new Map;static#n=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return xt(this,"_svgFactory",new Uc)}static#r(t,[e,n,r,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#a(){const t=Ke._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const n=Ke._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Ke._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r}#o(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)}draw(t,e=!1,n=!1){const r=Ke.#n++,o=this.#a(),l=Ke._svgFactory.createElement("defs");o.append(l);const u=Ke._svgFactory.createElement("path");l.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(r,u);const f=n?this.#s(l,d):null,p=Ke._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=Ke.#n++,r=this.#a(),o=Ke._svgFactory.createElement("defs");r.append(o);const l=Ke._svgFactory.createElement("path");o.append(l);const u=`path_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const m=Ke._svgFactory.createElement("mask");o.append(m),d=`mask_${n}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const v=Ke._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const y=Ke._svgFactory.createElement("use");m.append(y),y.setAttribute("href",`#${u}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const f=Ke._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(n,r),n}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:r,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(n&&this.#o(u,n),r&&Ke.#r(u,r),o){const{classList:d}=u;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(l){const f=u.firstElementChild.firstElementChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:xf};globalThis.pdfjsLib={AbortException:Ds,AnnotationEditorLayer:Wi,AnnotationEditorParamsType:Ft,AnnotationEditorType:Ct,AnnotationEditorUIManager:Os,AnnotationLayer:Zf,AnnotationMode:Cs,AnnotationType:Oe,applyOpacity:X_,build:JE,ColorPicker:ni,createValidAbsoluteUrl:h0,CSSConstants:V_,DOMSVGFactory:Uc,DrawLayer:Ke,FeatureTest:Ie,fetchData:Xo,findContrastColor:Y_,getDocument:_f,getFilenameFromUrl:F_,getPdfFilenameFromUrl:j_,getRGB:Zo,getUuid:f0,getXfaPageViewport:H_,GlobalWorkerOptions:va,ImageKind:Nc,InvalidPDFException:mf,isDataScheme:su,isPdfFile:If,isValidExplicitDest:sE,MathClamp:Qe,noContextMenu:si,normalizeUnicode:B_,OPS:Bo,OutputScale:Mi,PagesMapper:Vt,PasswordResponses:C_,PDFDataRangeTransport:z0,PDFDateString:gf,PDFWorker:Fo,PermissionFlag:T_,PixelsPerInch:wa,RenderingCancelledException:Bf,renderRichText:m0,ResponseException:Fc,setLayerDimensions:ar,shadow:xt,SignatureExtractor:ua,stopEvent:ve,SupportedImageMimeTypes:bf,TextLayer:In,TouchManager:ru,updateUrlHash:d0,Util:ct,VerbosityLevel:tu,version:QE,XfaLayer:p0};va.workerSrc=new URL("/assets/pdf.worker.min-wgc6bjNh.mjs",import.meta.url).toString();var Qd={exports:{}},Jd={};var ny;function Ex(){if(ny)return Jd;ny=1;var s=Jc().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Jd.c=function(t){return s.H.useMemoCache(t)},Jd}var iy;function xx(){return iy||(iy=1,Qd.exports=Ex()),Qd.exports}var ae=xx();const Tx=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cx=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),sy=s=>{const t=Cx(s);return t.charAt(0).toUpperCase()+t.slice(1)},V0=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),Mx=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Dx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ox=D.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:l,...u},d)=>D.createElement("svg",{ref:d,...Dx,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:V0("lucide",r),...!o&&!Mx(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,p])=>D.createElement(f,p)),...Array.isArray(o)?o:[o]]));const Rs=(s,t)=>{const e=D.forwardRef(({className:n,...r},o)=>D.createElement(Ox,{ref:o,iconNode:t,className:V0(`lucide-${Tx(sy(s))}`,`lucide-${s}`,n),...r}));return e.displayName=sy(s),e};const Rx=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],kx=Rs("book-open-text",Rx);const Nx=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Lx=Rs("book-open",Nx);const zx=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Px=Rs("menu",zx);const Bx=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ix=Rs("minus",Bx);const Fx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jx=Rs("plus",Fx);const Ux=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],Hx=Rs("rows-3",Ux);const Gx=[["path",{d:"M12 22v-6",key:"6o8u61"}],["path",{d:"M12 8V2",key:"1wkif3"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m15 5-3-3-3 3",key:"itvq4r"}]],$x=Rs("unfold-vertical",Gx);const Vx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X0=Rs("x",Vx);function Y0(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(t=0;t<r;t++)s[t]&&(e=Y0(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function Z0(){for(var s,t,e=0,n="",r=arguments.length;e<r;e++)(s=arguments[e])&&(t=Y0(s))&&(n&&(n+=" "),n+=t);return n}const ry=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,ay=Z0,Qf=(s,t)=>e=>{var n;if(t?.variants==null)return ay(s,e?.class,e?.className);const{variants:r,defaultVariants:o}=t,l=Object.keys(r).map(f=>{const p=e?.[f],m=o?.[f];if(p===null)return null;const v=ry(p)||ry(m);return r[f][v]}),u=e&&Object.entries(e).reduce((f,p)=>{let[m,v]=p;return v===void 0||(f[m]=v),f},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,p)=>{let{class:m,className:v,...y}=p;return Object.entries(y).every(A=>{let[S,E]=A;return Array.isArray(E)?E.includes({...o,...u}[S]):{...o,...u}[S]===E})?[...f,m,v]:f},[]);return ay(s,l,d,e?.class,e?.className)},Xx=(s,t)=>{const e=new Array(s.length+t.length);for(let n=0;n<s.length;n++)e[n]=s[n];for(let n=0;n<t.length;n++)e[s.length+n]=t[n];return e},Yx=(s,t)=>({classGroupId:s,validator:t}),q0=(s=new Map,t=null,e)=>({nextPart:s,validators:t,classGroupId:e}),Hc="-",oy=[],Zx="arbitrary..",qx=s=>{const t=Kx(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return Wx(l);const u=l.split(Hc),d=u[0]===""&&u.length>1?1:0;return W0(u,d,t)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=n[l],f=e[l];return d?f?Xx(f,d):d:f||oy}return e[l]||oy}}},W0=(s,t,e)=>{if(s.length-t===0)return e.classGroupId;const r=s[t],o=e.nextPart.get(r);if(o){const f=W0(s,t+1,o);if(f)return f}const l=e.validators;if(l===null)return;const u=t===0?s.join(Hc):s.slice(t).join(Hc),d=l.length;for(let f=0;f<d;f++){const p=l[f];if(p.validator(u))return p.classGroupId}},Wx=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=s.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?Zx+n:void 0})(),Kx=s=>{const{theme:t,classGroups:e}=s;return Qx(e,t)},Qx=(s,t)=>{const e=q0();for(const n in s){const r=s[n];Jf(r,e,n,t)}return e},Jf=(s,t,e,n)=>{const r=s.length;for(let o=0;o<r;o++){const l=s[o];Jx(l,t,e,n)}},Jx=(s,t,e,n)=>{if(typeof s=="string"){tT(s,t,e);return}if(typeof s=="function"){eT(s,t,e,n);return}nT(s,t,e,n)},tT=(s,t,e)=>{const n=s===""?t:K0(t,s);n.classGroupId=e},eT=(s,t,e,n)=>{if(iT(s)){Jf(s(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Yx(e,s))},nT=(s,t,e,n)=>{const r=Object.entries(s),o=r.length;for(let l=0;l<o;l++){const[u,d]=r[l];Jf(d,K0(t,u),e,n)}},K0=(s,t)=>{let e=s;const n=t.split(Hc),r=n.length;for(let o=0;o<r;o++){const l=n[o];let u=e.nextPart.get(l);u||(u=q0(),e.nextPart.set(l,u)),e=u}return e},iT=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,sT=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const r=(o,l)=>{e[o]=l,t++,t>s&&(t=0,n=e,e=Object.create(null))};return{get(o){let l=e[o];if(l!==void 0)return l;if((l=n[o])!==void 0)return r(o,l),l},set(o,l){o in e?e[o]=l:r(o,l)}}},Mf="!",ly=":",rT=[],cy=(s,t,e,n,r)=>({modifiers:s,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:r}),aT=s=>{const{prefix:t,experimentalParseClassName:e}=s;let n=r=>{const o=[];let l=0,u=0,d=0,f;const p=r.length;for(let S=0;S<p;S++){const E=r[S];if(l===0&&u===0){if(E===ly){o.push(r.slice(d,S)),d=S+1;continue}if(E==="/"){f=S;continue}}E==="["?l++:E==="]"?l--:E==="("?u++:E===")"&&u--}const m=o.length===0?r:r.slice(d);let v=m,y=!1;m.endsWith(Mf)?(v=m.slice(0,-1),y=!0):m.startsWith(Mf)&&(v=m.slice(1),y=!0);const A=f&&f>d?f-d:void 0;return cy(o,y,v,A)};if(t){const r=t+ly,o=n;n=l=>l.startsWith(r)?o(l.slice(r.length)):cy(rT,!1,l,void 0,!0)}if(e){const r=n;n=o=>e({className:o,parseClassName:r})}return n},oT=s=>{const t=new Map;return s.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let o=0;o<e.length;o++){const l=e[o],u=l[0]==="[",d=t.has(l);u||d?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(l)):r.push(l)}return r.length>0&&(r.sort(),n.push(...r)),n}},lT=s=>({cache:sT(s.cacheSize),parseClassName:aT(s),sortModifiers:oT(s),...qx(s)}),cT=/\s+/,uT=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:o}=t,l=[],u=s.trim().split(cT);let d="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{isExternal:m,modifiers:v,hasImportantModifier:y,baseClassName:A,maybePostfixModifierPosition:S}=e(p);if(m){d=p+(d.length>0?" "+d:d);continue}let E=!!S,w=n(E?A.substring(0,S):A);if(!w){if(!E){d=p+(d.length>0?" "+d:d);continue}if(w=n(A),!w){d=p+(d.length>0?" "+d:d);continue}E=!1}const T=v.length===0?"":v.length===1?v[0]:o(v).join(":"),x=y?T+Mf:T,M=x+w;if(l.indexOf(M)>-1)continue;l.push(M);const O=r(w,E);for(let k=0;k<O.length;++k){const R=O[k];l.push(x+R)}d=p+(d.length>0?" "+d:d)}return d},hT=(...s)=>{let t=0,e,n,r="";for(;t<s.length;)(e=s[t++])&&(n=Q0(e))&&(r&&(r+=" "),r+=n);return r},Q0=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=Q0(s[n]))&&(e&&(e+=" "),e+=t);return e},dT=(s,...t)=>{let e,n,r,o;const l=d=>{const f=t.reduce((p,m)=>m(p),s());return e=lT(f),n=e.cache.get,r=e.cache.set,o=u,u(d)},u=d=>{const f=n(d);if(f)return f;const p=uT(d,e);return r(d,p),p};return o=l,(...d)=>o(hT(...d))},fT=[],Pe=s=>{const t=e=>e[s]||fT;return t.isThemeGetter=!0,t},J0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,tS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,pT=/^\d+\/\d+$/,mT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,vT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ia=s=>pT.test(s),kt=s=>!!s&&!Number.isNaN(Number(s)),xs=s=>!!s&&Number.isInteger(Number(s)),tf=s=>s.endsWith("%")&&kt(s.slice(0,-1)),Zi=s=>mT.test(s),eS=()=>!0,ST=s=>gT.test(s)&&!bT.test(s),tp=()=>!1,AT=s=>vT.test(s),wT=s=>yT.test(s),_T=s=>!ft(s)&&!pt(s),ET=s=>ks(s,sS,tp),ft=s=>J0.test(s),er=s=>ks(s,rS,ST),uy=s=>ks(s,kT,kt),xT=s=>ks(s,oS,eS),TT=s=>ks(s,aS,tp),hy=s=>ks(s,nS,tp),CT=s=>ks(s,iS,wT),_c=s=>ks(s,lS,AT),pt=s=>tS.test(s),xo=s=>pr(s,rS),MT=s=>pr(s,aS),dy=s=>pr(s,nS),DT=s=>pr(s,sS),OT=s=>pr(s,iS),Ec=s=>pr(s,lS,!0),RT=s=>pr(s,oS,!0),ks=(s,t,e)=>{const n=J0.exec(s);return n?n[1]?t(n[1]):e(n[2]):!1},pr=(s,t,e=!1)=>{const n=tS.exec(s);return n?n[1]?t(n[1]):e:!1},nS=s=>s==="position"||s==="percentage",iS=s=>s==="image"||s==="url",sS=s=>s==="length"||s==="size"||s==="bg-size",rS=s=>s==="length",kT=s=>s==="number",aS=s=>s==="family-name",oS=s=>s==="number"||s==="weight",lS=s=>s==="shadow",NT=()=>{const s=Pe("color"),t=Pe("font"),e=Pe("text"),n=Pe("font-weight"),r=Pe("tracking"),o=Pe("leading"),l=Pe("breakpoint"),u=Pe("container"),d=Pe("spacing"),f=Pe("radius"),p=Pe("shadow"),m=Pe("inset-shadow"),v=Pe("text-shadow"),y=Pe("drop-shadow"),A=Pe("blur"),S=Pe("perspective"),E=Pe("aspect"),w=Pe("ease"),T=Pe("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...M(),pt,ft],k=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],B=()=>[pt,ft,d],U=()=>[ia,"full","auto",...B()],Z=()=>[xs,"none","subgrid",pt,ft],H=()=>["auto",{span:["full",xs,pt,ft]},xs,pt,ft],it=()=>[xs,"auto",pt,ft],Q=()=>["auto","min","max","fr",pt,ft],nt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],rt=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...B()],F=()=>[ia,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],V=()=>[s,pt,ft],lt=()=>[...M(),dy,hy,{position:[pt,ft]}],yt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",DT,ET,{size:[pt,ft]}],X=()=>[tf,xo,er],W=()=>["","none","full",f,pt,ft],st=()=>["",kt,xo,er],ut=()=>["solid","dashed","dotted","double"],gt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],at=()=>[kt,tf,dy,hy],_t=()=>["","none",A,pt,ft],wt=()=>["none",kt,pt,ft],jt=()=>["none",kt,pt,ft],Dt=()=>[kt,pt,ft],ot=()=>[ia,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Zi],breakpoint:[Zi],color:[eS],container:[Zi],"drop-shadow":[Zi],ease:["in","out","in-out"],font:[_T],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Zi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Zi],shadow:[Zi],spacing:["px",kt],text:[Zi],"text-shadow":[Zi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ia,ft,pt,E]}],container:["container"],columns:[{columns:[kt,ft,pt,u]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[xs,"auto",pt,ft]}],basis:[{basis:[ia,"full","auto",u,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[kt,ia,"auto","initial","none",ft]}],grow:[{grow:["",kt,pt,ft]}],shrink:[{shrink:["",kt,pt,ft]}],order:[{order:[xs,"first","last","none",pt,ft]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":it()}],"col-end":[{"col-end":it()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":it()}],"row-end":[{"row-end":it()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Q()}],"auto-rows":[{"auto-rows":Q()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...nt(),"normal"]}],"justify-items":[{"justify-items":[...rt(),"normal"]}],"justify-self":[{"justify-self":["auto",...rt()]}],"align-content":[{content:["normal",...nt()]}],"align-items":[{items:[...rt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...rt(),{baseline:["","last"]}]}],"place-content":[{"place-content":nt()}],"place-items":[{"place-items":[...rt(),"baseline"]}],"place-self":[{"place-self":["auto",...rt()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[u,"screen",...F()]}],"min-w":[{"min-w":[u,"screen","none",...F()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",e,xo,er]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,RT,xT]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",tf,ft]}],"font-family":[{font:[MT,TT,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,pt,ft]}],"line-clamp":[{"line-clamp":[kt,"none",pt,uy]}],leading:[{leading:[o,...B()]}],"list-image":[{"list-image":["none",pt,ft]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",pt,ft]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ut(),"wavy"]}],"text-decoration-thickness":[{decoration:[kt,"from-font","auto",pt,er]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[kt,"auto",pt,ft]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pt,ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pt,ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:lt()}],"bg-repeat":[{bg:yt()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xs,pt,ft],radial:["",pt,ft],conic:[xs,pt,ft]},OT,CT]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:W()}],"rounded-s":[{"rounded-s":W()}],"rounded-e":[{"rounded-e":W()}],"rounded-t":[{"rounded-t":W()}],"rounded-r":[{"rounded-r":W()}],"rounded-b":[{"rounded-b":W()}],"rounded-l":[{"rounded-l":W()}],"rounded-ss":[{"rounded-ss":W()}],"rounded-se":[{"rounded-se":W()}],"rounded-ee":[{"rounded-ee":W()}],"rounded-es":[{"rounded-es":W()}],"rounded-tl":[{"rounded-tl":W()}],"rounded-tr":[{"rounded-tr":W()}],"rounded-br":[{"rounded-br":W()}],"rounded-bl":[{"rounded-bl":W()}],"border-w":[{border:st()}],"border-w-x":[{"border-x":st()}],"border-w-y":[{"border-y":st()}],"border-w-s":[{"border-s":st()}],"border-w-e":[{"border-e":st()}],"border-w-t":[{"border-t":st()}],"border-w-r":[{"border-r":st()}],"border-w-b":[{"border-b":st()}],"border-w-l":[{"border-l":st()}],"divide-x":[{"divide-x":st()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":st()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ut(),"hidden","none"]}],"divide-style":[{divide:[...ut(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...ut(),"none","hidden"]}],"outline-offset":[{"outline-offset":[kt,pt,ft]}],"outline-w":[{outline:["",kt,xo,er]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",p,Ec,_c]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",m,Ec,_c]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:st()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[kt,er]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":st()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",v,Ec,_c]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[kt,pt,ft]}],"mix-blend":[{"mix-blend":[...gt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":gt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[kt]}],"mask-image-linear-from-pos":[{"mask-linear-from":at()}],"mask-image-linear-to-pos":[{"mask-linear-to":at()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":at()}],"mask-image-t-to-pos":[{"mask-t-to":at()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":at()}],"mask-image-r-to-pos":[{"mask-r-to":at()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":at()}],"mask-image-b-to-pos":[{"mask-b-to":at()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":at()}],"mask-image-l-to-pos":[{"mask-l-to":at()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":at()}],"mask-image-x-to-pos":[{"mask-x-to":at()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":at()}],"mask-image-y-to-pos":[{"mask-y-to":at()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[pt,ft]}],"mask-image-radial-from-pos":[{"mask-radial-from":at()}],"mask-image-radial-to-pos":[{"mask-radial-to":at()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[kt]}],"mask-image-conic-from-pos":[{"mask-conic-from":at()}],"mask-image-conic-to-pos":[{"mask-conic-to":at()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:lt()}],"mask-repeat":[{mask:yt()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",pt,ft]}],filter:[{filter:["","none",pt,ft]}],blur:[{blur:_t()}],brightness:[{brightness:[kt,pt,ft]}],contrast:[{contrast:[kt,pt,ft]}],"drop-shadow":[{"drop-shadow":["","none",y,Ec,_c]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",kt,pt,ft]}],"hue-rotate":[{"hue-rotate":[kt,pt,ft]}],invert:[{invert:["",kt,pt,ft]}],saturate:[{saturate:[kt,pt,ft]}],sepia:[{sepia:["",kt,pt,ft]}],"backdrop-filter":[{"backdrop-filter":["","none",pt,ft]}],"backdrop-blur":[{"backdrop-blur":_t()}],"backdrop-brightness":[{"backdrop-brightness":[kt,pt,ft]}],"backdrop-contrast":[{"backdrop-contrast":[kt,pt,ft]}],"backdrop-grayscale":[{"backdrop-grayscale":["",kt,pt,ft]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[kt,pt,ft]}],"backdrop-invert":[{"backdrop-invert":["",kt,pt,ft]}],"backdrop-opacity":[{"backdrop-opacity":[kt,pt,ft]}],"backdrop-saturate":[{"backdrop-saturate":[kt,pt,ft]}],"backdrop-sepia":[{"backdrop-sepia":["",kt,pt,ft]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",pt,ft]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[kt,"initial",pt,ft]}],ease:[{ease:["linear","initial",w,pt,ft]}],delay:[{delay:[kt,pt,ft]}],animate:[{animate:["none",T,pt,ft]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,pt,ft]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:wt()}],"rotate-x":[{"rotate-x":wt()}],"rotate-y":[{"rotate-y":wt()}],"rotate-z":[{"rotate-z":wt()}],scale:[{scale:jt()}],"scale-x":[{"scale-x":jt()}],"scale-y":[{"scale-y":jt()}],"scale-z":[{"scale-z":jt()}],"scale-3d":["scale-3d"],skew:[{skew:Dt()}],"skew-x":[{"skew-x":Dt()}],"skew-y":[{"skew-y":Dt()}],transform:[{transform:[pt,ft,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ot()}],"translate-x":[{"translate-x":ot()}],"translate-y":[{"translate-y":ot()}],"translate-z":[{"translate-z":ot()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pt,ft]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pt,ft]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[kt,xo,er,uy]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},LT=dT(NT);function dn(...s){return LT(Z0(s))}const zT=Qf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pc(s){const t=ae.c(10);let e,n,r;t[0]!==s?({className:e,variant:r,...n}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r):(e=t[1],n=t[2],r=t[3]);let o;t[4]!==e||t[5]!==r?(o=dn(zT({variant:r}),e),t[4]=e,t[5]=r,t[6]=o):o=t[6];let l;return t[7]!==n||t[8]!==o?(l=P.jsx("div",{className:o,...n}),t[7]=n,t[8]=o,t[9]=l):l=t[9],l}function fy(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function du(...s){return t=>{let e=!1;const n=s.map(r=>{const o=fy(r,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let r=0;r<n.length;r++){const o=n[r];typeof o=="function"?o():fy(s[r],null)}}}}function jn(...s){return D.useCallback(du(...s),s)}var PT=Symbol.for("react.lazy"),Gc=Pf[" use ".trim().toString()];function BT(s){return typeof s=="object"&&s!==null&&"then"in s}function cS(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===PT&&"_payload"in s&&BT(s._payload)}function uS(s){const t=FT(s),e=D.forwardRef((n,r)=>{let{children:o,...l}=n;cS(o)&&typeof Gc=="function"&&(o=Gc(o._payload));const u=D.Children.toArray(o),d=u.find(UT);if(d){const f=d.props.children,p=u.map(m=>m===d?D.Children.count(f)>1?D.Children.only(null):D.isValidElement(f)?f.props.children:null:m);return P.jsx(t,{...l,ref:r,children:D.isValidElement(f)?D.cloneElement(f,void 0,p):null})}return P.jsx(t,{...l,ref:r,children:o})});return e.displayName=`${s}.Slot`,e}var IT=uS("Slot");function FT(s){const t=D.forwardRef((e,n)=>{let{children:r,...o}=e;if(cS(r)&&typeof Gc=="function"&&(r=Gc(r._payload)),D.isValidElement(r)){const l=GT(r),u=HT(o,r.props);return r.type!==D.Fragment&&(u.ref=n?du(n,l):l),D.cloneElement(r,u)}return D.Children.count(r)>1?D.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var jT=Symbol("radix.slottable");function UT(s){return D.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===jT}function HT(s,t){const e={...t};for(const n in t){const r=s[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?e[n]=(...u)=>{const d=o(...u);return r(...u),d}:r&&(e[n]=r):n==="style"?e[n]={...r,...o}:n==="className"&&(e[n]=[r,o].filter(Boolean).join(" "))}return{...s,...e}}function GT(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}const $T=Qf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}});function Ki(s){const t=ae.c(14);let e,n,r,o,l;t[0]!==s?({className:e,variant:l,size:r,asChild:o,...n}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r,t[4]=o,t[5]=l):(e=t[1],n=t[2],r=t[3],o=t[4],l=t[5]);const d=(o===void 0?!1:o)?IT:"button";let f;t[6]!==e||t[7]!==r||t[8]!==l?(f=dn($T({variant:l,size:r,className:e})),t[6]=e,t[7]=r,t[8]=l,t[9]=f):f=t[9];let p;return t[10]!==d||t[11]!==n||t[12]!==f?(p=P.jsx(d,{className:f,...n}),t[10]=d,t[11]=n,t[12]=f,t[13]=p):p=t[13],p}const py=s=>{let t;const e=new Set,n=(f,p)=>{const m=typeof f=="function"?f(t):f;if(!Object.is(m,t)){const v=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),e.forEach(y=>y(t,v))}},r=()=>t,u={setState:n,getState:r,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=s(n,r,u);return u},VT=(s=>s?py(s):py),XT=s=>s;function YT(s,t=XT){const e=Mo.useSyncExternalStore(s.subscribe,Mo.useCallback(()=>t(s.getState()),[s,t]),Mo.useCallback(()=>t(s.getInitialState()),[s,t]));return Mo.useDebugValue(e),e}const my=s=>{const t=VT(s),e=n=>YT(t,n);return Object.assign(e,t),e},hS=(s=>s?my(s):my);function To(s,t,e){return Math.min(Math.max(s,t),e)}const Re=hS((s,t)=>({mode:"vertical",currentPage:1,numPages:1,zoomScale:1,isSpreadMode:!1,goToPageImpl:null,setNumPages:e=>{const n=Math.max(1,e);s(r=>({numPages:n,currentPage:To(r.currentPage,1,n)}))},setMode:e=>s({mode:e}),setCurrentPage:e=>{const{numPages:n}=t();s({currentPage:To(e,1,Math.max(1,n))})},setZoomScale:e=>{s({zoomScale:To(e,.5,3)})},changeZoomBy:e=>{const{zoomScale:n}=t(),r=Math.round((n+e)*100)/100;s({zoomScale:To(r,.5,3)})},setSpreadMode:e=>s({isSpreadMode:e}),goToPage:e=>{const{numPages:n,goToPageImpl:r}=t(),o=To(e,1,Math.max(1,n));s({currentPage:o}),r?.(o)},setGoToPageImpl:e=>s({goToPageImpl:e})})),ZT="pdf-viewer-cache",qT=1,xn="pdf-files",gy=5,by=300*1024*1024;let Co=null;function ep(){return typeof window<"u"&&"indexedDB"in window}function dS(s){return new Promise((t,e)=>{s.onsuccess=()=>t(s.result),s.onerror=()=>e(s.error??new Error("IndexedDB request failed"))})}function _a(s){return new Promise((t,e)=>{s.oncomplete=()=>t(),s.onabort=()=>e(s.error??new Error("IndexedDB transaction aborted")),s.onerror=()=>e(s.error??new Error("IndexedDB transaction failed"))})}function Ko(){return ep()?Co?Co.then(s=>s):(Co=new Promise((s,t)=>{const e=window.indexedDB.open(ZT,qT);e.onupgradeneeded=()=>{const n=e.result;n.objectStoreNames.contains(xn)||n.createObjectStore(xn,{keyPath:"url"}).createIndex("lastAccessed","lastAccessed",{unique:!1})},e.onsuccess=()=>s(e.result),e.onerror=()=>t(e.error??new Error("IndexedDB open failed"))}).catch(s=>{throw Co=null,s}),Co.then(s=>s)):Promise.resolve(null)}async function fS(s){const t=await Ko();if(!t)return null;const e=t.transaction(xn,"readonly"),n=e.objectStore(xn),r=await dS(n.get(s));return await _a(e),r??null}async function WT(s){const t=await Ko();if(!t)return;const e=t.transaction(xn,"readwrite");e.objectStore(xn).delete(s),await _a(e)}function pS(s){if(s.byteLength<8)return!1;const t=new Uint8Array(s),e=Math.min(t.length,1024);for(let n=0;n<=e-5;n+=1)if(t[n]===37&&t[n+1]===80&&t[n+2]===68&&t[n+3]===70&&t[n+4]===45)return!0;return!1}async function mS(s,t,e,n){const r=await Ko();if(!r)return;const o=r.transaction(xn,"readwrite"),l=o.objectStore(xn),u={url:s,data:t,etag:e,size:t.byteLength,lastAccessed:n,updatedAt:Date.now()};l.put(u),await _a(o)}async function gS(s){const t=await Ko();if(!t)return;const e=t.transaction(xn,"readwrite");e.objectStore(xn).put({...s,lastAccessed:Date.now()}),await _a(e)}async function bS(){const s=await Ko();if(!s)return;const t=s.transaction(xn,"readonly"),e=t.objectStore(xn),n=await dS(e.getAll());await _a(t);const r=n.reduce((p,m)=>p+m.size,0);if(n.length<=gy&&r<=by)return;const o=[...n].sort((p,m)=>p.lastAccessed-m.lastAccessed);let l=r;const u=[];for(const p of o){if(o.length-u.length<=gy&&l<=by)break;u.push(p.url),l-=p.size}if(u.length===0)return;const d=s.transaction(xn,"readwrite"),f=d.objectStore(xn);for(const p of u)f.delete(p);await _a(d)}async function vS(s,t){const e=new Headers;return t&&e.set("If-None-Match",t),fetch(s,{cache:"no-cache",headers:e})}async function KT(s,t){try{const e=await vS(s,t.etag);if(e.status===304){await gS(t);return}if(!e.ok)return;const n=await e.arrayBuffer();await mS(s,n,e.headers.get("etag"),Date.now()),await bS()}catch{}}async function QT(s,t){if(!t.ok)return;const e=await t.arrayBuffer();pS(e)&&(await mS(s,e,t.headers.get("etag"),Date.now()),await bS())}async function JT(s){if(!ep())return null;const t=await fS(s);return t?pS(t.data)?(KT(s,t),new Uint8Array(t.data.slice(0))):(await WT(s),null):null}async function tC(s){if(ep())try{const t=await fS(s),e=await vS(s,t?.etag??null);if(e.status===304){t&&await gS(t);return}await QT(s,e)}catch{}}const yS=D.createContext(null);function eC({url:s,children:t}){const[e,n]=D.useState(null),[r,o]=D.useState(!1),[l,u]=D.useState(null),d=D.useRef(new Map),f=D.useRef(new Map),p=Re(A=>A.setNumPages);D.useEffect(()=>{let A=!0,S=null,E=null;return o(!0),u(null),d.current.clear(),f.current.clear(),(async()=>{try{const w=await JT(s);if(!A)return;S=_f(w?{data:w}:{url:s,disableRange:!1,disableStream:!1,disableAutoFetch:!1});const T=await S.promise;if(!A){T.destroy();return}n(T),p(T.numPages),w||(E=setTimeout(()=>{tC(s)},1500))}catch(w){if(!A)return;const T=w instanceof Error?w.message:"PDF ";u(T),n(null),p(1)}finally{A&&o(!1)}})(),()=>{A=!1,E&&clearTimeout(E),S?.destroy(),n(w=>(w&&w.destroy(),null))}},[p,s]);const m=D.useCallback(A=>{if(!e)return Promise.reject(new Error("PDF is not ready"));const S=d.current.get(A);if(S)return S;const E=e.getPage(A);return d.current.set(A,E),E},[e]),v=D.useCallback(async A=>{const S=f.current.get(A);if(S)return S;const E=m(A).then(w=>{const T=w.getViewport({scale:1});return{width:T.width,height:T.height}});return f.current.set(A,E),E},[m]),y=D.useMemo(()=>({doc:e,numPages:e?.numPages??0,isLoading:r,error:l,getPage:m,getPageSize:v}),[e,l,m,v,r]);return P.jsx(yS.Provider,{value:y,children:t})}function fu(){const s=D.useContext(yS);if(!s)throw new Error("usePdf must be used inside PdfProvider");return s}function et(s,t,e){function n(u,d){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:d,constr:l,traits:new Set},enumerable:!1}),u._zod.traits.has(s))return;u._zod.traits.add(s),t(u,d);const f=l.prototype,p=Object.keys(f);for(let m=0;m<p.length;m++){const v=p[m];v in u||(u[v]=f[v].bind(u))}}const r=e?.Parent??Object;class o extends r{}Object.defineProperty(o,"name",{value:s});function l(u){var d;const f=e?.Parent?new o:this;n(f,u),(d=f._zod).deferred??(d.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(l,"init",{value:n}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>e?.Parent&&u instanceof e.Parent?!0:u?._zod?.traits?.has(s)}),Object.defineProperty(l,"name",{value:s}),l}class ya extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class SS extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const AS={};function lr(s){return AS}function wS(s){const t=Object.values(s).filter(n=>typeof n=="number");return Object.entries(s).filter(([n,r])=>t.indexOf(+n)===-1).map(([n,r])=>r)}function Df(s,t){return typeof t=="bigint"?t.toString():t}function np(s){return{get value(){{const t=s();return Object.defineProperty(this,"value",{value:t}),t}}}}function ip(s){return s==null}function sp(s){const t=s.startsWith("^")?1:0,e=s.endsWith("$")?s.length-1:s.length;return s.slice(t,e)}function nC(s,t){const e=(s.toString().split(".")[1]||"").length,n=t.toString();let r=(n.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(n)){const d=n.match(/\d?e-(\d?)/);d?.[1]&&(r=Number.parseInt(d[1]))}const o=e>r?e:r,l=Number.parseInt(s.toFixed(o).replace(".","")),u=Number.parseInt(t.toFixed(o).replace(".",""));return l%u/10**o}const vy=Symbol("evaluating");function Kt(s,t,e){let n;Object.defineProperty(s,t,{get(){if(n!==vy)return n===void 0&&(n=vy,n=e()),n},set(r){Object.defineProperty(s,t,{value:r})},configurable:!0})}function mr(s,t,e){Object.defineProperty(s,t,{value:e,writable:!0,enumerable:!0,configurable:!0})}function Ns(...s){const t={};for(const e of s){const n=Object.getOwnPropertyDescriptors(e);Object.assign(t,n)}return Object.defineProperties({},t)}function yy(s){return JSON.stringify(s)}function iC(s){return s.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const _S="captureStackTrace"in Error?Error.captureStackTrace:(...s)=>{};function $c(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}const sC=np(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const s=Function;return new s(""),!0}catch{return!1}});function Uo(s){if($c(s)===!1)return!1;const t=s.constructor;if(t===void 0||typeof t!="function")return!0;const e=t.prototype;return!($c(e)===!1||Object.prototype.hasOwnProperty.call(e,"isPrototypeOf")===!1)}function ES(s){return Uo(s)?{...s}:Array.isArray(s)?[...s]:s}const rC=new Set(["string","number","symbol"]);function pu(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ls(s,t,e){const n=new s._zod.constr(t??s._zod.def);return(!t||e?.parent)&&(n._zod.parent=s),n}function St(s){const t=s;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function aC(s){return Object.keys(s).filter(t=>s[t]._zod.optin==="optional"&&s[t]._zod.optout==="optional")}const oC={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function lC(s,t){const e=s._zod.def,n=e.checks;if(n&&n.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=Ns(s._zod.def,{get shape(){const l={};for(const u in t){if(!(u in e.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&(l[u]=e.shape[u])}return mr(this,"shape",l),l},checks:[]});return Ls(s,o)}function cC(s,t){const e=s._zod.def,n=e.checks;if(n&&n.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=Ns(s._zod.def,{get shape(){const l={...s._zod.def.shape};for(const u in t){if(!(u in e.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&delete l[u]}return mr(this,"shape",l),l},checks:[]});return Ls(s,o)}function uC(s,t){if(!Uo(t))throw new Error("Invalid input to extend: expected a plain object");const e=s._zod.def.checks;if(e&&e.length>0){const o=s._zod.def.shape;for(const l in t)if(Object.getOwnPropertyDescriptor(o,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=Ns(s._zod.def,{get shape(){const o={...s._zod.def.shape,...t};return mr(this,"shape",o),o}});return Ls(s,r)}function hC(s,t){if(!Uo(t))throw new Error("Invalid input to safeExtend: expected a plain object");const e=Ns(s._zod.def,{get shape(){const n={...s._zod.def.shape,...t};return mr(this,"shape",n),n}});return Ls(s,e)}function dC(s,t){const e=Ns(s._zod.def,{get shape(){const n={...s._zod.def.shape,...t._zod.def.shape};return mr(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Ls(s,e)}function fC(s,t,e){const r=t._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=Ns(t._zod.def,{get shape(){const u=t._zod.def.shape,d={...u};if(e)for(const f in e){if(!(f in u))throw new Error(`Unrecognized key: "${f}"`);e[f]&&(d[f]=s?new s({type:"optional",innerType:u[f]}):u[f])}else for(const f in u)d[f]=s?new s({type:"optional",innerType:u[f]}):u[f];return mr(this,"shape",d),d},checks:[]});return Ls(t,l)}function pC(s,t,e){const n=Ns(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(e)for(const l in e){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);e[l]&&(o[l]=new s({type:"nonoptional",innerType:r[l]}))}else for(const l in r)o[l]=new s({type:"nonoptional",innerType:r[l]});return mr(this,"shape",o),o}});return Ls(t,n)}function pa(s,t=0){if(s.aborted===!0)return!0;for(let e=t;e<s.issues.length;e++)if(s.issues[e]?.continue!==!0)return!0;return!1}function xS(s,t){return t.map(e=>{var n;return(n=e).path??(n.path=[]),e.path.unshift(s),e})}function xc(s){return typeof s=="string"?s:s?.message}function cr(s,t,e){const n={...s,path:s.path??[]};if(!s.message){const r=xc(s.inst?._zod.def?.error?.(s))??xc(t?.error?.(s))??xc(e.customError?.(s))??xc(e.localeError?.(s))??"Invalid input";n.message=r}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function rp(s){return Array.isArray(s)?"array":typeof s=="string"?"string":"unknown"}function Ho(...s){const[t,e,n]=s;return typeof t=="string"?{message:t,code:"custom",input:e,inst:n}:{...t}}const TS=(s,t)=>{s.name="$ZodError",Object.defineProperty(s,"_zod",{value:s._zod,enumerable:!1}),Object.defineProperty(s,"issues",{value:t,enumerable:!1}),s.message=JSON.stringify(t,Df,2),Object.defineProperty(s,"toString",{value:()=>s.message,enumerable:!1})},CS=et("$ZodError",TS),MS=et("$ZodError",TS,{Parent:Error});function mC(s,t=e=>e.message){const e={},n=[];for(const r of s.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(t(r))):n.push(t(r));return{formErrors:n,fieldErrors:e}}function gC(s,t=e=>e.message){const e={_errors:[]},n=r=>{for(const o of r.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>n({issues:l}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)e._errors.push(t(o));else{let l=e,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return n(s),e}const ap=s=>(t,e,n,r)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},l=t._zod.run({value:e,issues:[]},o);if(l instanceof Promise)throw new ya;if(l.issues.length){const u=new(r?.Err??s)(l.issues.map(d=>cr(d,o,lr())));throw _S(u,r?.callee),u}return l.value},op=s=>async(t,e,n,r)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let l=t._zod.run({value:e,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(r?.Err??s)(l.issues.map(d=>cr(d,o,lr())));throw _S(u,r?.callee),u}return l.value},mu=s=>(t,e,n)=>{const r=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:e,issues:[]},r);if(o instanceof Promise)throw new ya;return o.issues.length?{success:!1,error:new(s??CS)(o.issues.map(l=>cr(l,r,lr())))}:{success:!0,data:o.value}},bC=mu(MS),gu=s=>async(t,e,n)=>{const r=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:e,issues:[]},r);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new s(o.issues.map(l=>cr(l,r,lr())))}:{success:!0,data:o.value}},vC=gu(MS),yC=s=>(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ap(s)(t,e,r)},SC=s=>(t,e,n)=>ap(s)(t,e,n),AC=s=>async(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return op(s)(t,e,r)},wC=s=>async(t,e,n)=>op(s)(t,e,n),_C=s=>(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return mu(s)(t,e,r)},EC=s=>(t,e,n)=>mu(s)(t,e,n),xC=s=>async(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return gu(s)(t,e,r)},TC=s=>async(t,e,n)=>gu(s)(t,e,n),CC=/^[cC][^\s-]{8,}$/,MC=/^[0-9a-z]+$/,DC=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,OC=/^[0-9a-vA-V]{20}$/,RC=/^[A-Za-z0-9]{27}$/,kC=/^[a-zA-Z0-9_-]{21}$/,NC=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,LC=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Sy=s=>s?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${s}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,zC=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,PC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function BC(){return new RegExp(PC,"u")}const IC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,FC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,jC=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,UC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HC=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,DS=/^[A-Za-z0-9_-]*$/,GC=/^\+[1-9]\d{6,14}$/,OS="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$C=new RegExp(`^${OS}$`);function RS(s){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof s.precision=="number"?s.precision===-1?`${t}`:s.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${s.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function VC(s){return new RegExp(`^${RS(s)}$`)}function XC(s){const t=RS({precision:s.precision}),e=["Z"];s.local&&e.push(""),s.offset&&e.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${e.join("|")})`;return new RegExp(`^${OS}T(?:${n})$`)}const YC=s=>{const t=s?`[\\s\\S]{${s?.minimum??0},${s?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},ZC=/^-?\d+$/,qC=/^-?\d+(?:\.\d+)?$/,WC=/^[^A-Z]*$/,KC=/^[^a-z]*$/,Tn=et("$ZodCheck",(s,t)=>{var e;s._zod??(s._zod={}),s._zod.def=t,(e=s._zod).onattach??(e.onattach=[])}),kS={number:"number",bigint:"bigint",object:"date"},NS=et("$ZodCheckLessThan",(s,t)=>{Tn.init(s,t);const e=kS[typeof t.value];s._zod.onattach.push(n=>{const r=n._zod.bag,o=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),s._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:e,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:s,continue:!t.abort})}}),LS=et("$ZodCheckGreaterThan",(s,t)=>{Tn.init(s,t);const e=kS[typeof t.value];s._zod.onattach.push(n=>{const r=n._zod.bag,o=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),s._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:e,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:s,continue:!t.abort})}}),QC=et("$ZodCheckMultipleOf",(s,t)=>{Tn.init(s,t),s._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),s._zod.check=e=>{if(typeof e.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof e.value=="bigint"?e.value%t.value===BigInt(0):nC(e.value,t.value)===0)||e.issues.push({origin:typeof e.value,code:"not_multiple_of",divisor:t.value,input:e.value,inst:s,continue:!t.abort})}}),JC=et("$ZodCheckNumberFormat",(s,t)=>{Tn.init(s,t),t.format=t.format||"float64";const e=t.format?.includes("int"),n=e?"int":"number",[r,o]=oC[t.format];s._zod.onattach.push(l=>{const u=l._zod.bag;u.format=t.format,u.minimum=r,u.maximum=o,e&&(u.pattern=ZC)}),s._zod.check=l=>{const u=l.value;if(e){if(!Number.isInteger(u)){l.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:u,inst:s});return}if(!Number.isSafeInteger(u)){u>0?l.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:s,origin:n,inclusive:!0,continue:!t.abort}):l.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:s,origin:n,inclusive:!0,continue:!t.abort});return}}u<r&&l.issues.push({origin:"number",input:u,code:"too_small",minimum:r,inclusive:!0,inst:s,continue:!t.abort}),u>o&&l.issues.push({origin:"number",input:u,code:"too_big",maximum:o,inclusive:!0,inst:s,continue:!t.abort})}}),t2=et("$ZodCheckMaxLength",(s,t)=>{var e;Tn.init(s,t),(e=s._zod.def).when??(e.when=n=>{const r=n.value;return!ip(r)&&r.length!==void 0}),s._zod.onattach.push(n=>{const r=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(n._zod.bag.maximum=t.maximum)}),s._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const l=rp(r);n.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:s,continue:!t.abort})}}),e2=et("$ZodCheckMinLength",(s,t)=>{var e;Tn.init(s,t),(e=s._zod.def).when??(e.when=n=>{const r=n.value;return!ip(r)&&r.length!==void 0}),s._zod.onattach.push(n=>{const r=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(n._zod.bag.minimum=t.minimum)}),s._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const l=rp(r);n.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:s,continue:!t.abort})}}),n2=et("$ZodCheckLengthEquals",(s,t)=>{var e;Tn.init(s,t),(e=s._zod.def).when??(e.when=n=>{const r=n.value;return!ip(r)&&r.length!==void 0}),s._zod.onattach.push(n=>{const r=n._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),s._zod.check=n=>{const r=n.value,o=r.length;if(o===t.length)return;const l=rp(r),u=o>t.length;n.issues.push({origin:l,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:s,continue:!t.abort})}}),bu=et("$ZodCheckStringFormat",(s,t)=>{var e,n;Tn.init(s,t),s._zod.onattach.push(r=>{const o=r._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(e=s._zod).check??(e.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:s,continue:!t.abort})}):(n=s._zod).check??(n.check=()=>{})}),i2=et("$ZodCheckRegex",(s,t)=>{bu.init(s,t),s._zod.check=e=>{t.pattern.lastIndex=0,!t.pattern.test(e.value)&&e.issues.push({origin:"string",code:"invalid_format",format:"regex",input:e.value,pattern:t.pattern.toString(),inst:s,continue:!t.abort})}}),s2=et("$ZodCheckLowerCase",(s,t)=>{t.pattern??(t.pattern=WC),bu.init(s,t)}),r2=et("$ZodCheckUpperCase",(s,t)=>{t.pattern??(t.pattern=KC),bu.init(s,t)}),a2=et("$ZodCheckIncludes",(s,t)=>{Tn.init(s,t);const e=pu(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${e}`:e);t.pattern=n,s._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),s._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:s,continue:!t.abort})}}),o2=et("$ZodCheckStartsWith",(s,t)=>{Tn.init(s,t);const e=new RegExp(`^${pu(t.prefix)}.*`);t.pattern??(t.pattern=e),s._zod.onattach.push(n=>{const r=n._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),s._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:s,continue:!t.abort})}}),l2=et("$ZodCheckEndsWith",(s,t)=>{Tn.init(s,t);const e=new RegExp(`.*${pu(t.suffix)}$`);t.pattern??(t.pattern=e),s._zod.onattach.push(n=>{const r=n._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),s._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:s,continue:!t.abort})}}),c2=et("$ZodCheckOverwrite",(s,t)=>{Tn.init(s,t),s._zod.check=e=>{e.value=t.tx(e.value)}});class u2{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(l=>l),r=Math.min(...n.map(l=>l.length-l.trimStart().length)),o=n.map(l=>l.slice(r)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const t=Function,e=this?.args,r=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...e,r.join(`
`))}}const h2={major:4,minor:3,patch:6},ke=et("$ZodType",(s,t)=>{var e;s??(s={}),s._zod.def=t,s._zod.bag=s._zod.bag||{},s._zod.version=h2;const n=[...s._zod.def.checks??[]];s._zod.traits.has("$ZodCheck")&&n.unshift(s);for(const r of n)for(const o of r._zod.onattach)o(s);if(n.length===0)(e=s._zod).deferred??(e.deferred=[]),s._zod.deferred?.push(()=>{s._zod.run=s._zod.parse});else{const r=(l,u,d)=>{let f=pa(l),p;for(const m of u){if(m._zod.def.when){if(!m._zod.def.when(l))continue}else if(f)continue;const v=l.issues.length,y=m._zod.check(l);if(y instanceof Promise&&d?.async===!1)throw new ya;if(p||y instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await y,l.issues.length!==v&&(f||(f=pa(l,v)))});else{if(l.issues.length===v)continue;f||(f=pa(l,v))}}return p?p.then(()=>l):l},o=(l,u,d)=>{if(pa(l))return l.aborted=!0,l;const f=r(u,n,d);if(f instanceof Promise){if(d.async===!1)throw new ya;return f.then(p=>s._zod.parse(p,d))}return s._zod.parse(f,d)};s._zod.run=(l,u)=>{if(u.skipChecks)return s._zod.parse(l,u);if(u.direction==="backward"){const f=s._zod.parse({value:l.value,issues:[]},{...u,skipChecks:!0});return f instanceof Promise?f.then(p=>o(p,l,u)):o(f,l,u)}const d=s._zod.parse(l,u);if(d instanceof Promise){if(u.async===!1)throw new ya;return d.then(f=>r(f,n,u))}return r(d,n,u)}}Kt(s,"~standard",()=>({validate:r=>{try{const o=bC(s,r);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return vC(s,r).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),lp=et("$ZodString",(s,t)=>{ke.init(s,t),s._zod.pattern=[...s?._zod.bag?.patterns??[]].pop()??YC(s._zod.bag),s._zod.parse=(e,n)=>{if(t.coerce)try{e.value=String(e.value)}catch{}return typeof e.value=="string"||e.issues.push({expected:"string",code:"invalid_type",input:e.value,inst:s}),e}}),ue=et("$ZodStringFormat",(s,t)=>{bu.init(s,t),lp.init(s,t)}),d2=et("$ZodGUID",(s,t)=>{t.pattern??(t.pattern=LC),ue.init(s,t)}),f2=et("$ZodUUID",(s,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Sy(n))}else t.pattern??(t.pattern=Sy());ue.init(s,t)}),p2=et("$ZodEmail",(s,t)=>{t.pattern??(t.pattern=zC),ue.init(s,t)}),m2=et("$ZodURL",(s,t)=>{ue.init(s,t),s._zod.check=e=>{try{const n=e.value.trim(),r=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:e.value,inst:s,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:e.value,inst:s,continue:!t.abort})),t.normalize?e.value=r.href:e.value=n;return}catch{e.issues.push({code:"invalid_format",format:"url",input:e.value,inst:s,continue:!t.abort})}}}),g2=et("$ZodEmoji",(s,t)=>{t.pattern??(t.pattern=BC()),ue.init(s,t)}),b2=et("$ZodNanoID",(s,t)=>{t.pattern??(t.pattern=kC),ue.init(s,t)}),v2=et("$ZodCUID",(s,t)=>{t.pattern??(t.pattern=CC),ue.init(s,t)}),y2=et("$ZodCUID2",(s,t)=>{t.pattern??(t.pattern=MC),ue.init(s,t)}),S2=et("$ZodULID",(s,t)=>{t.pattern??(t.pattern=DC),ue.init(s,t)}),A2=et("$ZodXID",(s,t)=>{t.pattern??(t.pattern=OC),ue.init(s,t)}),w2=et("$ZodKSUID",(s,t)=>{t.pattern??(t.pattern=RC),ue.init(s,t)}),_2=et("$ZodISODateTime",(s,t)=>{t.pattern??(t.pattern=XC(t)),ue.init(s,t)}),E2=et("$ZodISODate",(s,t)=>{t.pattern??(t.pattern=$C),ue.init(s,t)}),x2=et("$ZodISOTime",(s,t)=>{t.pattern??(t.pattern=VC(t)),ue.init(s,t)}),T2=et("$ZodISODuration",(s,t)=>{t.pattern??(t.pattern=NC),ue.init(s,t)}),C2=et("$ZodIPv4",(s,t)=>{t.pattern??(t.pattern=IC),ue.init(s,t),s._zod.bag.format="ipv4"}),M2=et("$ZodIPv6",(s,t)=>{t.pattern??(t.pattern=FC),ue.init(s,t),s._zod.bag.format="ipv6",s._zod.check=e=>{try{new URL(`http://[${e.value}]`)}catch{e.issues.push({code:"invalid_format",format:"ipv6",input:e.value,inst:s,continue:!t.abort})}}}),D2=et("$ZodCIDRv4",(s,t)=>{t.pattern??(t.pattern=jC),ue.init(s,t)}),O2=et("$ZodCIDRv6",(s,t)=>{t.pattern??(t.pattern=UC),ue.init(s,t),s._zod.check=e=>{const n=e.value.split("/");try{if(n.length!==2)throw new Error;const[r,o]=n;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${r}]`)}catch{e.issues.push({code:"invalid_format",format:"cidrv6",input:e.value,inst:s,continue:!t.abort})}}});function zS(s){if(s==="")return!0;if(s.length%4!==0)return!1;try{return atob(s),!0}catch{return!1}}const R2=et("$ZodBase64",(s,t)=>{t.pattern??(t.pattern=HC),ue.init(s,t),s._zod.bag.contentEncoding="base64",s._zod.check=e=>{zS(e.value)||e.issues.push({code:"invalid_format",format:"base64",input:e.value,inst:s,continue:!t.abort})}});function k2(s){if(!DS.test(s))return!1;const t=s.replace(/[-_]/g,n=>n==="-"?"+":"/"),e=t.padEnd(Math.ceil(t.length/4)*4,"=");return zS(e)}const N2=et("$ZodBase64URL",(s,t)=>{t.pattern??(t.pattern=DS),ue.init(s,t),s._zod.bag.contentEncoding="base64url",s._zod.check=e=>{k2(e.value)||e.issues.push({code:"invalid_format",format:"base64url",input:e.value,inst:s,continue:!t.abort})}}),L2=et("$ZodE164",(s,t)=>{t.pattern??(t.pattern=GC),ue.init(s,t)});function z2(s,t=null){try{const e=s.split(".");if(e.length!==3)return!1;const[n]=e;if(!n)return!1;const r=JSON.parse(atob(n));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const P2=et("$ZodJWT",(s,t)=>{ue.init(s,t),s._zod.check=e=>{z2(e.value,t.alg)||e.issues.push({code:"invalid_format",format:"jwt",input:e.value,inst:s,continue:!t.abort})}}),PS=et("$ZodNumber",(s,t)=>{ke.init(s,t),s._zod.pattern=s._zod.bag.pattern??qC,s._zod.parse=(e,n)=>{if(t.coerce)try{e.value=Number(e.value)}catch{}const r=e.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return e;const o=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return e.issues.push({expected:"number",code:"invalid_type",input:r,inst:s,...o?{received:o}:{}}),e}}),B2=et("$ZodNumberFormat",(s,t)=>{JC.init(s,t),PS.init(s,t)}),I2=et("$ZodUnknown",(s,t)=>{ke.init(s,t),s._zod.parse=e=>e}),F2=et("$ZodNever",(s,t)=>{ke.init(s,t),s._zod.parse=(e,n)=>(e.issues.push({expected:"never",code:"invalid_type",input:e.value,inst:s}),e)});function Ay(s,t,e){s.issues.length&&t.issues.push(...xS(e,s.issues)),t.value[e]=s.value}const j2=et("$ZodArray",(s,t)=>{ke.init(s,t),s._zod.parse=(e,n)=>{const r=e.value;if(!Array.isArray(r))return e.issues.push({expected:"array",code:"invalid_type",input:r,inst:s}),e;e.value=Array(r.length);const o=[];for(let l=0;l<r.length;l++){const u=r[l],d=t.element._zod.run({value:u,issues:[]},n);d instanceof Promise?o.push(d.then(f=>Ay(f,e,l))):Ay(d,e,l)}return o.length?Promise.all(o).then(()=>e):e}});function Vc(s,t,e,n,r){if(s.issues.length){if(r&&!(e in n))return;t.issues.push(...xS(e,s.issues))}s.value===void 0?e in n&&(t.value[e]=void 0):t.value[e]=s.value}function BS(s){const t=Object.keys(s.shape);for(const n of t)if(!s.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const e=aC(s.shape);return{...s,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(e)}}function IS(s,t,e,n,r,o){const l=[],u=r.keySet,d=r.catchall._zod,f=d.def.type,p=d.optout==="optional";for(const m in t){if(u.has(m))continue;if(f==="never"){l.push(m);continue}const v=d.run({value:t[m],issues:[]},n);v instanceof Promise?s.push(v.then(y=>Vc(y,e,m,t,p))):Vc(v,e,m,t,p)}return l.length&&e.issues.push({code:"unrecognized_keys",keys:l,input:t,inst:o}),s.length?Promise.all(s).then(()=>e):e}const U2=et("$ZodObject",(s,t)=>{if(ke.init(s,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const u=t.shape;Object.defineProperty(t,"shape",{get:()=>{const d={...u};return Object.defineProperty(t,"shape",{value:d}),d}})}const n=np(()=>BS(t));Kt(s._zod,"propValues",()=>{const u=t.shape,d={};for(const f in u){const p=u[f]._zod;if(p.values){d[f]??(d[f]=new Set);for(const m of p.values)d[f].add(m)}}return d});const r=$c,o=t.catchall;let l;s._zod.parse=(u,d)=>{l??(l=n.value);const f=u.value;if(!r(f))return u.issues.push({expected:"object",code:"invalid_type",input:f,inst:s}),u;u.value={};const p=[],m=l.shape;for(const v of l.keys){const y=m[v],A=y._zod.optout==="optional",S=y._zod.run({value:f[v],issues:[]},d);S instanceof Promise?p.push(S.then(E=>Vc(E,u,v,f,A))):Vc(S,u,v,f,A)}return o?IS(p,f,u,d,n.value,s):p.length?Promise.all(p).then(()=>u):u}}),H2=et("$ZodObjectJIT",(s,t)=>{U2.init(s,t);const e=s._zod.parse,n=np(()=>BS(t)),r=v=>{const y=new u2(["shape","payload","ctx"]),A=n.value,S=x=>{const M=yy(x);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};y.write("const input = payload.value;");const E=Object.create(null);let w=0;for(const x of A.keys)E[x]=`key_${w++}`;y.write("const newResult = {};");for(const x of A.keys){const M=E[x],O=yy(x),R=v[x]?._zod?.optout==="optional";y.write(`const ${M} = ${S(x)};`),R?y.write(`
        if (${M}.issues.length) {
          if (${O} in input) {
            payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${O}, ...iss.path] : [${O}]
            })));
          }
        }
        
        if (${M}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${M}.value;
        }
        
      `):y.write(`
        if (${M}.issues.length) {
          payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        if (${M}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${M}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const T=y.compile();return(x,M)=>T(v,x,M)};let o;const l=$c,u=!AS.jitless,f=u&&sC.value,p=t.catchall;let m;s._zod.parse=(v,y)=>{m??(m=n.value);const A=v.value;return l(A)?u&&f&&y?.async===!1&&y.jitless!==!0?(o||(o=r(t.shape)),v=o(v,y),p?IS([],A,v,y,m,s):v):e(v,y):(v.issues.push({expected:"object",code:"invalid_type",input:A,inst:s}),v)}});function wy(s,t,e,n){for(const o of s)if(o.issues.length===0)return t.value=o.value,t;const r=s.filter(o=>!pa(o));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:e,errors:s.map(o=>o.issues.map(l=>cr(l,n,lr())))}),t)}const G2=et("$ZodUnion",(s,t)=>{ke.init(s,t),Kt(s._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Kt(s._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Kt(s._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),Kt(s._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${r.map(o=>sp(o.source)).join("|")})$`)}});const e=t.options.length===1,n=t.options[0]._zod.run;s._zod.parse=(r,o)=>{if(e)return n(r,o);let l=!1;const u=[];for(const d of t.options){const f=d._zod.run({value:r.value,issues:[]},o);if(f instanceof Promise)u.push(f),l=!0;else{if(f.issues.length===0)return f;u.push(f)}}return l?Promise.all(u).then(d=>wy(d,r,s,o)):wy(u,r,s,o)}}),$2=et("$ZodIntersection",(s,t)=>{ke.init(s,t),s._zod.parse=(e,n)=>{const r=e.value,o=t.left._zod.run({value:r,issues:[]},n),l=t.right._zod.run({value:r,issues:[]},n);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([d,f])=>_y(e,d,f)):_y(e,o,l)}});function Of(s,t){if(s===t)return{valid:!0,data:s};if(s instanceof Date&&t instanceof Date&&+s==+t)return{valid:!0,data:s};if(Uo(s)&&Uo(t)){const e=Object.keys(t),n=Object.keys(s).filter(o=>e.indexOf(o)!==-1),r={...s,...t};for(const o of n){const l=Of(s[o],t[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};r[o]=l.data}return{valid:!0,data:r}}if(Array.isArray(s)&&Array.isArray(t)){if(s.length!==t.length)return{valid:!1,mergeErrorPath:[]};const e=[];for(let n=0;n<s.length;n++){const r=s[n],o=t[n],l=Of(r,o);if(!l.valid)return{valid:!1,mergeErrorPath:[n,...l.mergeErrorPath]};e.push(l.data)}return{valid:!0,data:e}}return{valid:!1,mergeErrorPath:[]}}function _y(s,t,e){const n=new Map;let r;for(const u of t.issues)if(u.code==="unrecognized_keys"){r??(r=u);for(const d of u.keys)n.has(d)||n.set(d,{}),n.get(d).l=!0}else s.issues.push(u);for(const u of e.issues)if(u.code==="unrecognized_keys")for(const d of u.keys)n.has(d)||n.set(d,{}),n.get(d).r=!0;else s.issues.push(u);const o=[...n].filter(([,u])=>u.l&&u.r).map(([u])=>u);if(o.length&&r&&s.issues.push({...r,keys:o}),pa(s))return s;const l=Of(t.value,e.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return s.value=l.data,s}const V2=et("$ZodEnum",(s,t)=>{ke.init(s,t);const e=wS(t.entries),n=new Set(e);s._zod.values=n,s._zod.pattern=new RegExp(`^(${e.filter(r=>rC.has(typeof r)).map(r=>typeof r=="string"?pu(r):r.toString()).join("|")})$`),s._zod.parse=(r,o)=>{const l=r.value;return n.has(l)||r.issues.push({code:"invalid_value",values:e,input:l,inst:s}),r}}),X2=et("$ZodTransform",(s,t)=>{ke.init(s,t),s._zod.parse=(e,n)=>{if(n.direction==="backward")throw new SS(s.constructor.name);const r=t.transform(e.value,e);if(n.async)return(r instanceof Promise?r:Promise.resolve(r)).then(l=>(e.value=l,e));if(r instanceof Promise)throw new ya;return e.value=r,e}});function Ey(s,t){return s.issues.length&&t===void 0?{issues:[],value:void 0}:s}const FS=et("$ZodOptional",(s,t)=>{ke.init(s,t),s._zod.optin="optional",s._zod.optout="optional",Kt(s._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Kt(s._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${sp(e.source)})?$`):void 0}),s._zod.parse=(e,n)=>{if(t.innerType._zod.optin==="optional"){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(o=>Ey(o,e.value)):Ey(r,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,n)}}),Y2=et("$ZodExactOptional",(s,t)=>{FS.init(s,t),Kt(s._zod,"values",()=>t.innerType._zod.values),Kt(s._zod,"pattern",()=>t.innerType._zod.pattern),s._zod.parse=(e,n)=>t.innerType._zod.run(e,n)}),Z2=et("$ZodNullable",(s,t)=>{ke.init(s,t),Kt(s._zod,"optin",()=>t.innerType._zod.optin),Kt(s._zod,"optout",()=>t.innerType._zod.optout),Kt(s._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${sp(e.source)}|null)$`):void 0}),Kt(s._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),s._zod.parse=(e,n)=>e.value===null?e:t.innerType._zod.run(e,n)}),q2=et("$ZodDefault",(s,t)=>{ke.init(s,t),s._zod.optin="optional",Kt(s._zod,"values",()=>t.innerType._zod.values),s._zod.parse=(e,n)=>{if(n.direction==="backward")return t.innerType._zod.run(e,n);if(e.value===void 0)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(o=>xy(o,t)):xy(r,t)}});function xy(s,t){return s.value===void 0&&(s.value=t.defaultValue),s}const W2=et("$ZodPrefault",(s,t)=>{ke.init(s,t),s._zod.optin="optional",Kt(s._zod,"values",()=>t.innerType._zod.values),s._zod.parse=(e,n)=>(n.direction==="backward"||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),K2=et("$ZodNonOptional",(s,t)=>{ke.init(s,t),Kt(s._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(n=>n!==void 0)):void 0}),s._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(o=>Ty(o,s)):Ty(r,s)}});function Ty(s,t){return!s.issues.length&&s.value===void 0&&s.issues.push({code:"invalid_type",expected:"nonoptional",input:s.value,inst:t}),s}const Q2=et("$ZodCatch",(s,t)=>{ke.init(s,t),Kt(s._zod,"optin",()=>t.innerType._zod.optin),Kt(s._zod,"optout",()=>t.innerType._zod.optout),Kt(s._zod,"values",()=>t.innerType._zod.values),s._zod.parse=(e,n)=>{if(n.direction==="backward")return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(o=>(e.value=o.value,o.issues.length&&(e.value=t.catchValue({...e,error:{issues:o.issues.map(l=>cr(l,n,lr()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(o=>cr(o,n,lr()))},input:e.value}),e.issues=[]),e)}}),J2=et("$ZodPipe",(s,t)=>{ke.init(s,t),Kt(s._zod,"values",()=>t.in._zod.values),Kt(s._zod,"optin",()=>t.in._zod.optin),Kt(s._zod,"optout",()=>t.out._zod.optout),Kt(s._zod,"propValues",()=>t.in._zod.propValues),s._zod.parse=(e,n)=>{if(n.direction==="backward"){const o=t.out._zod.run(e,n);return o instanceof Promise?o.then(l=>Tc(l,t.in,n)):Tc(o,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(o=>Tc(o,t.out,n)):Tc(r,t.out,n)}});function Tc(s,t,e){return s.issues.length?(s.aborted=!0,s):t._zod.run({value:s.value,issues:s.issues},e)}const tM=et("$ZodReadonly",(s,t)=>{ke.init(s,t),Kt(s._zod,"propValues",()=>t.innerType._zod.propValues),Kt(s._zod,"values",()=>t.innerType._zod.values),Kt(s._zod,"optin",()=>t.innerType?._zod?.optin),Kt(s._zod,"optout",()=>t.innerType?._zod?.optout),s._zod.parse=(e,n)=>{if(n.direction==="backward")return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Cy):Cy(r)}});function Cy(s){return s.value=Object.freeze(s.value),s}const eM=et("$ZodCustom",(s,t)=>{Tn.init(s,t),ke.init(s,t),s._zod.parse=(e,n)=>e,s._zod.check=e=>{const n=e.value,r=t.fn(n);if(r instanceof Promise)return r.then(o=>My(o,e,n,s));My(r,e,n,s)}});function My(s,t,e,n){if(!s){const r={code:"custom",input:e,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(r.params=n._zod.def.params),t.issues.push(Ho(r))}}var Dy;class nM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...e){const n=e[0];return this._map.set(t,n),n&&typeof n=="object"&&"id"in n&&this._idmap.set(n.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const e=this._map.get(t);return e&&typeof e=="object"&&"id"in e&&this._idmap.delete(e.id),this._map.delete(t),this}get(t){const e=t._zod.parent;if(e){const n={...this.get(e)??{}};delete n.id;const r={...n,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function iM(){return new nM}(Dy=globalThis).__zod_globalRegistry??(Dy.__zod_globalRegistry=iM());const ko=globalThis.__zod_globalRegistry;function sM(s,t){return new s({type:"string",...St(t)})}function rM(s,t){return new s({type:"string",format:"email",check:"string_format",abort:!1,...St(t)})}function Oy(s,t){return new s({type:"string",format:"guid",check:"string_format",abort:!1,...St(t)})}function aM(s,t){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,...St(t)})}function oM(s,t){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...St(t)})}function lM(s,t){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...St(t)})}function cM(s,t){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...St(t)})}function uM(s,t){return new s({type:"string",format:"url",check:"string_format",abort:!1,...St(t)})}function hM(s,t){return new s({type:"string",format:"emoji",check:"string_format",abort:!1,...St(t)})}function dM(s,t){return new s({type:"string",format:"nanoid",check:"string_format",abort:!1,...St(t)})}function fM(s,t){return new s({type:"string",format:"cuid",check:"string_format",abort:!1,...St(t)})}function pM(s,t){return new s({type:"string",format:"cuid2",check:"string_format",abort:!1,...St(t)})}function mM(s,t){return new s({type:"string",format:"ulid",check:"string_format",abort:!1,...St(t)})}function gM(s,t){return new s({type:"string",format:"xid",check:"string_format",abort:!1,...St(t)})}function bM(s,t){return new s({type:"string",format:"ksuid",check:"string_format",abort:!1,...St(t)})}function vM(s,t){return new s({type:"string",format:"ipv4",check:"string_format",abort:!1,...St(t)})}function yM(s,t){return new s({type:"string",format:"ipv6",check:"string_format",abort:!1,...St(t)})}function SM(s,t){return new s({type:"string",format:"cidrv4",check:"string_format",abort:!1,...St(t)})}function AM(s,t){return new s({type:"string",format:"cidrv6",check:"string_format",abort:!1,...St(t)})}function wM(s,t){return new s({type:"string",format:"base64",check:"string_format",abort:!1,...St(t)})}function _M(s,t){return new s({type:"string",format:"base64url",check:"string_format",abort:!1,...St(t)})}function EM(s,t){return new s({type:"string",format:"e164",check:"string_format",abort:!1,...St(t)})}function xM(s,t){return new s({type:"string",format:"jwt",check:"string_format",abort:!1,...St(t)})}function TM(s,t){return new s({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...St(t)})}function CM(s,t){return new s({type:"string",format:"date",check:"string_format",...St(t)})}function MM(s,t){return new s({type:"string",format:"time",check:"string_format",precision:null,...St(t)})}function DM(s,t){return new s({type:"string",format:"duration",check:"string_format",...St(t)})}function OM(s,t){return new s({type:"number",checks:[],...St(t)})}function RM(s,t){return new s({type:"number",check:"number_format",abort:!1,format:"safeint",...St(t)})}function kM(s){return new s({type:"unknown"})}function NM(s,t){return new s({type:"never",...St(t)})}function Ry(s,t){return new NS({check:"less_than",...St(t),value:s,inclusive:!1})}function ef(s,t){return new NS({check:"less_than",...St(t),value:s,inclusive:!0})}function ky(s,t){return new LS({check:"greater_than",...St(t),value:s,inclusive:!1})}function nf(s,t){return new LS({check:"greater_than",...St(t),value:s,inclusive:!0})}function Ny(s,t){return new QC({check:"multiple_of",...St(t),value:s})}function jS(s,t){return new t2({check:"max_length",...St(t),maximum:s})}function Xc(s,t){return new e2({check:"min_length",...St(t),minimum:s})}function US(s,t){return new n2({check:"length_equals",...St(t),length:s})}function LM(s,t){return new i2({check:"string_format",format:"regex",...St(t),pattern:s})}function zM(s){return new s2({check:"string_format",format:"lowercase",...St(s)})}function PM(s){return new r2({check:"string_format",format:"uppercase",...St(s)})}function BM(s,t){return new a2({check:"string_format",format:"includes",...St(t),includes:s})}function IM(s,t){return new o2({check:"string_format",format:"starts_with",...St(t),prefix:s})}function FM(s,t){return new l2({check:"string_format",format:"ends_with",...St(t),suffix:s})}function Ta(s){return new c2({check:"overwrite",tx:s})}function jM(s){return Ta(t=>t.normalize(s))}function UM(){return Ta(s=>s.trim())}function HM(){return Ta(s=>s.toLowerCase())}function GM(){return Ta(s=>s.toUpperCase())}function $M(){return Ta(s=>iC(s))}function VM(s,t,e){return new s({type:"array",element:t,...St(e)})}function XM(s,t,e){return new s({type:"custom",check:"custom",fn:t,...St(e)})}function YM(s){const t=ZM(e=>(e.addIssue=n=>{if(typeof n=="string")e.issues.push(Ho(n,e.value,t._zod.def));else{const r=n;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=e.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),e.issues.push(Ho(r))}},s(e.value,e)));return t}function ZM(s,t){const e=new Tn({check:"custom",...St(t)});return e._zod.check=s,e}function HS(s){let t=s?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:s.processors??{},metadataRegistry:s?.metadata??ko,target:t,unrepresentable:s?.unrepresentable??"throw",override:s?.override??(()=>{}),io:s?.io??"output",counter:0,seen:new Map,cycles:s?.cycles??"ref",reused:s?.reused??"inline",external:s?.external??void 0}}function tn(s,t,e={path:[],schemaPath:[]}){var n;const r=s._zod.def,o=t.seen.get(s);if(o)return o.count++,e.schemaPath.includes(s)&&(o.cycle=e.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:e.path};t.seen.set(s,l);const u=s._zod.toJSONSchema?.();if(u)l.schema=u;else{const p={...e,schemaPath:[...e.schemaPath,s],path:e.path};if(s._zod.processJSONSchema)s._zod.processJSONSchema(t,l.schema,p);else{const v=l.schema,y=t.processors[r.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);y(s,t,v,p)}const m=s._zod.parent;m&&(l.ref||(l.ref=m),tn(m,t,p),t.seen.get(m).isParent=!0)}const d=t.metadataRegistry.get(s);return d&&Object.assign(l.schema,d),t.io==="input"&&ln(s)&&(delete l.schema.examples,delete l.schema.default),t.io==="input"&&l.schema._prefault&&((n=l.schema).default??(n.default=l.schema._prefault)),delete l.schema._prefault,t.seen.get(s).schema}function GS(s,t){const e=s.seen.get(t);if(!e)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=new Map;for(const l of s.seen.entries()){const u=s.metadataRegistry.get(l[0])?.id;if(u){const d=n.get(u);if(d&&d!==l[0])throw new Error(`Duplicate schema id "${u}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(u,l[0])}}const r=l=>{const u=s.target==="draft-2020-12"?"$defs":"definitions";if(s.external){const m=s.external.registry.get(l[0])?.id,v=s.external.uri??(A=>A);if(m)return{ref:v(m)};const y=l[1].defId??l[1].schema.id??`schema${s.counter++}`;return l[1].defId=y,{defId:y,ref:`${v("__shared")}#/${u}/${y}`}}if(l[1]===e)return{ref:"#"};const f=`#/${u}/`,p=l[1].schema.id??`__schema${s.counter++}`;return{defId:p,ref:f+p}},o=l=>{if(l[1].schema.$ref)return;const u=l[1],{ref:d,defId:f}=r(l);u.def={...u.schema},f&&(u.defId=f);const p=u.schema;for(const m in p)delete p[m];p.$ref=d};if(s.cycles==="throw")for(const l of s.seen.entries()){const u=l[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of s.seen.entries()){const u=l[1];if(t===l[0]){o(l);continue}if(s.external){const f=s.external.registry.get(l[0])?.id;if(t!==l[0]&&f){o(l);continue}}if(s.metadataRegistry.get(l[0])?.id){o(l);continue}if(u.cycle){o(l);continue}if(u.count>1&&s.reused==="ref"){o(l);continue}}}function $S(s,t){const e=s.seen.get(t);if(!e)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=l=>{const u=s.seen.get(l);if(u.ref===null)return;const d=u.def??u.schema,f={...d},p=u.ref;if(u.ref=null,p){n(p);const v=s.seen.get(p),y=v.schema;if(y.$ref&&(s.target==="draft-07"||s.target==="draft-04"||s.target==="openapi-3.0")?(d.allOf=d.allOf??[],d.allOf.push(y)):Object.assign(d,y),Object.assign(d,f),l._zod.parent===p)for(const S in d)S==="$ref"||S==="allOf"||S in f||delete d[S];if(y.$ref&&v.def)for(const S in d)S==="$ref"||S==="allOf"||S in v.def&&JSON.stringify(d[S])===JSON.stringify(v.def[S])&&delete d[S]}const m=l._zod.parent;if(m&&m!==p){n(m);const v=s.seen.get(m);if(v?.schema.$ref&&(d.$ref=v.schema.$ref,v.def))for(const y in d)y==="$ref"||y==="allOf"||y in v.def&&JSON.stringify(d[y])===JSON.stringify(v.def[y])&&delete d[y]}s.override({zodSchema:l,jsonSchema:d,path:u.path??[]})};for(const l of[...s.seen.entries()].reverse())n(l[0]);const r={};if(s.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":s.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":s.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":s.target,s.external?.uri){const l=s.external.registry.get(t)?.id;if(!l)throw new Error("Schema is missing an `id` property");r.$id=s.external.uri(l)}Object.assign(r,e.def??e.schema);const o=s.external?.defs??{};for(const l of s.seen.entries()){const u=l[1];u.def&&u.defId&&(o[u.defId]=u.def)}s.external||Object.keys(o).length>0&&(s.target==="draft-2020-12"?r.$defs=o:r.definitions=o);try{const l=JSON.parse(JSON.stringify(r));return Object.defineProperty(l,"~standard",{value:{...t["~standard"],jsonSchema:{input:Yc(t,"input",s.processors),output:Yc(t,"output",s.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function ln(s,t){const e=t??{seen:new Set};if(e.seen.has(s))return!1;e.seen.add(s);const n=s._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return ln(n.element,e);if(n.type==="set")return ln(n.valueType,e);if(n.type==="lazy")return ln(n.getter(),e);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return ln(n.innerType,e);if(n.type==="intersection")return ln(n.left,e)||ln(n.right,e);if(n.type==="record"||n.type==="map")return ln(n.keyType,e)||ln(n.valueType,e);if(n.type==="pipe")return ln(n.in,e)||ln(n.out,e);if(n.type==="object"){for(const r in n.shape)if(ln(n.shape[r],e))return!0;return!1}if(n.type==="union"){for(const r of n.options)if(ln(r,e))return!0;return!1}if(n.type==="tuple"){for(const r of n.items)if(ln(r,e))return!0;return!!(n.rest&&ln(n.rest,e))}return!1}const qM=(s,t={})=>e=>{const n=HS({...e,processors:t});return tn(s,n),GS(n,s),$S(n,s)},Yc=(s,t,e={})=>n=>{const{libraryOptions:r,target:o}=n??{},l=HS({...r??{},target:o,io:t,processors:e});return tn(s,l),GS(l,s),$S(l,s)},WM={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},KM=(s,t,e,n)=>{const r=e;r.type="string";const{minimum:o,maximum:l,format:u,patterns:d,contentEncoding:f}=s._zod.bag;if(typeof o=="number"&&(r.minLength=o),typeof l=="number"&&(r.maxLength=l),u&&(r.format=WM[u]??u,r.format===""&&delete r.format,u==="time"&&delete r.format),f&&(r.contentEncoding=f),d&&d.size>0){const p=[...d];p.length===1?r.pattern=p[0].source:p.length>1&&(r.allOf=[...p.map(m=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:m.source}))])}},QM=(s,t,e,n)=>{const r=e,{minimum:o,maximum:l,format:u,multipleOf:d,exclusiveMaximum:f,exclusiveMinimum:p}=s._zod.bag;typeof u=="string"&&u.includes("int")?r.type="integer":r.type="number",typeof p=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.minimum=p,r.exclusiveMinimum=!0):r.exclusiveMinimum=p),typeof o=="number"&&(r.minimum=o,typeof p=="number"&&t.target!=="draft-04"&&(p>=o?delete r.minimum:delete r.exclusiveMinimum)),typeof f=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.maximum=f,r.exclusiveMaximum=!0):r.exclusiveMaximum=f),typeof l=="number"&&(r.maximum=l,typeof f=="number"&&t.target!=="draft-04"&&(f<=l?delete r.maximum:delete r.exclusiveMaximum)),typeof d=="number"&&(r.multipleOf=d)},JM=(s,t,e,n)=>{e.not={}},tD=(s,t,e,n)=>{},eD=(s,t,e,n)=>{const r=s._zod.def,o=wS(r.entries);o.every(l=>typeof l=="number")&&(e.type="number"),o.every(l=>typeof l=="string")&&(e.type="string"),e.enum=o},nD=(s,t,e,n)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},iD=(s,t,e,n)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},sD=(s,t,e,n)=>{const r=e,o=s._zod.def,{minimum:l,maximum:u}=s._zod.bag;typeof l=="number"&&(r.minItems=l),typeof u=="number"&&(r.maxItems=u),r.type="array",r.items=tn(o.element,t,{...n,path:[...n.path,"items"]})},rD=(s,t,e,n)=>{const r=e,o=s._zod.def;r.type="object",r.properties={};const l=o.shape;for(const f in l)r.properties[f]=tn(l[f],t,{...n,path:[...n.path,"properties",f]});const u=new Set(Object.keys(l)),d=new Set([...u].filter(f=>{const p=o.shape[f]._zod;return t.io==="input"?p.optin===void 0:p.optout===void 0}));d.size>0&&(r.required=Array.from(d)),o.catchall?._zod.def.type==="never"?r.additionalProperties=!1:o.catchall?o.catchall&&(r.additionalProperties=tn(o.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):t.io==="output"&&(r.additionalProperties=!1)},aD=(s,t,e,n)=>{const r=s._zod.def,o=r.inclusive===!1,l=r.options.map((u,d)=>tn(u,t,{...n,path:[...n.path,o?"oneOf":"anyOf",d]}));o?e.oneOf=l:e.anyOf=l},oD=(s,t,e,n)=>{const r=s._zod.def,o=tn(r.left,t,{...n,path:[...n.path,"allOf",0]}),l=tn(r.right,t,{...n,path:[...n.path,"allOf",1]}),u=f=>"allOf"in f&&Object.keys(f).length===1,d=[...u(o)?o.allOf:[o],...u(l)?l.allOf:[l]];e.allOf=d},lD=(s,t,e,n)=>{const r=s._zod.def,o=tn(r.innerType,t,n),l=t.seen.get(s);t.target==="openapi-3.0"?(l.ref=r.innerType,e.nullable=!0):e.anyOf=[o,{type:"null"}]},cD=(s,t,e,n)=>{const r=s._zod.def;tn(r.innerType,t,n);const o=t.seen.get(s);o.ref=r.innerType},uD=(s,t,e,n)=>{const r=s._zod.def;tn(r.innerType,t,n);const o=t.seen.get(s);o.ref=r.innerType,e.default=JSON.parse(JSON.stringify(r.defaultValue))},hD=(s,t,e,n)=>{const r=s._zod.def;tn(r.innerType,t,n);const o=t.seen.get(s);o.ref=r.innerType,t.io==="input"&&(e._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},dD=(s,t,e,n)=>{const r=s._zod.def;tn(r.innerType,t,n);const o=t.seen.get(s);o.ref=r.innerType;let l;try{l=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}e.default=l},fD=(s,t,e,n)=>{const r=s._zod.def,o=t.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;tn(o,t,n);const l=t.seen.get(s);l.ref=o},pD=(s,t,e,n)=>{const r=s._zod.def;tn(r.innerType,t,n);const o=t.seen.get(s);o.ref=r.innerType,e.readOnly=!0},VS=(s,t,e,n)=>{const r=s._zod.def;tn(r.innerType,t,n);const o=t.seen.get(s);o.ref=r.innerType},mD=et("ZodISODateTime",(s,t)=>{_2.init(s,t),me.init(s,t)});function gD(s){return TM(mD,s)}const bD=et("ZodISODate",(s,t)=>{E2.init(s,t),me.init(s,t)});function vD(s){return CM(bD,s)}const yD=et("ZodISOTime",(s,t)=>{x2.init(s,t),me.init(s,t)});function SD(s){return MM(yD,s)}const AD=et("ZodISODuration",(s,t)=>{T2.init(s,t),me.init(s,t)});function wD(s){return DM(AD,s)}const _D=(s,t)=>{CS.init(s,t),s.name="ZodError",Object.defineProperties(s,{format:{value:e=>gC(s,e)},flatten:{value:e=>mC(s,e)},addIssue:{value:e=>{s.issues.push(e),s.message=JSON.stringify(s.issues,Df,2)}},addIssues:{value:e=>{s.issues.push(...e),s.message=JSON.stringify(s.issues,Df,2)}},isEmpty:{get(){return s.issues.length===0}}})},ri=et("ZodError",_D,{Parent:Error}),ED=ap(ri),xD=op(ri),TD=mu(ri),CD=gu(ri),MD=yC(ri),DD=SC(ri),OD=AC(ri),RD=wC(ri),kD=_C(ri),ND=EC(ri),LD=xC(ri),zD=TC(ri),Ne=et("ZodType",(s,t)=>(ke.init(s,t),Object.assign(s["~standard"],{jsonSchema:{input:Yc(s,"input"),output:Yc(s,"output")}}),s.toJSONSchema=qM(s,{}),s.def=t,s.type=t.type,Object.defineProperty(s,"_def",{value:t}),s.check=(...e)=>s.clone(Ns(t,{checks:[...t.checks??[],...e.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),{parent:!0}),s.with=s.check,s.clone=(e,n)=>Ls(s,e,n),s.brand=()=>s,s.register=((e,n)=>(e.add(s,n),s)),s.parse=(e,n)=>ED(s,e,n,{callee:s.parse}),s.safeParse=(e,n)=>TD(s,e,n),s.parseAsync=async(e,n)=>xD(s,e,n,{callee:s.parseAsync}),s.safeParseAsync=async(e,n)=>CD(s,e,n),s.spa=s.safeParseAsync,s.encode=(e,n)=>MD(s,e,n),s.decode=(e,n)=>DD(s,e,n),s.encodeAsync=async(e,n)=>OD(s,e,n),s.decodeAsync=async(e,n)=>RD(s,e,n),s.safeEncode=(e,n)=>kD(s,e,n),s.safeDecode=(e,n)=>ND(s,e,n),s.safeEncodeAsync=async(e,n)=>LD(s,e,n),s.safeDecodeAsync=async(e,n)=>zD(s,e,n),s.refine=(e,n)=>s.check(MO(e,n)),s.superRefine=e=>s.check(DO(e)),s.overwrite=e=>s.check(Ta(e)),s.optional=()=>By(s),s.exactOptional=()=>mO(s),s.nullable=()=>Iy(s),s.nullish=()=>By(Iy(s)),s.nonoptional=e=>AO(s,e),s.array=()=>ZS(s),s.or=e=>lO([s,e]),s.and=e=>uO(s,e),s.transform=e=>Fy(s,fO(e)),s.default=e=>vO(s,e),s.prefault=e=>SO(s,e),s.catch=e=>_O(s,e),s.pipe=e=>Fy(s,e),s.readonly=()=>TO(s),s.describe=e=>{const n=s.clone();return ko.add(n,{description:e}),n},Object.defineProperty(s,"description",{get(){return ko.get(s)?.description},configurable:!0}),s.meta=(...e)=>{if(e.length===0)return ko.get(s);const n=s.clone();return ko.add(n,e[0]),n},s.isOptional=()=>s.safeParse(void 0).success,s.isNullable=()=>s.safeParse(null).success,s.apply=e=>e(s),s)),XS=et("_ZodString",(s,t)=>{lp.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(n,r,o)=>KM(s,n,r);const e=s._zod.bag;s.format=e.format??null,s.minLength=e.minimum??null,s.maxLength=e.maximum??null,s.regex=(...n)=>s.check(LM(...n)),s.includes=(...n)=>s.check(BM(...n)),s.startsWith=(...n)=>s.check(IM(...n)),s.endsWith=(...n)=>s.check(FM(...n)),s.min=(...n)=>s.check(Xc(...n)),s.max=(...n)=>s.check(jS(...n)),s.length=(...n)=>s.check(US(...n)),s.nonempty=(...n)=>s.check(Xc(1,...n)),s.lowercase=n=>s.check(zM(n)),s.uppercase=n=>s.check(PM(n)),s.trim=()=>s.check(UM()),s.normalize=(...n)=>s.check(jM(...n)),s.toLowerCase=()=>s.check(HM()),s.toUpperCase=()=>s.check(GM()),s.slugify=()=>s.check($M())}),PD=et("ZodString",(s,t)=>{lp.init(s,t),XS.init(s,t),s.email=e=>s.check(rM(BD,e)),s.url=e=>s.check(uM(ID,e)),s.jwt=e=>s.check(xM(JD,e)),s.emoji=e=>s.check(hM(FD,e)),s.guid=e=>s.check(Oy(Ly,e)),s.uuid=e=>s.check(aM(Cc,e)),s.uuidv4=e=>s.check(oM(Cc,e)),s.uuidv6=e=>s.check(lM(Cc,e)),s.uuidv7=e=>s.check(cM(Cc,e)),s.nanoid=e=>s.check(dM(jD,e)),s.guid=e=>s.check(Oy(Ly,e)),s.cuid=e=>s.check(fM(UD,e)),s.cuid2=e=>s.check(pM(HD,e)),s.ulid=e=>s.check(mM(GD,e)),s.base64=e=>s.check(wM(WD,e)),s.base64url=e=>s.check(_M(KD,e)),s.xid=e=>s.check(gM($D,e)),s.ksuid=e=>s.check(bM(VD,e)),s.ipv4=e=>s.check(vM(XD,e)),s.ipv6=e=>s.check(yM(YD,e)),s.cidrv4=e=>s.check(SM(ZD,e)),s.cidrv6=e=>s.check(AM(qD,e)),s.e164=e=>s.check(EM(QD,e)),s.datetime=e=>s.check(gD(e)),s.date=e=>s.check(vD(e)),s.time=e=>s.check(SD(e)),s.duration=e=>s.check(wD(e))});function rn(s){return sM(PD,s)}const me=et("ZodStringFormat",(s,t)=>{ue.init(s,t),XS.init(s,t)}),BD=et("ZodEmail",(s,t)=>{p2.init(s,t),me.init(s,t)}),Ly=et("ZodGUID",(s,t)=>{d2.init(s,t),me.init(s,t)}),Cc=et("ZodUUID",(s,t)=>{f2.init(s,t),me.init(s,t)}),ID=et("ZodURL",(s,t)=>{m2.init(s,t),me.init(s,t)}),FD=et("ZodEmoji",(s,t)=>{g2.init(s,t),me.init(s,t)}),jD=et("ZodNanoID",(s,t)=>{b2.init(s,t),me.init(s,t)}),UD=et("ZodCUID",(s,t)=>{v2.init(s,t),me.init(s,t)}),HD=et("ZodCUID2",(s,t)=>{y2.init(s,t),me.init(s,t)}),GD=et("ZodULID",(s,t)=>{S2.init(s,t),me.init(s,t)}),$D=et("ZodXID",(s,t)=>{A2.init(s,t),me.init(s,t)}),VD=et("ZodKSUID",(s,t)=>{w2.init(s,t),me.init(s,t)}),XD=et("ZodIPv4",(s,t)=>{C2.init(s,t),me.init(s,t)}),YD=et("ZodIPv6",(s,t)=>{M2.init(s,t),me.init(s,t)}),ZD=et("ZodCIDRv4",(s,t)=>{D2.init(s,t),me.init(s,t)}),qD=et("ZodCIDRv6",(s,t)=>{O2.init(s,t),me.init(s,t)}),WD=et("ZodBase64",(s,t)=>{R2.init(s,t),me.init(s,t)}),KD=et("ZodBase64URL",(s,t)=>{N2.init(s,t),me.init(s,t)}),QD=et("ZodE164",(s,t)=>{L2.init(s,t),me.init(s,t)}),JD=et("ZodJWT",(s,t)=>{P2.init(s,t),me.init(s,t)}),YS=et("ZodNumber",(s,t)=>{PS.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(n,r,o)=>QM(s,n,r),s.gt=(n,r)=>s.check(ky(n,r)),s.gte=(n,r)=>s.check(nf(n,r)),s.min=(n,r)=>s.check(nf(n,r)),s.lt=(n,r)=>s.check(Ry(n,r)),s.lte=(n,r)=>s.check(ef(n,r)),s.max=(n,r)=>s.check(ef(n,r)),s.int=n=>s.check(zy(n)),s.safe=n=>s.check(zy(n)),s.positive=n=>s.check(ky(0,n)),s.nonnegative=n=>s.check(nf(0,n)),s.negative=n=>s.check(Ry(0,n)),s.nonpositive=n=>s.check(ef(0,n)),s.multipleOf=(n,r)=>s.check(Ny(n,r)),s.step=(n,r)=>s.check(Ny(n,r)),s.finite=()=>s;const e=s._zod.bag;s.minValue=Math.max(e.minimum??Number.NEGATIVE_INFINITY,e.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,s.maxValue=Math.min(e.maximum??Number.POSITIVE_INFINITY,e.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,s.isInt=(e.format??"").includes("int")||Number.isSafeInteger(e.multipleOf??.5),s.isFinite=!0,s.format=e.format??null});function tO(s){return OM(YS,s)}const eO=et("ZodNumberFormat",(s,t)=>{B2.init(s,t),YS.init(s,t)});function zy(s){return RM(eO,s)}const nO=et("ZodUnknown",(s,t)=>{I2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>tD()});function Py(){return kM(nO)}const iO=et("ZodNever",(s,t)=>{F2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>JM(s,e,n)});function sO(s){return NM(iO,s)}const rO=et("ZodArray",(s,t)=>{j2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>sD(s,e,n,r),s.element=t.element,s.min=(e,n)=>s.check(Xc(e,n)),s.nonempty=e=>s.check(Xc(1,e)),s.max=(e,n)=>s.check(jS(e,n)),s.length=(e,n)=>s.check(US(e,n)),s.unwrap=()=>s.element});function ZS(s,t){return VM(rO,s,t)}const aO=et("ZodObject",(s,t)=>{H2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>rD(s,e,n,r),Kt(s,"shape",()=>t.shape),s.keyof=()=>hO(Object.keys(s._zod.def.shape)),s.catchall=e=>s.clone({...s._zod.def,catchall:e}),s.passthrough=()=>s.clone({...s._zod.def,catchall:Py()}),s.loose=()=>s.clone({...s._zod.def,catchall:Py()}),s.strict=()=>s.clone({...s._zod.def,catchall:sO()}),s.strip=()=>s.clone({...s._zod.def,catchall:void 0}),s.extend=e=>uC(s,e),s.safeExtend=e=>hC(s,e),s.merge=e=>dC(s,e),s.pick=e=>lC(s,e),s.omit=e=>cC(s,e),s.partial=(...e)=>fC(WS,s,e[0]),s.required=(...e)=>pC(KS,s,e[0])});function qS(s,t){const e={type:"object",shape:s??{},...St(t)};return new aO(e)}const oO=et("ZodUnion",(s,t)=>{G2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>aD(s,e,n,r),s.options=t.options});function lO(s,t){return new oO({type:"union",options:s,...St(t)})}const cO=et("ZodIntersection",(s,t)=>{$2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>oD(s,e,n,r)});function uO(s,t){return new cO({type:"intersection",left:s,right:t})}const Rf=et("ZodEnum",(s,t)=>{V2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(n,r,o)=>eD(s,n,r),s.enum=t.entries,s.options=Object.values(t.entries);const e=new Set(Object.keys(t.entries));s.extract=(n,r)=>{const o={};for(const l of n)if(e.has(l))o[l]=t.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Rf({...t,checks:[],...St(r),entries:o})},s.exclude=(n,r)=>{const o={...t.entries};for(const l of n)if(e.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new Rf({...t,checks:[],...St(r),entries:o})}});function hO(s,t){const e=Array.isArray(s)?Object.fromEntries(s.map(n=>[n,n])):s;return new Rf({type:"enum",entries:e,...St(t)})}const dO=et("ZodTransform",(s,t)=>{X2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>iD(s,e),s._zod.parse=(e,n)=>{if(n.direction==="backward")throw new SS(s.constructor.name);e.addIssue=o=>{if(typeof o=="string")e.issues.push(Ho(o,e.value,t));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=e.value),l.inst??(l.inst=s),e.issues.push(Ho(l))}};const r=t.transform(e.value,e);return r instanceof Promise?r.then(o=>(e.value=o,e)):(e.value=r,e)}});function fO(s){return new dO({type:"transform",transform:s})}const WS=et("ZodOptional",(s,t)=>{FS.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>VS(s,e,n,r),s.unwrap=()=>s._zod.def.innerType});function By(s){return new WS({type:"optional",innerType:s})}const pO=et("ZodExactOptional",(s,t)=>{Y2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>VS(s,e,n,r),s.unwrap=()=>s._zod.def.innerType});function mO(s){return new pO({type:"optional",innerType:s})}const gO=et("ZodNullable",(s,t)=>{Z2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>lD(s,e,n,r),s.unwrap=()=>s._zod.def.innerType});function Iy(s){return new gO({type:"nullable",innerType:s})}const bO=et("ZodDefault",(s,t)=>{q2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>uD(s,e,n,r),s.unwrap=()=>s._zod.def.innerType,s.removeDefault=s.unwrap});function vO(s,t){return new bO({type:"default",innerType:s,get defaultValue(){return typeof t=="function"?t():ES(t)}})}const yO=et("ZodPrefault",(s,t)=>{W2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>hD(s,e,n,r),s.unwrap=()=>s._zod.def.innerType});function SO(s,t){return new yO({type:"prefault",innerType:s,get defaultValue(){return typeof t=="function"?t():ES(t)}})}const KS=et("ZodNonOptional",(s,t)=>{K2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>cD(s,e,n,r),s.unwrap=()=>s._zod.def.innerType});function AO(s,t){return new KS({type:"nonoptional",innerType:s,...St(t)})}const wO=et("ZodCatch",(s,t)=>{Q2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>dD(s,e,n,r),s.unwrap=()=>s._zod.def.innerType,s.removeCatch=s.unwrap});function _O(s,t){return new wO({type:"catch",innerType:s,catchValue:typeof t=="function"?t:()=>t})}const EO=et("ZodPipe",(s,t)=>{J2.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>fD(s,e,n,r),s.in=t.in,s.out=t.out});function Fy(s,t){return new EO({type:"pipe",in:s,out:t})}const xO=et("ZodReadonly",(s,t)=>{tM.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>pD(s,e,n,r),s.unwrap=()=>s._zod.def.innerType});function TO(s){return new xO({type:"readonly",innerType:s})}const CO=et("ZodCustom",(s,t)=>{eM.init(s,t),Ne.init(s,t),s._zod.processJSONSchema=(e,n,r)=>nD(s,e)});function MO(s,t={}){return XM(CO,s,t)}function DO(s){return YM(s)}const OO=qS({chapter:rn().min(1),page:tO().int().positive()}),RO=qS({title:rn(),authors:rn(),publisher:rn(),publication_country:rn(),language:rn(),publication_date:rn(),page_count:rn(),isbn:rn(),eisbn:rn(),genre:rn(),ndc_class:rn(),subject:rn(),content_id:rn(),downloadable_after_purchase:rn(),description:rn(),table_of_contents:ZS(OO)});function kO(s){return{title:s.title,authors:s.authors,publisher:s.publisher,publicationCountry:s.publication_country,language:s.language,publicationDate:s.publication_date,pageCount:s.page_count,isbn:s.isbn,eisbn:s.eisbn,genre:s.genre,ndcClass:s.ndc_class,subject:s.subject,contentId:s.content_id,downloadableAfterPurchase:s.downloadable_after_purchase,description:s.description,tableOfContents:s.table_of_contents.map(t=>({id:`${t.chapter}-${t.page}`,title:t.chapter,page:t.page}))}}const NO=hS(s=>({book:null,isLoading:!1,error:null,fetchBook:async t=>{s({isLoading:!0,error:null});try{const e=await fetch(t,{cache:"no-store"});if(!e.ok)throw new Error(`${t}  (${e.status})`);const n=await e.json(),r=RO.parse(n);s({book:kO(r),isLoading:!1})}catch(e){const n=e instanceof Error?e.message:`${t} `;s({error:n,isLoading:!1})}}}));var cp=u0();const LO=c0(cp);function zO(s){const t=PO(s),e=D.forwardRef((n,r)=>{const{children:o,...l}=n,u=D.Children.toArray(o),d=u.find(IO);if(d){const f=d.props.children,p=u.map(m=>m===d?D.Children.count(f)>1?D.Children.only(null):D.isValidElement(f)?f.props.children:null:m);return P.jsx(t,{...l,ref:r,children:D.isValidElement(f)?D.cloneElement(f,void 0,p):null})}return P.jsx(t,{...l,ref:r,children:o})});return e.displayName=`${s}.Slot`,e}function PO(s){const t=D.forwardRef((e,n)=>{const{children:r,...o}=e;if(D.isValidElement(r)){const l=jO(r),u=FO(o,r.props);return r.type!==D.Fragment&&(u.ref=n?du(n,l):l),D.cloneElement(r,u)}return D.Children.count(r)>1?D.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var BO=Symbol("radix.slottable");function IO(s){return D.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===BO}function FO(s,t){const e={...t};for(const n in t){const r=s[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?e[n]=(...u)=>{const d=o(...u);return r(...u),d}:r&&(e[n]=r):n==="style"?e[n]={...r,...o}:n==="className"&&(e[n]=[r,o].filter(Boolean).join(" "))}return{...s,...e}}function jO(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var UO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cn=UO.reduce((s,t)=>{const e=zO(`Primitive.${t}`),n=D.forwardRef((r,o)=>{const{asChild:l,...u}=r,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),P.jsx(d,{...u,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{});function HO(s,t){s&&cp.flushSync(()=>s.dispatchEvent(t))}var Ea=globalThis?.document?D.useLayoutEffect:()=>{};function GO(s,t){return D.useReducer((e,n)=>t[e][n]??e,s)}var zs=s=>{const{present:t,children:e}=s,n=$O(t),r=typeof e=="function"?e({present:n.isPresent}):D.Children.only(e),o=jn(n.ref,VO(r));return typeof e=="function"||n.isPresent?D.cloneElement(r,{ref:o}):null};zs.displayName="Presence";function $O(s){const[t,e]=D.useState(),n=D.useRef(null),r=D.useRef(s),o=D.useRef("none"),l=s?"mounted":"unmounted",[u,d]=GO(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const f=Mc(n.current);o.current=u==="mounted"?f:"none"},[u]),Ea(()=>{const f=n.current,p=r.current;if(p!==s){const v=o.current,y=Mc(f);s?d("MOUNT"):y==="none"||f?.display==="none"?d("UNMOUNT"):d(p&&v!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=s}},[s,d]),Ea(()=>{if(t){let f;const p=t.ownerDocument.defaultView??window,m=y=>{const S=Mc(n.current).includes(CSS.escape(y.animationName));if(y.target===t&&S&&(d("ANIMATION_END"),!r.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",f=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},v=y=>{y.target===t&&(o.current=Mc(n.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{p.clearTimeout(f),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:D.useCallback(f=>{n.current=f?getComputedStyle(f):null,e(f)},[])}}function Mc(s){return s?.animationName||"none"}function VO(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}function XO(s,t){const e=D.createContext(t),n=o=>{const{children:l,...u}=o,d=D.useMemo(()=>u,Object.values(u));return P.jsx(e.Provider,{value:d,children:l})};n.displayName=s+"Provider";function r(o){const l=D.useContext(e);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${s}\``)}return[n,r]}function QS(s,t=[]){let e=[];function n(o,l){const u=D.createContext(l),d=e.length;e=[...e,l];const f=m=>{const{scope:v,children:y,...A}=m,S=v?.[s]?.[d]||u,E=D.useMemo(()=>A,Object.values(A));return P.jsx(S.Provider,{value:E,children:y})};f.displayName=o+"Provider";function p(m,v){const y=v?.[s]?.[d]||u,A=D.useContext(y);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[f,p]}const r=()=>{const o=e.map(l=>D.createContext(l));return function(u){const d=u?.[s]||o;return D.useMemo(()=>({[`__scope${s}`]:{...u,[s]:d}}),[u,d])}};return r.scopeName=s,[n,YO(r,...t)]}function YO(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=n.reduce((u,{useScope:d,scopeName:f})=>{const m=d(o)[`__scope${f}`];return{...u,...m}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}function ii(s){const t=D.useRef(s);return D.useEffect(()=>{t.current=s}),D.useMemo(()=>(...e)=>t.current?.(...e),[])}var ZO=D.createContext(void 0);function qO(s){const t=D.useContext(ZO);return s||t||"ltr"}function WO(s,[t,e]){return Math.min(e,Math.max(t,s))}function hn(s,t,{checkForDefaultPrevented:e=!0}={}){return function(r){if(s?.(r),e===!1||!r.defaultPrevented)return t?.(r)}}function KO(s,t){return D.useReducer((e,n)=>t[e][n]??e,s)}var up="ScrollArea",[JS]=QS(up),[QO,ai]=JS(up),tA=D.forwardRef((s,t)=>{const{__scopeScrollArea:e,type:n="hover",dir:r,scrollHideDelay:o=600,...l}=s,[u,d]=D.useState(null),[f,p]=D.useState(null),[m,v]=D.useState(null),[y,A]=D.useState(null),[S,E]=D.useState(null),[w,T]=D.useState(0),[x,M]=D.useState(0),[O,k]=D.useState(!1),[R,B]=D.useState(!1),U=jn(t,H=>d(H)),Z=qO(r);return P.jsx(QO,{scope:e,type:n,dir:Z,scrollHideDelay:o,scrollArea:u,viewport:f,onViewportChange:p,content:m,onContentChange:v,scrollbarX:y,onScrollbarXChange:A,scrollbarXEnabled:O,onScrollbarXEnabledChange:k,scrollbarY:S,onScrollbarYChange:E,scrollbarYEnabled:R,onScrollbarYEnabledChange:B,onCornerWidthChange:T,onCornerHeightChange:M,children:P.jsx(Cn.div,{dir:Z,...l,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":x+"px",...s.style}})})});tA.displayName=up;var eA="ScrollAreaViewport",nA=D.forwardRef((s,t)=>{const{__scopeScrollArea:e,children:n,nonce:r,...o}=s,l=ai(eA,e),u=D.useRef(null),d=jn(t,u,l.onViewportChange);return P.jsxs(P.Fragment,{children:[P.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),P.jsx(Cn.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...s.style},children:P.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});nA.displayName=eA;var Di="ScrollAreaScrollbar",iA=D.forwardRef((s,t)=>{const{forceMount:e,...n}=s,r=ai(Di,s.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=r,u=s.orientation==="horizontal";return D.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),r.type==="hover"?P.jsx(JO,{...n,ref:t,forceMount:e}):r.type==="scroll"?P.jsx(tR,{...n,ref:t,forceMount:e}):r.type==="auto"?P.jsx(sA,{...n,ref:t,forceMount:e}):r.type==="always"?P.jsx(hp,{...n,ref:t}):null});iA.displayName=Di;var JO=D.forwardRef((s,t)=>{const{forceMount:e,...n}=s,r=ai(Di,s.__scopeScrollArea),[o,l]=D.useState(!1);return D.useEffect(()=>{const u=r.scrollArea;let d=0;if(u){const f=()=>{window.clearTimeout(d),l(!0)},p=()=>{d=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return u.addEventListener("pointerenter",f),u.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",f),u.removeEventListener("pointerleave",p)}}},[r.scrollArea,r.scrollHideDelay]),P.jsx(zs,{present:e||o,children:P.jsx(sA,{"data-state":o?"visible":"hidden",...n,ref:t})})}),tR=D.forwardRef((s,t)=>{const{forceMount:e,...n}=s,r=ai(Di,s.__scopeScrollArea),o=s.orientation==="horizontal",l=yu(()=>d("SCROLL_END"),100),[u,d]=KO("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return D.useEffect(()=>{if(u==="idle"){const f=window.setTimeout(()=>d("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(f)}},[u,r.scrollHideDelay,d]),D.useEffect(()=>{const f=r.viewport,p=o?"scrollLeft":"scrollTop";if(f){let m=f[p];const v=()=>{const y=f[p];m!==y&&(d("SCROLL"),l()),m=y};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[r.viewport,o,d,l]),P.jsx(zs,{present:e||u!=="hidden",children:P.jsx(hp,{"data-state":u==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:hn(s.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:hn(s.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),sA=D.forwardRef((s,t)=>{const e=ai(Di,s.__scopeScrollArea),{forceMount:n,...r}=s,[o,l]=D.useState(!1),u=s.orientation==="horizontal",d=yu(()=>{if(e.viewport){const f=e.viewport.offsetWidth<e.viewport.scrollWidth,p=e.viewport.offsetHeight<e.viewport.scrollHeight;l(u?f:p)}},10);return xa(e.viewport,d),xa(e.content,d),P.jsx(zs,{present:n||o,children:P.jsx(hp,{"data-state":o?"visible":"hidden",...r,ref:t})})}),hp=D.forwardRef((s,t)=>{const{orientation:e="vertical",...n}=s,r=ai(Di,s.__scopeScrollArea),o=D.useRef(null),l=D.useRef(0),[u,d]=D.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=cA(u.viewport,u.content),p={...n,sizes:u,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:v=>o.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function m(v,y){return aR(v,l.current,u,y)}return e==="horizontal"?P.jsx(eR,{...p,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const v=r.viewport.scrollLeft,y=jy(v,u,r.dir);o.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:v=>{r.viewport&&(r.viewport.scrollLeft=v)},onDragScroll:v=>{r.viewport&&(r.viewport.scrollLeft=m(v,r.dir))}}):e==="vertical"?P.jsx(nR,{...p,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const v=r.viewport.scrollTop,y=jy(v,u);o.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:v=>{r.viewport&&(r.viewport.scrollTop=v)},onDragScroll:v=>{r.viewport&&(r.viewport.scrollTop=m(v))}}):null}),eR=D.forwardRef((s,t)=>{const{sizes:e,onSizesChange:n,...r}=s,o=ai(Di,s.__scopeScrollArea),[l,u]=D.useState(),d=D.useRef(null),f=jn(t,d,o.onScrollbarXChange);return D.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),P.jsx(aA,{"data-orientation":"horizontal",...r,ref:f,sizes:e,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":vu(e)+"px",...s.style},onThumbPointerDown:p=>s.onThumbPointerDown(p.x),onDragScroll:p=>s.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(o.viewport){const v=o.viewport.scrollLeft+p.deltaX;s.onWheelScroll(v),hA(v,m)&&p.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:qc(l.paddingLeft),paddingEnd:qc(l.paddingRight)}})}})}),nR=D.forwardRef((s,t)=>{const{sizes:e,onSizesChange:n,...r}=s,o=ai(Di,s.__scopeScrollArea),[l,u]=D.useState(),d=D.useRef(null),f=jn(t,d,o.onScrollbarYChange);return D.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),P.jsx(aA,{"data-orientation":"vertical",...r,ref:f,sizes:e,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":vu(e)+"px",...s.style},onThumbPointerDown:p=>s.onThumbPointerDown(p.y),onDragScroll:p=>s.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(o.viewport){const v=o.viewport.scrollTop+p.deltaY;s.onWheelScroll(v),hA(v,m)&&p.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:qc(l.paddingTop),paddingEnd:qc(l.paddingBottom)}})}})}),[iR,rA]=JS(Di),aA=D.forwardRef((s,t)=>{const{__scopeScrollArea:e,sizes:n,hasThumb:r,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:p,onResize:m,...v}=s,y=ai(Di,e),[A,S]=D.useState(null),E=jn(t,U=>S(U)),w=D.useRef(null),T=D.useRef(""),x=y.viewport,M=n.content-n.viewport,O=ii(p),k=ii(d),R=yu(m,10);function B(U){if(w.current){const Z=U.clientX-w.current.left,H=U.clientY-w.current.top;f({x:Z,y:H})}}return D.useEffect(()=>{const U=Z=>{const H=Z.target;A?.contains(H)&&O(Z,M)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[x,A,M,O]),D.useEffect(k,[n,k]),xa(A,R),xa(y.content,R),P.jsx(iR,{scope:e,scrollbar:A,hasThumb:r,onThumbChange:ii(o),onThumbPointerUp:ii(l),onThumbPositionChange:k,onThumbPointerDown:ii(u),children:P.jsx(Cn.div,{...v,ref:E,style:{position:"absolute",...v.style},onPointerDown:hn(s.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),w.current=A.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),B(U))}),onPointerMove:hn(s.onPointerMove,B),onPointerUp:hn(s.onPointerUp,U=>{const Z=U.target;Z.hasPointerCapture(U.pointerId)&&Z.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=T.current,y.viewport&&(y.viewport.style.scrollBehavior=""),w.current=null})})})}),Zc="ScrollAreaThumb",oA=D.forwardRef((s,t)=>{const{forceMount:e,...n}=s,r=rA(Zc,s.__scopeScrollArea);return P.jsx(zs,{present:e||r.hasThumb,children:P.jsx(sR,{ref:t,...n})})}),sR=D.forwardRef((s,t)=>{const{__scopeScrollArea:e,style:n,...r}=s,o=ai(Zc,e),l=rA(Zc,e),{onThumbPositionChange:u}=l,d=jn(t,m=>l.onThumbChange(m)),f=D.useRef(void 0),p=yu(()=>{f.current&&(f.current(),f.current=void 0)},100);return D.useEffect(()=>{const m=o.viewport;if(m){const v=()=>{if(p(),!f.current){const y=oR(m,u);f.current=y,u()}};return u(),m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[o.viewport,p,u]),P.jsx(Cn.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:hn(s.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),A=m.clientX-y.left,S=m.clientY-y.top;l.onThumbPointerDown({x:A,y:S})}),onPointerUp:hn(s.onPointerUp,l.onThumbPointerUp)})});oA.displayName=Zc;var dp="ScrollAreaCorner",lA=D.forwardRef((s,t)=>{const e=ai(dp,s.__scopeScrollArea),n=!!(e.scrollbarX&&e.scrollbarY);return e.type!=="scroll"&&n?P.jsx(rR,{...s,ref:t}):null});lA.displayName=dp;var rR=D.forwardRef((s,t)=>{const{__scopeScrollArea:e,...n}=s,r=ai(dp,e),[o,l]=D.useState(0),[u,d]=D.useState(0),f=!!(o&&u);return xa(r.scrollbarX,()=>{const p=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(p),d(p)}),xa(r.scrollbarY,()=>{const p=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(p),l(p)}),f?P.jsx(Cn.div,{...n,ref:t,style:{width:o,height:u,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function qc(s){return s?parseInt(s,10):0}function cA(s,t){const e=s/t;return isNaN(e)?0:e}function vu(s){const t=cA(s.viewport,s.content),e=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,n=(s.scrollbar.size-e)*t;return Math.max(n,18)}function aR(s,t,e,n="ltr"){const r=vu(e),o=r/2,l=t||o,u=r-l,d=e.scrollbar.paddingStart+l,f=e.scrollbar.size-e.scrollbar.paddingEnd-u,p=e.content-e.viewport,m=n==="ltr"?[0,p]:[p*-1,0];return uA([d,f],m)(s)}function jy(s,t,e="ltr"){const n=vu(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-r,l=t.content-t.viewport,u=o-n,d=e==="ltr"?[0,l]:[l*-1,0],f=WO(s,d);return uA([0,l],[0,u])(f)}function uA(s,t){return e=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(s[1]-s[0]);return t[0]+n*(e-s[0])}}function hA(s,t){return s>0&&s<t}var oR=(s,t=()=>{})=>{let e={left:s.scrollLeft,top:s.scrollTop},n=0;return(function r(){const o={left:s.scrollLeft,top:s.scrollTop},l=e.left!==o.left,u=e.top!==o.top;(l||u)&&t(),e=o,n=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(n)};function yu(s,t){const e=ii(s),n=D.useRef(0);return D.useEffect(()=>()=>window.clearTimeout(n.current),[]),D.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(e,t)},[e,t])}function xa(s,t){const e=ii(t);Ea(()=>{let n=0;if(s){const r=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(e)});return r.observe(s),()=>{window.cancelAnimationFrame(n),r.unobserve(s)}}},[s,e])}var lR=tA,cR=nA,uR=lA;function dA(s){const t=ae.c(14);let e,n,r;t[0]!==s?({className:n,children:e,...r}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r):(e=t[1],n=t[2],r=t[3]);let o;t[4]!==n?(o=dn("relative overflow-hidden",n),t[4]=n,t[5]=o):o=t[5];let l;t[6]!==e?(l=P.jsx(cR,{className:"h-full w-full rounded-[inherit]",children:e}),t[6]=e,t[7]=l):l=t[7];let u,d;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=P.jsx(hR,{}),d=P.jsx(uR,{}),t[8]=u,t[9]=d):(u=t[8],d=t[9]);let f;return t[10]!==r||t[11]!==o||t[12]!==l?(f=P.jsxs(lR,{className:o,...r,children:[l,u,d]}),t[10]=r,t[11]=o,t[12]=l,t[13]=f):f=t[13],f}function hR(s){const t=ae.c(13);let e,n,r;t[0]!==s?({className:e,orientation:r,...n}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r):(e=t[1],n=t[2],r=t[3]);const o=r===void 0?"vertical":r,l=o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",u=o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let d;t[4]!==e||t[5]!==l||t[6]!==u?(d=dn("flex touch-none select-none transition-colors",l,u,e),t[4]=e,t[5]=l,t[6]=u,t[7]=d):d=t[7];let f;t[8]===Symbol.for("react.memo_cache_sentinel")?(f=P.jsx(oA,{className:"relative flex-1 rounded-full bg-border"}),t[8]=f):f=t[8];let p;return t[9]!==o||t[10]!==n||t[11]!==d?(p=P.jsx(iA,{orientation:o,className:d,...n,children:f}),t[9]=o,t[10]=n,t[11]=d,t[12]=p):p=t[12],p}var dR=Pf[" useId ".trim().toString()]||(()=>{}),fR=0;function sf(s){const[t,e]=D.useState(dR());return Ea(()=>{e(n=>n??String(fR++))},[s]),s||(t?`radix-${t}`:"")}var pR=Pf[" useInsertionEffect ".trim().toString()]||Ea;function mR({prop:s,defaultProp:t,onChange:e=()=>{},caller:n}){const[r,o,l]=gR({defaultProp:t,onChange:e}),u=s!==void 0,d=u?s:r;{const p=D.useRef(s!==void 0);D.useEffect(()=>{const m=p.current;m!==u&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,n])}const f=D.useCallback(p=>{if(u){const m=bR(p)?p(s):p;m!==s&&l.current?.(m)}else o(p)},[u,s,o,l]);return[d,f]}function gR({defaultProp:s,onChange:t}){const[e,n]=D.useState(s),r=D.useRef(e),o=D.useRef(t);return pR(()=>{o.current=t},[t]),D.useEffect(()=>{r.current!==e&&(o.current?.(e),r.current=e)},[e,r]),[e,n,o]}function bR(s){return typeof s=="function"}function vR(s,t=globalThis?.document){const e=ii(s);D.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var yR="DismissableLayer",kf="dismissableLayer.update",SR="dismissableLayer.pointerDownOutside",AR="dismissableLayer.focusOutside",Uy,fA=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pA=D.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...d}=s,f=D.useContext(fA),[p,m]=D.useState(null),v=p?.ownerDocument??globalThis?.document,[,y]=D.useState({}),A=jn(t,R=>m(R)),S=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),w=S.indexOf(E),T=p?S.indexOf(p):-1,x=f.layersWithOutsidePointerEventsDisabled.size>0,M=T>=w,O=ER(R=>{const B=R.target,U=[...f.branches].some(Z=>Z.contains(B));!M||U||(r?.(R),l?.(R),R.defaultPrevented||u?.())},v),k=xR(R=>{const B=R.target;[...f.branches].some(Z=>Z.contains(B))||(o?.(R),l?.(R),R.defaultPrevented||u?.())},v);return vR(R=>{T===f.layers.size-1&&(n?.(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),D.useEffect(()=>{if(p)return e&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Uy=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),Hy(),()=>{e&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Uy)}},[p,v,e,f]),D.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),Hy())},[p,f]),D.useEffect(()=>{const R=()=>y({});return document.addEventListener(kf,R),()=>document.removeEventListener(kf,R)},[]),P.jsx(Cn.div,{...d,ref:A,style:{pointerEvents:x?M?"auto":"none":void 0,...s.style},onFocusCapture:hn(s.onFocusCapture,k.onFocusCapture),onBlurCapture:hn(s.onBlurCapture,k.onBlurCapture),onPointerDownCapture:hn(s.onPointerDownCapture,O.onPointerDownCapture)})});pA.displayName=yR;var wR="DismissableLayerBranch",_R=D.forwardRef((s,t)=>{const e=D.useContext(fA),n=D.useRef(null),r=jn(t,n);return D.useEffect(()=>{const o=n.current;if(o)return e.branches.add(o),()=>{e.branches.delete(o)}},[e.branches]),P.jsx(Cn.div,{...s,ref:r})});_R.displayName=wR;function ER(s,t=globalThis?.document){const e=ii(s),n=D.useRef(!1),r=D.useRef(()=>{});return D.useEffect(()=>{const o=u=>{if(u.target&&!n.current){let d=function(){mA(SR,e,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=d,t.addEventListener("click",r.current,{once:!0})):d()}else t.removeEventListener("click",r.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function xR(s,t=globalThis?.document){const e=ii(s),n=D.useRef(!1);return D.useEffect(()=>{const r=o=>{o.target&&!n.current&&mA(AR,e,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Hy(){const s=new CustomEvent(kf);document.dispatchEvent(s)}function mA(s,t,e,{discrete:n}){const r=e.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&r.addEventListener(s,t,{once:!0}),n?HO(r,o):r.dispatchEvent(o)}var rf="focusScope.autoFocusOnMount",af="focusScope.autoFocusOnUnmount",Gy={bubbles:!1,cancelable:!0},TR="FocusScope",gA=D.forwardRef((s,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...l}=s,[u,d]=D.useState(null),f=ii(r),p=ii(o),m=D.useRef(null),v=jn(t,S=>d(S)),y=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(n){let S=function(x){if(y.paused||!u)return;const M=x.target;u.contains(M)?m.current=M:Ts(m.current,{select:!0})},E=function(x){if(y.paused||!u)return;const M=x.relatedTarget;M!==null&&(u.contains(M)||Ts(m.current,{select:!0}))},w=function(x){if(document.activeElement===document.body)for(const O of x)O.removedNodes.length>0&&Ts(u)};document.addEventListener("focusin",S),document.addEventListener("focusout",E);const T=new MutationObserver(w);return u&&T.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",E),T.disconnect()}}},[n,u,y.paused]),D.useEffect(()=>{if(u){Vy.add(y);const S=document.activeElement;if(!u.contains(S)){const w=new CustomEvent(rf,Gy);u.addEventListener(rf,f),u.dispatchEvent(w),w.defaultPrevented||(CR(kR(bA(u)),{select:!0}),document.activeElement===S&&Ts(u))}return()=>{u.removeEventListener(rf,f),setTimeout(()=>{const w=new CustomEvent(af,Gy);u.addEventListener(af,p),u.dispatchEvent(w),w.defaultPrevented||Ts(S??document.body,{select:!0}),u.removeEventListener(af,p),Vy.remove(y)},0)}}},[u,f,p,y]);const A=D.useCallback(S=>{if(!e&&!n||y.paused)return;const E=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,w=document.activeElement;if(E&&w){const T=S.currentTarget,[x,M]=MR(T);x&&M?!S.shiftKey&&w===M?(S.preventDefault(),e&&Ts(x,{select:!0})):S.shiftKey&&w===x&&(S.preventDefault(),e&&Ts(M,{select:!0})):w===T&&S.preventDefault()}},[e,n,y.paused]);return P.jsx(Cn.div,{tabIndex:-1,...l,ref:v,onKeyDown:A})});gA.displayName=TR;function CR(s,{select:t=!1}={}){const e=document.activeElement;for(const n of s)if(Ts(n,{select:t}),document.activeElement!==e)return}function MR(s){const t=bA(s),e=$y(t,s),n=$y(t.reverse(),s);return[e,n]}function bA(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function $y(s,t){for(const e of s)if(!DR(e,{upTo:t}))return e}function DR(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function OR(s){return s instanceof HTMLInputElement&&"select"in s}function Ts(s,{select:t=!1}={}){if(s&&s.focus){const e=document.activeElement;s.focus({preventScroll:!0}),s!==e&&OR(s)&&t&&s.select()}}var Vy=RR();function RR(){let s=[];return{add(t){const e=s[0];t!==e&&e?.pause(),s=Xy(s,t),s.unshift(t)},remove(t){s=Xy(s,t),s[0]?.resume()}}}function Xy(s,t){const e=[...s],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function kR(s){return s.filter(t=>t.tagName!=="A")}var NR="Portal",vA=D.forwardRef((s,t)=>{const{container:e,...n}=s,[r,o]=D.useState(!1);Ea(()=>o(!0),[]);const l=e||r&&globalThis?.document?.body;return l?LO.createPortal(P.jsx(Cn.div,{...n,ref:t}),l):null});vA.displayName=NR;var of=0;function LR(){D.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??Yy()),document.body.insertAdjacentElement("beforeend",s[1]??Yy()),of++,()=>{of===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),of--}},[])}function Yy(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Ci=function(){return Ci=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ci.apply(this,arguments)};function yA(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e}function zR(s,t,e){if(e||arguments.length===2)for(var n=0,r=t.length,o;n<r;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))}var Bc="right-scroll-bar-position",Ic="width-before-scroll-bar",PR="with-scroll-bars-hidden",BR="--removed-body-scroll-bar-size";function lf(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function IR(s,t){var e=D.useState(function(){return{value:s,callback:t,facade:{get current(){return e.value},set current(n){var r=e.value;r!==n&&(e.value=n,e.callback(n,r))}}}})[0];return e.callback=t,e.facade}var FR=typeof window<"u"?D.useLayoutEffect:D.useEffect,Zy=new WeakMap;function jR(s,t){var e=IR(null,function(n){return s.forEach(function(r){return lf(r,n)})});return FR(function(){var n=Zy.get(e);if(n){var r=new Set(n),o=new Set(s),l=e.current;r.forEach(function(u){o.has(u)||lf(u,null)}),o.forEach(function(u){r.has(u)||lf(u,l)})}Zy.set(e,s)},[s]),e}function UR(s){return s}function HR(s,t){t===void 0&&(t=UR);var e=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:s},useMedium:function(o){var l=t(o,n);return e.push(l),function(){e=e.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(n=!0;e.length;){var l=e;e=[],l.forEach(o)}e={push:function(u){return o(u)},filter:function(){return e}}},assignMedium:function(o){n=!0;var l=[];if(e.length){var u=e;e=[],u.forEach(o),l=e}var d=function(){var p=l;l=[],p.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),e={push:function(p){l.push(p),f()},filter:function(p){return l=l.filter(p),e}}}};return r}function GR(s){s===void 0&&(s={});var t=HR(null);return t.options=Ci({async:!0,ssr:!1},s),t}var SA=function(s){var t=s.sideCar,e=yA(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return D.createElement(n,Ci({},e))};SA.isSideCarExport=!0;function $R(s,t){return s.useMedium(t),SA}var AA=GR(),cf=function(){},Su=D.forwardRef(function(s,t){var e=D.useRef(null),n=D.useState({onScrollCapture:cf,onWheelCapture:cf,onTouchMoveCapture:cf}),r=n[0],o=n[1],l=s.forwardProps,u=s.children,d=s.className,f=s.removeScrollBar,p=s.enabled,m=s.shards,v=s.sideCar,y=s.noRelative,A=s.noIsolation,S=s.inert,E=s.allowPinchZoom,w=s.as,T=w===void 0?"div":w,x=s.gapMode,M=yA(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=v,k=jR([e,t]),R=Ci(Ci({},M),r);return D.createElement(D.Fragment,null,p&&D.createElement(O,{sideCar:AA,removeScrollBar:f,shards:m,noRelative:y,noIsolation:A,inert:S,setCallbacks:o,allowPinchZoom:!!E,lockRef:e,gapMode:x}),l?D.cloneElement(D.Children.only(u),Ci(Ci({},R),{ref:k})):D.createElement(T,Ci({},R,{className:d,ref:k}),u))});Su.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Su.classNames={fullWidth:Ic,zeroRight:Bc};var VR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XR(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=VR();return t&&s.setAttribute("nonce",t),s}function YR(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function ZR(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var qR=function(){var s=0,t=null;return{add:function(e){s==0&&(t=XR())&&(YR(t,e),ZR(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},WR=function(){var s=qR();return function(t,e){D.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&e])}},wA=function(){var s=WR(),t=function(e){var n=e.styles,r=e.dynamic;return s(n,r),null};return t},KR={left:0,top:0,right:0,gap:0},uf=function(s){return parseInt(s||"",10)||0},QR=function(s){var t=window.getComputedStyle(document.body),e=t[s==="padding"?"paddingLeft":"marginLeft"],n=t[s==="padding"?"paddingTop":"marginTop"],r=t[s==="padding"?"paddingRight":"marginRight"];return[uf(e),uf(n),uf(r)]},JR=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return KR;var t=QR(s),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},tk=wA(),Sa="data-scroll-locked",ek=function(s,t,e,n){var r=s.left,o=s.top,l=s.right,u=s.gap;return e===void 0&&(e="margin"),`
  .`.concat(PR,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(Sa,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bc,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(Ic,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(Bc," .").concat(Bc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ic," .").concat(Ic,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Sa,`] {
    `).concat(BR,": ").concat(u,`px;
  }
`)},qy=function(){var s=parseInt(document.body.getAttribute(Sa)||"0",10);return isFinite(s)?s:0},nk=function(){D.useEffect(function(){return document.body.setAttribute(Sa,(qy()+1).toString()),function(){var s=qy()-1;s<=0?document.body.removeAttribute(Sa):document.body.setAttribute(Sa,s.toString())}},[])},ik=function(s){var t=s.noRelative,e=s.noImportant,n=s.gapMode,r=n===void 0?"margin":n;nk();var o=D.useMemo(function(){return JR(r)},[r]);return D.createElement(tk,{styles:ek(o,!t,r,e?"":"!important")})},Nf=!1;if(typeof window<"u")try{var Dc=Object.defineProperty({},"passive",{get:function(){return Nf=!0,!0}});window.addEventListener("test",Dc,Dc),window.removeEventListener("test",Dc,Dc)}catch{Nf=!1}var sa=Nf?{passive:!1}:!1,sk=function(s){return s.tagName==="TEXTAREA"},_A=function(s,t){if(!(s instanceof Element))return!1;var e=window.getComputedStyle(s);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!sk(s)&&e[t]==="visible")},rk=function(s){return _A(s,"overflowY")},ak=function(s){return _A(s,"overflowX")},Wy=function(s,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=EA(s,n);if(r){var o=xA(s,n),l=o[1],u=o[2];if(l>u)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},ok=function(s){var t=s.scrollTop,e=s.scrollHeight,n=s.clientHeight;return[t,e,n]},lk=function(s){var t=s.scrollLeft,e=s.scrollWidth,n=s.clientWidth;return[t,e,n]},EA=function(s,t){return s==="v"?rk(t):ak(t)},xA=function(s,t){return s==="v"?ok(t):lk(t)},ck=function(s,t){return s==="h"&&t==="rtl"?-1:1},uk=function(s,t,e,n,r){var o=ck(s,window.getComputedStyle(t).direction),l=o*n,u=e.target,d=t.contains(u),f=!1,p=l>0,m=0,v=0;do{if(!u)break;var y=xA(s,u),A=y[0],S=y[1],E=y[2],w=S-E-o*A;(A||w)&&EA(s,u)&&(m+=w,v+=A);var T=u.parentNode;u=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(p&&Math.abs(m)<1||!p&&Math.abs(v)<1)&&(f=!0),f},Oc=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Ky=function(s){return[s.deltaX,s.deltaY]},Qy=function(s){return s&&"current"in s?s.current:s},hk=function(s,t){return s[0]===t[0]&&s[1]===t[1]},dk=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},fk=0,ra=[];function pk(s){var t=D.useRef([]),e=D.useRef([0,0]),n=D.useRef(),r=D.useState(fk++)[0],o=D.useState(wA)[0],l=D.useRef(s);D.useEffect(function(){l.current=s},[s]),D.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(r));var S=zR([s.lockRef.current],(s.shards||[]).map(Qy),!0).filter(Boolean);return S.forEach(function(E){return E.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),S.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(r))})}}},[s.inert,s.lockRef.current,s.shards]);var u=D.useCallback(function(S,E){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!l.current.allowPinchZoom;var w=Oc(S),T=e.current,x="deltaX"in S?S.deltaX:T[0]-w[0],M="deltaY"in S?S.deltaY:T[1]-w[1],O,k=S.target,R=Math.abs(x)>Math.abs(M)?"h":"v";if("touches"in S&&R==="h"&&k.type==="range")return!1;var B=window.getSelection(),U=B&&B.anchorNode,Z=U?U===k||U.contains(k):!1;if(Z)return!1;var H=Wy(R,k);if(!H)return!0;if(H?O=R:(O=R==="v"?"h":"v",H=Wy(R,k)),!H)return!1;if(!n.current&&"changedTouches"in S&&(x||M)&&(n.current=O),!O)return!0;var it=n.current||O;return uk(it,E,S,it==="h"?x:M)},[]),d=D.useCallback(function(S){var E=S;if(!(!ra.length||ra[ra.length-1]!==o)){var w="deltaY"in E?Ky(E):Oc(E),T=t.current.filter(function(O){return O.name===E.type&&(O.target===E.target||E.target===O.shadowParent)&&hk(O.delta,w)})[0];if(T&&T.should){E.cancelable&&E.preventDefault();return}if(!T){var x=(l.current.shards||[]).map(Qy).filter(Boolean).filter(function(O){return O.contains(E.target)}),M=x.length>0?u(E,x[0]):!l.current.noIsolation;M&&E.cancelable&&E.preventDefault()}}},[]),f=D.useCallback(function(S,E,w,T){var x={name:S,delta:E,target:w,should:T,shadowParent:mk(w)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(M){return M!==x})},1)},[]),p=D.useCallback(function(S){e.current=Oc(S),n.current=void 0},[]),m=D.useCallback(function(S){f(S.type,Ky(S),S.target,u(S,s.lockRef.current))},[]),v=D.useCallback(function(S){f(S.type,Oc(S),S.target,u(S,s.lockRef.current))},[]);D.useEffect(function(){return ra.push(o),s.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",d,sa),document.addEventListener("touchmove",d,sa),document.addEventListener("touchstart",p,sa),function(){ra=ra.filter(function(S){return S!==o}),document.removeEventListener("wheel",d,sa),document.removeEventListener("touchmove",d,sa),document.removeEventListener("touchstart",p,sa)}},[]);var y=s.removeScrollBar,A=s.inert;return D.createElement(D.Fragment,null,A?D.createElement(o,{styles:dk(r)}):null,y?D.createElement(ik,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function mk(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const gk=$R(AA,pk);var TA=D.forwardRef(function(s,t){return D.createElement(Su,Ci({},s,{ref:t,sideCar:gk}))});TA.classNames=Su.classNames;var bk=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},aa=new WeakMap,Rc=new WeakMap,kc={},hf=0,CA=function(s){return s&&(s.host||CA(s.parentNode))},vk=function(s,t){return t.map(function(e){if(s.contains(e))return e;var n=CA(e);return n&&s.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",s,". Doing nothing"),null)}).filter(function(e){return!!e})},yk=function(s,t,e,n){var r=vk(t,Array.isArray(s)?s:[s]);kc[e]||(kc[e]=new WeakMap);var o=kc[e],l=[],u=new Set,d=new Set(r),f=function(m){!m||u.has(m)||(u.add(m),f(m.parentNode))};r.forEach(f);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(v){if(u.has(v))p(v);else try{var y=v.getAttribute(n),A=y!==null&&y!=="false",S=(aa.get(v)||0)+1,E=(o.get(v)||0)+1;aa.set(v,S),o.set(v,E),l.push(v),S===1&&A&&Rc.set(v,!0),E===1&&v.setAttribute(e,"true"),A||v.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",v,w)}})};return p(t),u.clear(),hf++,function(){l.forEach(function(m){var v=aa.get(m)-1,y=o.get(m)-1;aa.set(m,v),o.set(m,y),v||(Rc.has(m)||m.removeAttribute(n),Rc.delete(m)),y||m.removeAttribute(e)}),hf--,hf||(aa=new WeakMap,aa=new WeakMap,Rc=new WeakMap,kc={})}},Sk=function(s,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),r=bk(s);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),yk(n,r,e,"aria-hidden")):function(){return null}};function Ak(s){const t=wk(s),e=D.forwardRef((n,r)=>{const{children:o,...l}=n,u=D.Children.toArray(o),d=u.find(Ek);if(d){const f=d.props.children,p=u.map(m=>m===d?D.Children.count(f)>1?D.Children.only(null):D.isValidElement(f)?f.props.children:null:m);return P.jsx(t,{...l,ref:r,children:D.isValidElement(f)?D.cloneElement(f,void 0,p):null})}return P.jsx(t,{...l,ref:r,children:o})});return e.displayName=`${s}.Slot`,e}function wk(s){const t=D.forwardRef((e,n)=>{const{children:r,...o}=e;if(D.isValidElement(r)){const l=Tk(r),u=xk(o,r.props);return r.type!==D.Fragment&&(u.ref=n?du(n,l):l),D.cloneElement(r,u)}return D.Children.count(r)>1?D.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var _k=Symbol("radix.slottable");function Ek(s){return D.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===_k}function xk(s,t){const e={...t};for(const n in t){const r=s[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?e[n]=(...u)=>{const d=o(...u);return r(...u),d}:r&&(e[n]=r):n==="style"?e[n]={...r,...o}:n==="className"&&(e[n]=[r,o].filter(Boolean).join(" "))}return{...s,...e}}function Tk(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var Au="Dialog",[MA]=QS(Au),[Ck,pi]=MA(Au),DA=s=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:r,onOpenChange:o,modal:l=!0}=s,u=D.useRef(null),d=D.useRef(null),[f,p]=mR({prop:n,defaultProp:r??!1,onChange:o,caller:Au});return P.jsx(Ck,{scope:t,triggerRef:u,contentRef:d,contentId:sf(),titleId:sf(),descriptionId:sf(),open:f,onOpenChange:p,onOpenToggle:D.useCallback(()=>p(m=>!m),[p]),modal:l,children:e})};DA.displayName=Au;var OA="DialogTrigger",Mk=D.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,r=pi(OA,e),o=jn(t,r.triggerRef);return P.jsx(Cn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":mp(r.open),...n,ref:o,onClick:hn(s.onClick,r.onOpenToggle)})});Mk.displayName=OA;var fp="DialogPortal",[Dk,RA]=MA(fp,{forceMount:void 0}),kA=s=>{const{__scopeDialog:t,forceMount:e,children:n,container:r}=s,o=pi(fp,t);return P.jsx(Dk,{scope:t,forceMount:e,children:D.Children.map(n,l=>P.jsx(zs,{present:e||o.open,children:P.jsx(vA,{asChild:!0,container:r,children:l})}))})};kA.displayName=fp;var Wc="DialogOverlay",NA=D.forwardRef((s,t)=>{const e=RA(Wc,s.__scopeDialog),{forceMount:n=e.forceMount,...r}=s,o=pi(Wc,s.__scopeDialog);return o.modal?P.jsx(zs,{present:n||o.open,children:P.jsx(Rk,{...r,ref:t})}):null});NA.displayName=Wc;var Ok=Ak("DialogOverlay.RemoveScroll"),Rk=D.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,r=pi(Wc,e);return P.jsx(TA,{as:Ok,allowPinchZoom:!0,shards:[r.contentRef],children:P.jsx(Cn.div,{"data-state":mp(r.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),ur="DialogContent",LA=D.forwardRef((s,t)=>{const e=RA(ur,s.__scopeDialog),{forceMount:n=e.forceMount,...r}=s,o=pi(ur,s.__scopeDialog);return P.jsx(zs,{present:n||o.open,children:o.modal?P.jsx(kk,{...r,ref:t}):P.jsx(Nk,{...r,ref:t})})});LA.displayName=ur;var kk=D.forwardRef((s,t)=>{const e=pi(ur,s.__scopeDialog),n=D.useRef(null),r=jn(t,e.contentRef,n);return D.useEffect(()=>{const o=n.current;if(o)return Sk(o)},[]),P.jsx(zA,{...s,ref:r,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:hn(s.onCloseAutoFocus,o=>{o.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:hn(s.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:hn(s.onFocusOutside,o=>o.preventDefault())})}),Nk=D.forwardRef((s,t)=>{const e=pi(ur,s.__scopeDialog),n=D.useRef(!1),r=D.useRef(!1);return P.jsx(zA,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{s.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||e.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:o=>{s.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=o.target;e.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),zA=D.forwardRef((s,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:o,...l}=s,u=pi(ur,e),d=D.useRef(null),f=jn(t,d);return LR(),P.jsxs(P.Fragment,{children:[P.jsx(gA,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:o,children:P.jsx(pA,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":mp(u.open),...l,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),P.jsxs(P.Fragment,{children:[P.jsx(Lk,{titleId:u.titleId}),P.jsx(Pk,{contentRef:d,descriptionId:u.descriptionId})]})]})}),pp="DialogTitle",PA=D.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,r=pi(pp,e);return P.jsx(Cn.h2,{id:r.titleId,...n,ref:t})});PA.displayName=pp;var BA="DialogDescription",IA=D.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,r=pi(BA,e);return P.jsx(Cn.p,{id:r.descriptionId,...n,ref:t})});IA.displayName=BA;var FA="DialogClose",jA=D.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,r=pi(FA,e);return P.jsx(Cn.button,{type:"button",...n,ref:t,onClick:hn(s.onClick,()=>r.onOpenChange(!1))})});jA.displayName=FA;function mp(s){return s?"open":"closed"}var UA="DialogTitleWarning",[wL,HA]=XO(UA,{contentName:ur,titleName:pp,docsSlug:"dialog"}),Lk=({titleId:s})=>{const t=HA(UA),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return D.useEffect(()=>{s&&(document.getElementById(s)||console.error(e))},[e,s]),null},zk="DialogDescriptionWarning",Pk=({contentRef:s,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HA(zk).contentName}}.`;return D.useEffect(()=>{const r=s.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,s,t]),null},GA=DA,$A=kA,VA=NA,XA=LA,YA=PA,Bk=IA,ZA=jA;const Ik=GA,Fk=$A;function jk(s){const t=ae.c(8);let e,n;t[0]!==s?({className:e,...n}=s,t[0]=s,t[1]=e,t[2]=n):(e=t[1],n=t[2]);let r;t[3]!==e?(r=dn("fixed inset-0 z-50 bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),t[3]=e,t[4]=r):r=t[4];let o;return t[5]!==n||t[6]!==r?(o=P.jsx(VA,{className:r,...n}),t[5]=n,t[6]=r,t[7]=o):o=t[7],o}function Uk(s){const t=ae.c(15);let e,n,r,o;t[0]!==s?({className:n,children:e,showCloseButton:o,...r}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r,t[4]=o):(e=t[1],n=t[2],r=t[3],o=t[4]);const l=o===void 0?!0:o;let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=P.jsx(jk,{}),t[5]=u):u=t[5];let d;t[6]!==n?(d=dn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-2xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 sm:rounded-lg",n),t[6]=n,t[7]=d):d=t[7];let f;t[8]!==l?(f=l?P.jsxs(ZA,{className:"absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none",children:[P.jsx(X0,{className:"h-4 w-4"}),P.jsx("span",{className:"sr-only",children:"Close"})]}):null,t[8]=l,t[9]=f):f=t[9];let p;return t[10]!==e||t[11]!==r||t[12]!==d||t[13]!==f?(p=P.jsxs(Fk,{children:[u,P.jsxs(XA,{className:d,...r,children:[e,f]})]}),t[10]=e,t[11]=r,t[12]=d,t[13]=f,t[14]=p):p=t[14],p}function Hk(s){const t=ae.c(8);let e,n;t[0]!==s?({className:e,...n}=s,t[0]=s,t[1]=e,t[2]=n):(e=t[1],n=t[2]);let r;t[3]!==e?(r=dn("flex flex-col space-y-1.5 text-center sm:text-left",e),t[3]=e,t[4]=r):r=t[4];let o;return t[5]!==n||t[6]!==r?(o=P.jsx("div",{className:r,...n}),t[5]=n,t[6]=r,t[7]=o):o=t[7],o}function Gk(s){const t=ae.c(8);let e,n;t[0]!==s?({className:e,...n}=s,t[0]=s,t[1]=e,t[2]=n):(e=t[1],n=t[2]);let r;t[3]!==e?(r=dn("text-lg font-semibold leading-none tracking-tight",e),t[3]=e,t[4]=r):r=t[4];let o;return t[5]!==n||t[6]!==r?(o=P.jsx(YA,{className:r,...n}),t[5]=n,t[6]=r,t[7]=o):o=t[7],o}function $k(s){const t=ae.c(8);let e,n;t[0]!==s?({className:e,...n}=s,t[0]=s,t[1]=e,t[2]=n):(e=t[1],n=t[2]);let r;t[3]!==e?(r=dn("text-sm text-muted-foreground",e),t[3]=e,t[4]=r):r=t[4];let o;return t[5]!==n||t[6]!==r?(o=P.jsx(Bk,{className:r,...n}),t[5]=n,t[6]=r,t[7]=o):o=t[7],o}function Pn(s){const t=ae.c(8),{label:e,value:n}=s,r=n.trim()==="-";let o;t[0]!==e?(o=P.jsx("p",{className:"font-medium text-muted-foreground",children:e}),t[0]=e,t[1]=o):o=t[1];const l=r?"text-muted-foreground":"";let u;t[2]!==l||t[3]!==n?(u=P.jsx("p",{className:l,children:n}),t[2]=l,t[3]=n,t[4]=u):u=t[4];let d;return t[5]!==o||t[6]!==u?(d=P.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-2 text-sm",children:[o,u]}),t[5]=o,t[6]=u,t[7]=d):d=t[7],d}function Vk(s){const t=ae.c(12),{book:e,open:n,onOpenChange:r}=s;let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=P.jsx(Gk,{children:""}),t[0]=o):o=t[0];const l=e?.title??"book.json ";let u;t[1]!==l?(u=P.jsxs(Hk,{children:[o,P.jsx($k,{children:l})]}),t[1]=l,t[2]=u):u=t[2];let d;t[3]!==e?(d=e?P.jsxs("div",{className:"space-y-3",children:[P.jsx(Pn,{label:"",value:e.title}),P.jsx(Pn,{label:"",value:e.authors}),P.jsx(Pn,{label:"",value:e.publisher}),P.jsx(Pn,{label:"",value:e.publicationDate}),P.jsx(Pn,{label:"",value:e.language}),P.jsx(Pn,{label:"",value:e.pageCount}),P.jsx(Pn,{label:"ISBN",value:e.isbn}),P.jsx(Pn,{label:"eISBN",value:e.eisbn}),P.jsx(Pn,{label:"",value:e.genre}),P.jsx(Pn,{label:"NDC",value:e.ndcClass}),P.jsx(Pn,{label:"subject",value:e.subject}),P.jsx(Pn,{label:"content_id",value:e.contentId}),P.jsx(Pn,{label:"DL",value:e.downloadableAfterPurchase}),P.jsxs("div",{className:"space-y-2",children:[P.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:""}),P.jsx(dA,{className:"h-40 rounded-md border bg-muted/20 p-3",children:P.jsx("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:e.description})})]})]}):null,t[3]=e,t[4]=d):d=t[4];let f;t[5]!==u||t[6]!==d?(f=P.jsxs(Uk,{className:"max-h-[85vh] max-w-2xl overflow-hidden",children:[u,d]}),t[5]=u,t[6]=d,t[7]=f):f=t[7];let p;return t[8]!==r||t[9]!==n||t[10]!==f?(p=P.jsx(Ik,{open:n,onOpenChange:r,children:f}),t[8]=r,t[9]=n,t[10]=f,t[11]=p):p=t[11],p}var Xk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yk=Xk.reduce((s,t)=>{const e=uS(`Primitive.${t}`),n=D.forwardRef((r,o)=>{const{asChild:l,...u}=r,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),P.jsx(d,{...u,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{}),Zk="Separator",Jy="horizontal",qk=["horizontal","vertical"],qA=D.forwardRef((s,t)=>{const{decorative:e,orientation:n=Jy,...r}=s,o=Wk(n)?n:Jy,u=e?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return P.jsx(Yk.div,{"data-orientation":o,...u,...r,ref:t})});qA.displayName=Zk;function Wk(s){return qk.includes(s)}var Kk=qA;function Qk(s){const t=ae.c(13);let e,n,r,o;t[0]!==s?({className:e,orientation:r,decorative:o,...n}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r,t[4]=o):(e=t[1],n=t[2],r=t[3],o=t[4]);const l=r===void 0?"horizontal":r,u=o===void 0?!0:o,d=l==="horizontal"?"h-px w-full":"h-full w-px";let f;t[5]!==e||t[6]!==d?(f=dn("shrink-0 bg-border",d,e),t[5]=e,t[6]=d,t[7]=f):f=t[7];let p;return t[8]!==u||t[9]!==l||t[10]!==n||t[11]!==f?(p=P.jsx(Kk,{decorative:u,orientation:l,className:f,...n}),t[8]=u,t[9]=l,t[10]=n,t[11]=f,t[12]=p):p=t[12],p}function Jk(s){const t=ae.c(10);let e,n,r;t[0]!==s?({className:e,type:r,...n}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r):(e=t[1],n=t[2],r=t[3]);let o;t[4]!==e?(o=dn("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),t[4]=e,t[5]=o):o=t[5];let l;return t[6]!==n||t[7]!==o||t[8]!==r?(l=P.jsx("input",{type:r,className:o,...n}),t[6]=n,t[7]=o,t[8]=r,t[9]=l):l=t[9],l}function tN(s){const t=ae.c(25),{currentPage:e,totalPages:n,onJump:r}=s,[o,l]=D.useState(""),[u,d]=D.useState(null);let f;t[0]!==r||t[1]!==n||t[2]!==o?(f=()=>{const O=Number(o);if(!o.trim()||Number.isNaN(O)||!Number.isInteger(O)){d("");return}if(O<1||O>n){d(`1  ${n} `);return}d(null),r(O),l("")},t[0]=r,t[1]=n,t[2]=o,t[3]=f):f=t[3];const p=f;let m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m=P.jsx("h3",{className:"text-sm font-semibold",children:""}),t[4]=m):m=t[4];let v;t[5]!==e?(v=P.jsxs("p",{className:"text-xs text-muted-foreground",children:[": ",e]}),t[5]=e,t[6]=v):v=t[6];const y=`1-${n}`;let A;t[7]===Symbol.for("react.memo_cache_sentinel")?(A=O=>l(O.target.value),t[7]=A):A=t[7];let S;t[8]!==p?(S=O=>{O.key==="Enter"&&p()},t[8]=p,t[9]=S):S=t[9];let E;t[10]!==y||t[11]!==S||t[12]!==o?(E=P.jsx(Jk,{inputMode:"numeric",placeholder:y,value:o,onChange:A,onKeyDown:S}),t[10]=y,t[11]=S,t[12]=o,t[13]=E):E=t[13];let w;t[14]!==p?(w=P.jsx(Ki,{onClick:p,children:""}),t[14]=p,t[15]=w):w=t[15];let T;t[16]!==E||t[17]!==w?(T=P.jsxs("div",{className:"flex gap-2",children:[E,w]}),t[16]=E,t[17]=w,t[18]=T):T=t[18];let x;t[19]!==u?(x=u?P.jsx("p",{className:"text-xs text-destructive",children:u}):null,t[19]=u,t[20]=x):x=t[20];let M;return t[21]!==x||t[22]!==v||t[23]!==T?(M=P.jsxs("div",{className:"space-y-2",children:[m,v,T,x]}),t[21]=x,t[22]=v,t[23]=T,t[24]=M):M=t[24],M}function eN(s){const t=ae.c(11),{toc:e,onSelect:n,className:r}=s,o=`flex min-h-0 flex-1 flex-col space-y-2 ${r??""}`;let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=P.jsx("h3",{className:"text-sm font-semibold",children:""}),t[0]=l):l=t[0];let u;if(t[1]!==n||t[2]!==e){let p;t[4]!==n?(p=m=>P.jsxs(Ki,{variant:"ghost",className:"h-auto w-full justify-start gap-2 px-2 py-2 text-left",onClick:()=>n(m.page),children:[P.jsxs("span",{className:"shrink-0 tabular-nums text-[11px] text-muted-foreground/80",children:[m.page,"p"]}),P.jsx("span",{className:"min-w-0 flex-1 truncate",children:m.title})]},m.id),t[4]=n,t[5]=p):p=t[5],u=e.map(p),t[1]=n,t[2]=e,t[3]=u}else u=t[3];let d;t[6]!==u?(d=P.jsx(dA,{className:"min-h-0 flex-1 rounded-md border bg-background p-2",children:P.jsx("div",{className:"space-y-1",children:u})}),t[6]=u,t[7]=d):d=t[7];let f;return t[8]!==o||t[9]!==d?(f=P.jsxs("div",{className:o,children:[l,d]}),t[8]=o,t[9]=d,t[10]=f):f=t[10],f}function WA(s){const t=ae.c(26),{book:e,currentPage:n,totalPages:r,onGoToPage:o,onOpenInfo:l,compact:u}=s,d=u===void 0?!1:u;let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=P.jsx("h2",{className:"text-sm font-semibold",children:""}),t[0]=f):f=t[0];const p=Math.max(1,r);let m;t[1]!==n||t[2]!==p?(m=P.jsxs("div",{className:"flex items-center justify-between gap-2",children:[f,P.jsxs(Pc,{variant:"secondary",children:[n," / ",p]})]}),t[1]=n,t[2]=p,t[3]=m):m=t[3];let v;t[4]===Symbol.for("react.memo_cache_sentinel")?(v=P.jsx(kx,{className:"mr-2 h-4 w-4"}),t[4]=v):v=t[4];let y;t[5]!==l?(y=P.jsxs(Ki,{variant:"outline",className:"justify-start",onClick:l,children:[v,""]}),t[5]=l,t[6]=y):y=t[6];let A;t[7]===Symbol.for("react.memo_cache_sentinel")?(A=P.jsx(Qk,{}),t[7]=A):A=t[7];const S=Math.max(1,r);let E;t[8]!==n||t[9]!==o||t[10]!==S?(E=P.jsx(tN,{currentPage:n,totalPages:S,onJump:o}),t[8]=n,t[9]=o,t[10]=S,t[11]=E):E=t[11];let w;t[12]!==e?.tableOfContents?(w=e?.tableOfContents??[],t[12]=e?.tableOfContents,t[13]=w):w=t[13];let T;t[14]!==o||t[15]!==w?(T=P.jsx(eN,{className:"min-h-0 flex-1 pb-16",toc:w,onSelect:o}),t[14]=o,t[15]=w,t[16]=T):T=t[16];let x;t[17]!==e||t[18]!==d?(x=!e&&d?P.jsx("p",{className:"text-xs text-muted-foreground",children:"book.json "}):null,t[17]=e,t[18]=d,t[19]=x):x=t[19];let M;return t[20]!==T||t[21]!==x||t[22]!==m||t[23]!==y||t[24]!==E?(M=P.jsxs("div",{className:"flex h-full flex-col gap-4",children:[m,y,A,E,T,x]}),t[20]=T,t[21]=x,t[22]=m,t[23]=y,t[24]=E,t[25]=M):M=t[25],M}const nN=GA,iN=$A;function sN(s){const t=ae.c(8);let e,n;t[0]!==s?({className:e,...n}=s,t[0]=s,t[1]=e,t[2]=n):(e=t[1],n=t[2]);let r;t[3]!==e?(r=dn("fixed inset-0 z-50 bg-black/60 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),t[3]=e,t[4]=r):r=t[4];let o;return t[5]!==n||t[6]!==r?(o=P.jsx(VA,{className:r,...n}),t[5]=n,t[6]=r,t[7]=o):o=t[7],o}const rN=Qf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}});function aN(s){const t=ae.c(14);let e,n,r,o;t[0]!==s?({side:o,className:n,children:e,...r}=s,t[0]=s,t[1]=e,t[2]=n,t[3]=r,t[4]=o):(e=t[1],n=t[2],r=t[3],o=t[4]);const l=o===void 0?"right":o;let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=P.jsx(sN,{}),t[5]=u):u=t[5];let d;t[6]!==n||t[7]!==l?(d=dn(rN({side:l}),n),t[6]=n,t[7]=l,t[8]=d):d=t[8];let f;t[9]===Symbol.for("react.memo_cache_sentinel")?(f=P.jsxs(ZA,{className:"absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none",children:[P.jsx(X0,{className:"h-4 w-4"}),P.jsx("span",{className:"sr-only",children:"Close"})]}),t[9]=f):f=t[9];let p;return t[10]!==e||t[11]!==r||t[12]!==d?(p=P.jsxs(iN,{children:[u,P.jsxs(XA,{className:d,...r,children:[e,f]})]}),t[10]=e,t[11]=r,t[12]=d,t[13]=p):p=t[13],p}function oN(s){const t=ae.c(8);let e,n;t[0]!==s?({className:e,...n}=s,t[0]=s,t[1]=e,t[2]=n):(e=t[1],n=t[2]);let r;t[3]!==e?(r=dn("flex flex-col space-y-2 text-center sm:text-left",e),t[3]=e,t[4]=r):r=t[4];let o;return t[5]!==n||t[6]!==r?(o=P.jsx("div",{className:r,...n}),t[5]=n,t[6]=r,t[7]=o):o=t[7],o}function lN(s){const t=ae.c(8);let e,n;t[0]!==s?({className:e,...n}=s,t[0]=s,t[1]=e,t[2]=n):(e=t[1],n=t[2]);let r;t[3]!==e?(r=dn("text-lg font-semibold",e),t[3]=e,t[4]=r):r=t[4];let o;return t[5]!==n||t[6]!==r?(o=P.jsx(YA,{className:r,...n}),t[5]=n,t[6]=r,t[7]=o):o=t[7],o}function cN(s){const t=ae.c(17),{open:e,onOpenChange:n,book:r,currentPage:o,totalPages:l,onGoToPage:u,onOpenInfo:d}=s;let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=P.jsx(oN,{children:P.jsx(lN,{children:" / "})}),t[0]=f):f=t[0];let p;t[1]!==u||t[2]!==n?(p=A=>{u(A),n(!1)},t[1]=u,t[2]=n,t[3]=p):p=t[3];let m;t[4]!==n||t[5]!==d?(m=()=>{d(),n(!1)},t[4]=n,t[5]=d,t[6]=m):m=t[6];let v;t[7]!==r||t[8]!==o||t[9]!==p||t[10]!==m||t[11]!==l?(v=P.jsxs(aN,{side:"left",className:"w-[90vw] p-4",children:[f,P.jsx("div",{className:"mt-4 h-[calc(100%-2.5rem)]",children:P.jsx(WA,{compact:!0,book:r,currentPage:o,totalPages:l,onGoToPage:p,onOpenInfo:m})})]}),t[7]=r,t[8]=o,t[9]=p,t[10]=m,t[11]=l,t[12]=v):v=t[12];let y;return t[13]!==n||t[14]!==e||t[15]!==v?(y=P.jsx(nN,{open:e,onOpenChange:n,children:v}),t[13]=n,t[14]=e,t[15]=v,t[16]=y):y=t[16],y}function uN(s){return Object.prototype.toString.call(s)==="[object Object]"}function t0(s){return uN(s)||Array.isArray(s)}function hN(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function gp(s,t){const e=Object.keys(s),n=Object.keys(t);if(e.length!==n.length)return!1;const r=JSON.stringify(Object.keys(s.breakpoints||{})),o=JSON.stringify(Object.keys(t.breakpoints||{}));return r!==o?!1:e.every(l=>{const u=s[l],d=t[l];return typeof u=="function"?`${u}`==`${d}`:!t0(u)||!t0(d)?u===d:gp(u,d)})}function e0(s){return s.concat().sort((t,e)=>t.name>e.name?1:-1).map(t=>t.options)}function dN(s,t){if(s.length!==t.length)return!1;const e=e0(s),n=e0(t);return e.every((r,o)=>{const l=n[o];return gp(r,l)})}function bp(s){return typeof s=="number"}function Lf(s){return typeof s=="string"}function wu(s){return typeof s=="boolean"}function n0(s){return Object.prototype.toString.call(s)==="[object Object]"}function fe(s){return Math.abs(s)}function vp(s){return Math.sign(s)}function zo(s,t){return fe(s-t)}function fN(s,t){if(s===0||t===0||fe(s)<=fe(t))return 0;const e=zo(fe(s),fe(t));return fe(e/s)}function pN(s){return Math.round(s*100)/100}function Go(s){return $o(s).map(Number)}function fi(s){return s[Qo(s)]}function Qo(s){return Math.max(0,s.length-1)}function yp(s,t){return t===Qo(s)}function i0(s,t=0){return Array.from(Array(s),(e,n)=>t+n)}function $o(s){return Object.keys(s)}function KA(s,t){return[s,t].reduce((e,n)=>($o(n).forEach(r=>{const o=e[r],l=n[r],u=n0(o)&&n0(l);e[r]=u?KA(o,l):l}),e),{})}function zf(s,t){return typeof t.MouseEvent<"u"&&s instanceof t.MouseEvent}function mN(s,t){const e={start:n,center:r,end:o};function n(){return 0}function r(d){return o(d)/2}function o(d){return t-d}function l(d,f){return Lf(s)?e[s](d):s(t,d,f)}return{measure:l}}function Vo(){let s=[];function t(r,o,l,u={passive:!0}){let d;if("addEventListener"in r)r.addEventListener(o,l,u),d=()=>r.removeEventListener(o,l,u);else{const f=r;f.addListener(l),d=()=>f.removeListener(l)}return s.push(d),n}function e(){s=s.filter(r=>r())}const n={add:t,clear:e};return n}function gN(s,t,e,n){const r=Vo(),o=1e3/60;let l=null,u=0,d=0;function f(){r.add(s,"visibilitychange",()=>{s.hidden&&A()})}function p(){y(),r.clear()}function m(E){if(!d)return;l||(l=E,e(),e());const w=E-l;for(l=E,u+=w;u>=o;)e(),u-=o;const T=u/o;n(T),d&&(d=t.requestAnimationFrame(m))}function v(){d||(d=t.requestAnimationFrame(m))}function y(){t.cancelAnimationFrame(d),l=null,u=0,d=0}function A(){l=null,u=0}return{init:f,destroy:p,start:v,stop:y,update:e,render:n}}function bN(s,t){const e=t==="rtl",n=s==="y",r=n?"y":"x",o=n?"x":"y",l=!n&&e?-1:1,u=p(),d=m();function f(A){const{height:S,width:E}=A;return n?S:E}function p(){return n?"top":e?"right":"left"}function m(){return n?"bottom":e?"left":"right"}function v(A){return A*l}return{scroll:r,cross:o,startEdge:u,endEdge:d,measureSize:f,direction:v}}function hr(s=0,t=0){const e=fe(s-t);function n(f){return f<s}function r(f){return f>t}function o(f){return n(f)||r(f)}function l(f){return o(f)?n(f)?s:t:f}function u(f){return e?f-e*Math.ceil((f-t)/e):f}return{length:e,max:t,min:s,constrain:l,reachedAny:o,reachedMax:r,reachedMin:n,removeOffset:u}}function QA(s,t,e){const{constrain:n}=hr(0,s),r=s+1;let o=l(t);function l(v){return e?fe((r+v)%r):n(v)}function u(){return o}function d(v){return o=l(v),m}function f(v){return p().set(u()+v)}function p(){return QA(s,u(),e)}const m={get:u,set:d,add:f,clone:p};return m}function vN(s,t,e,n,r,o,l,u,d,f,p,m,v,y,A,S,E,w,T){const{cross:x,direction:M}=s,O=["INPUT","SELECT","TEXTAREA"],k={passive:!1},R=Vo(),B=Vo(),U=hr(50,225).constrain(y.measure(20)),Z={mouse:300,touch:400},H={mouse:500,touch:600},it=A?43:25;let Q=!1,nt=0,rt=0,L=!1,F=!1,V=!1,lt=!1;function yt(ot){if(!T)return;function Rt(ie){(wu(T)||T(ot,ie))&&gt(ie)}const Bt=t;R.add(Bt,"dragstart",ie=>ie.preventDefault(),k).add(Bt,"touchmove",()=>{},k).add(Bt,"touchend",()=>{}).add(Bt,"touchstart",Rt).add(Bt,"mousedown",Rt).add(Bt,"touchcancel",_t).add(Bt,"contextmenu",_t).add(Bt,"click",wt,!0)}function N(){R.clear(),B.clear()}function X(){const ot=lt?e:t;B.add(ot,"touchmove",at,k).add(ot,"touchend",_t).add(ot,"mousemove",at,k).add(ot,"mouseup",_t)}function W(ot){const Rt=ot.nodeName||"";return O.includes(Rt)}function st(){return(A?H:Z)[lt?"mouse":"touch"]}function ut(ot,Rt){const Bt=m.add(vp(ot)*-1),ie=p.byDistance(ot,!A).distance;return A||fe(ot)<U?ie:E&&Rt?ie*.5:p.byIndex(Bt.get(),0).distance}function gt(ot){const Rt=zf(ot,n);lt=Rt,V=A&&Rt&&!ot.buttons&&Q,Q=zo(r.get(),l.get())>=2,!(Rt&&ot.button!==0)&&(W(ot.target)||(L=!0,o.pointerDown(ot),f.useFriction(0).useDuration(0),r.set(l),X(),nt=o.readPoint(ot),rt=o.readPoint(ot,x),v.emit("pointerDown")))}function at(ot){if(!zf(ot,n)&&ot.touches.length>=2)return _t(ot);const Bt=o.readPoint(ot),ie=o.readPoint(ot,x),ye=zo(Bt,nt),Fe=zo(ie,rt);if(!F&&!lt&&(!ot.cancelable||(F=ye>Fe,!F)))return _t(ot);const fn=o.pointerMove(ot);ye>S&&(V=!0),f.useFriction(.3).useDuration(.75),u.start(),r.add(M(fn)),ot.preventDefault()}function _t(ot){const Bt=p.byDistance(0,!1).index!==m.get(),ie=o.pointerUp(ot)*st(),ye=ut(M(ie),Bt),Fe=fN(ie,ye),fn=it-10*Fe,Le=w+Fe/50;F=!1,L=!1,B.clear(),f.useDuration(fn).useFriction(Le),d.distance(ye,!A),lt=!1,v.emit("pointerUp")}function wt(ot){V&&(ot.stopPropagation(),ot.preventDefault(),V=!1)}function jt(){return L}return{init:yt,destroy:N,pointerDown:jt}}function yN(s,t){let n,r;function o(m){return m.timeStamp}function l(m,v){const A=`client${(v||s.scroll)==="x"?"X":"Y"}`;return(zf(m,t)?m:m.touches[0])[A]}function u(m){return n=m,r=m,l(m)}function d(m){const v=l(m)-l(r),y=o(m)-o(n)>170;return r=m,y&&(n=m),v}function f(m){if(!n||!r)return 0;const v=l(r)-l(n),y=o(m)-o(n),A=o(m)-o(r)>170,S=v/y;return y&&!A&&fe(S)>.1?S:0}return{pointerDown:u,pointerMove:d,pointerUp:f,readPoint:l}}function SN(){function s(e){const{offsetTop:n,offsetLeft:r,offsetWidth:o,offsetHeight:l}=e;return{top:n,right:r+o,bottom:n+l,left:r,width:o,height:l}}return{measure:s}}function AN(s){function t(n){return s*(n/100)}return{measure:t}}function wN(s,t,e,n,r,o,l){const u=[s].concat(n);let d,f,p=[],m=!1;function v(E){return r.measureSize(l.measure(E))}function y(E){if(!o)return;f=v(s),p=n.map(v);function w(T){for(const x of T){if(m)return;const M=x.target===s,O=n.indexOf(x.target),k=M?f:p[O],R=v(M?s:n[O]);if(fe(R-k)>=.5){E.reInit(),t.emit("resize");break}}}d=new ResizeObserver(T=>{(wu(o)||o(E,T))&&w(T)}),e.requestAnimationFrame(()=>{u.forEach(T=>d.observe(T))})}function A(){m=!0,d&&d.disconnect()}return{init:y,destroy:A}}function _N(s,t,e,n,r,o){let l=0,u=0,d=r,f=o,p=s.get(),m=0;function v(){const k=n.get()-s.get(),R=!d;let B=0;return R?(l=0,e.set(n),s.set(n),B=k):(e.set(s),l+=k/d,l*=f,p+=l,s.add(l),B=p-m),u=vp(B),m=p,O}function y(){const k=n.get()-t.get();return fe(k)<.001}function A(){return d}function S(){return u}function E(){return l}function w(){return x(r)}function T(){return M(o)}function x(k){return d=k,O}function M(k){return f=k,O}const O={direction:S,duration:A,velocity:E,seek:v,settled:y,useBaseFriction:T,useBaseDuration:w,useFriction:M,useDuration:x};return O}function EN(s,t,e,n,r){const o=r.measure(10),l=r.measure(50),u=hr(.1,.99);let d=!1;function f(){return!(d||!s.reachedAny(e.get())||!s.reachedAny(t.get()))}function p(y){if(!f())return;const A=s.reachedMin(t.get())?"min":"max",S=fe(s[A]-t.get()),E=e.get()-t.get(),w=u.constrain(S/l);e.subtract(E*w),!y&&fe(E)<o&&(e.set(s.constrain(e.get())),n.useDuration(25).useBaseFriction())}function m(y){d=!y}return{shouldConstrain:f,constrain:p,toggleActive:m}}function xN(s,t,e,n,r){const o=hr(-t+s,0),l=m(),u=p(),d=v();function f(A,S){return zo(A,S)<=1}function p(){const A=l[0],S=fi(l),E=l.lastIndexOf(A),w=l.indexOf(S)+1;return hr(E,w)}function m(){return e.map((A,S)=>{const{min:E,max:w}=o,T=o.constrain(A),x=!S,M=yp(e,S);return x?w:M||f(E,T)?E:f(w,T)?w:T}).map(A=>parseFloat(A.toFixed(3)))}function v(){if(t<=s+r)return[o.max];if(n==="keepSnaps")return l;const{min:A,max:S}=u;return l.slice(A,S)}return{snapsContained:d,scrollContainLimit:u}}function TN(s,t,e){const n=t[0],r=e?n-s:fi(t);return{limit:hr(r,n)}}function CN(s,t,e,n){const o=t.min+.1,l=t.max+.1,{reachedMin:u,reachedMax:d}=hr(o,l);function f(v){return v===1?d(e.get()):v===-1?u(e.get()):!1}function p(v){if(!f(v))return;const y=s*(v*-1);n.forEach(A=>A.add(y))}return{loop:p}}function MN(s){const{max:t,length:e}=s;function n(o){const l=o-t;return e?l/-e:0}return{get:n}}function DN(s,t,e,n,r){const{startEdge:o,endEdge:l}=s,{groupSlides:u}=r,d=m().map(t.measure),f=v(),p=y();function m(){return u(n).map(S=>fi(S)[l]-S[0][o]).map(fe)}function v(){return n.map(S=>e[o]-S[o]).map(S=>-fe(S))}function y(){return u(f).map(S=>S[0]).map((S,E)=>S+d[E])}return{snaps:f,snapsAligned:p}}function ON(s,t,e,n,r,o){const{groupSlides:l}=r,{min:u,max:d}=n,f=p();function p(){const v=l(o),y=!s||t==="keepSnaps";return e.length===1?[o]:y?v:v.slice(u,d).map((A,S,E)=>{const w=!S,T=yp(E,S);if(w){const x=fi(E[0])+1;return i0(x)}if(T){const x=Qo(o)-fi(E)[0]+1;return i0(x,fi(E)[0])}return A})}return{slideRegistry:f}}function RN(s,t,e,n,r){const{reachedAny:o,removeOffset:l,constrain:u}=n;function d(A){return A.concat().sort((S,E)=>fe(S)-fe(E))[0]}function f(A){const S=s?l(A):u(A),E=t.map((T,x)=>({diff:p(T-S,0),index:x})).sort((T,x)=>fe(T.diff)-fe(x.diff)),{index:w}=E[0];return{index:w,distance:S}}function p(A,S){const E=[A,A+e,A-e];if(!s)return A;if(!S)return d(E);const w=E.filter(T=>vp(T)===S);return w.length?d(w):fi(E)-e}function m(A,S){const E=t[A]-r.get(),w=p(E,S);return{index:A,distance:w}}function v(A,S){const E=r.get()+A,{index:w,distance:T}=f(E),x=!s&&o(E);if(!S||x)return{index:w,distance:A};const M=t[w]-T,O=A+p(M,0);return{index:w,distance:O}}return{byDistance:v,byIndex:m,shortcut:p}}function kN(s,t,e,n,r,o,l){function u(m){const v=m.distance,y=m.index!==t.get();o.add(v),v&&(n.duration()?s.start():(s.update(),s.render(1),s.update())),y&&(e.set(t.get()),t.set(m.index),l.emit("select"))}function d(m,v){const y=r.byDistance(m,v);u(y)}function f(m,v){const y=t.clone().set(m),A=r.byIndex(y.get(),v);u(A)}return{distance:d,index:f}}function NN(s,t,e,n,r,o,l,u){const d={passive:!0,capture:!0};let f=0;function p(y){if(!u)return;function A(S){if(new Date().getTime()-f>10)return;l.emit("slideFocusStart"),s.scrollLeft=0;const T=e.findIndex(x=>x.includes(S));bp(T)&&(r.useDuration(0),n.index(T,0),l.emit("slideFocus"))}o.add(document,"keydown",m,!1),t.forEach((S,E)=>{o.add(S,"focus",w=>{(wu(u)||u(y,w))&&A(E)},d)})}function m(y){y.code==="Tab"&&(f=new Date().getTime())}return{init:p}}function No(s){let t=s;function e(){return t}function n(d){t=l(d)}function r(d){t+=l(d)}function o(d){t-=l(d)}function l(d){return bp(d)?d:d.get()}return{get:e,set:n,add:r,subtract:o}}function JA(s,t){const e=s.scroll==="x"?l:u,n=t.style;let r=null,o=!1;function l(v){return`translate3d(${v}px,0px,0px)`}function u(v){return`translate3d(0px,${v}px,0px)`}function d(v){if(o)return;const y=pN(s.direction(v));y!==r&&(n.transform=e(y),r=y)}function f(v){o=!v}function p(){o||(n.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:d,toggleActive:f}}function LN(s,t,e,n,r,o,l,u,d){const p=Go(r),m=Go(r).reverse(),v=w().concat(T());function y(R,B){return R.reduce((U,Z)=>U-r[Z],B)}function A(R,B){return R.reduce((U,Z)=>y(U,B)>0?U.concat([Z]):U,[])}function S(R){return o.map((B,U)=>({start:B-n[U]+.5+R,end:B+t-.5+R}))}function E(R,B,U){const Z=S(B);return R.map(H=>{const it=U?0:-e,Q=U?e:0,nt=U?"end":"start",rt=Z[H][nt];return{index:H,loopPoint:rt,slideLocation:No(-1),translate:JA(s,d[H]),target:()=>u.get()>rt?it:Q}})}function w(){const R=l[0],B=A(m,R);return E(B,e,!1)}function T(){const R=t-l[0]-1,B=A(p,R);return E(B,-e,!0)}function x(){return v.every(({index:R})=>{const B=p.filter(U=>U!==R);return y(B,t)<=.1})}function M(){v.forEach(R=>{const{target:B,translate:U,slideLocation:Z}=R,H=B();H!==Z.get()&&(U.to(H),Z.set(H))})}function O(){v.forEach(R=>R.translate.clear())}return{canLoop:x,clear:O,loop:M,loopPoints:v}}function zN(s,t,e){let n,r=!1;function o(d){if(!e)return;function f(p){for(const m of p)if(m.type==="childList"){d.reInit(),t.emit("slidesChanged");break}}n=new MutationObserver(p=>{r||(wu(e)||e(d,p))&&f(p)}),n.observe(s,{childList:!0})}function l(){n&&n.disconnect(),r=!0}return{init:o,destroy:l}}function PN(s,t,e,n){const r={};let o=null,l=null,u,d=!1;function f(){u=new IntersectionObserver(A=>{d||(A.forEach(S=>{const E=t.indexOf(S.target);r[E]=S}),o=null,l=null,e.emit("slidesInView"))},{root:s.parentElement,threshold:n}),t.forEach(A=>u.observe(A))}function p(){u&&u.disconnect(),d=!0}function m(A){return $o(r).reduce((S,E)=>{const w=parseInt(E),{isIntersecting:T}=r[w];return(A&&T||!A&&!T)&&S.push(w),S},[])}function v(A=!0){if(A&&o)return o;if(!A&&l)return l;const S=m(A);return A&&(o=S),A||(l=S),S}return{init:f,destroy:p,get:v}}function BN(s,t,e,n,r,o){const{measureSize:l,startEdge:u,endEdge:d}=s,f=e[0]&&r,p=A(),m=S(),v=e.map(l),y=E();function A(){if(!f)return 0;const T=e[0];return fe(t[u]-T[u])}function S(){if(!f)return 0;const T=o.getComputedStyle(fi(n));return parseFloat(T.getPropertyValue(`margin-${d}`))}function E(){return e.map((T,x,M)=>{const O=!x,k=yp(M,x);return O?v[x]+p:k?v[x]+m:M[x+1][u]-T[u]}).map(fe)}return{slideSizes:v,slideSizesWithGaps:y,startGap:p,endGap:m}}function IN(s,t,e,n,r,o,l,u,d){const{startEdge:f,endEdge:p,direction:m}=s,v=bp(e);function y(w,T){return Go(w).filter(x=>x%T===0).map(x=>w.slice(x,x+T))}function A(w){return w.length?Go(w).reduce((T,x,M)=>{const O=fi(T)||0,k=O===0,R=x===Qo(w),B=r[f]-o[O][f],U=r[f]-o[x][p],Z=!n&&k?m(l):0,H=!n&&R?m(u):0,it=fe(U-H-(B+Z));return M&&it>t+d&&T.push(x),R&&T.push(w.length),T},[]).map((T,x,M)=>{const O=Math.max(M[x-1]||0);return w.slice(O,T)}):[]}function S(w){return v?y(w,e):A(w)}return{groupSlides:S}}function FN(s,t,e,n,r,o,l){const{align:u,axis:d,direction:f,startIndex:p,loop:m,duration:v,dragFree:y,dragThreshold:A,inViewThreshold:S,slidesToScroll:E,skipSnaps:w,containScroll:T,watchResize:x,watchSlides:M,watchDrag:O,watchFocus:k}=o,R=2,B=SN(),U=B.measure(t),Z=e.map(B.measure),H=bN(d,f),it=H.measureSize(U),Q=AN(it),nt=mN(u,it),rt=!m&&!!T,L=m||!!T,{slideSizes:F,slideSizesWithGaps:V,startGap:lt,endGap:yt}=BN(H,U,Z,e,L,r),N=IN(H,it,E,m,U,Z,lt,yt,R),{snaps:X,snapsAligned:W}=DN(H,nt,U,Z,N),st=-fi(X)+fi(V),{snapsContained:ut,scrollContainLimit:gt}=xN(it,st,W,T,R),at=rt?ut:W,{limit:_t}=TN(st,at,m),wt=QA(Qo(at),p,m),jt=wt.clone(),Dt=Go(e),ot=({dragHandler:Ee,scrollBody:Se,scrollBounds:Ji,options:{loop:pn}})=>{pn||Ji.constrain(Ee.pointerDown()),Se.seek()},Rt=({scrollBody:Ee,translate:Se,location:Ji,offsetLocation:pn,previousLocation:nn,scrollLooper:an,slideLooper:Ve,dragHandler:_u,animation:Eu,eventHandler:Jo,scrollBounds:gr,options:{loop:Ps}},Bs)=>{const gi=Ee.settled(),br=!gr.shouldConstrain(),ts=Ps?gi:gi&&br,tl=ts&&!_u.pointerDown();tl&&Eu.stop();const el=Ji.get()*Bs+nn.get()*(1-Bs);pn.set(el),Ps&&(an.loop(Ee.direction()),Ve.loop()),Se.to(pn.get()),tl&&Jo.emit("settle"),ts||Jo.emit("scroll")},Bt=gN(n,r,()=>ot(mi),Ee=>Rt(mi,Ee)),ie=.68,ye=at[wt.get()],Fe=No(ye),fn=No(ye),Le=No(ye),je=No(ye),en=_N(Fe,Le,fn,je,v,ie),Un=RN(m,at,st,_t,je),Hn=kN(Bt,wt,jt,en,Un,je,l),he=MN(_t),oi=Vo(),li=PN(t,e,l,S),{slideRegistry:Gn}=ON(rt,T,at,gt,N,Dt),Mn=NN(s,e,Gn,Hn,en,oi,l,k),mi={ownerDocument:n,ownerWindow:r,eventHandler:l,containerRect:U,slideRects:Z,animation:Bt,axis:H,dragHandler:vN(H,s,n,r,je,yN(H,r),Fe,Bt,Hn,en,Un,wt,l,Q,y,A,w,ie,O),eventStore:oi,percentOfView:Q,index:wt,indexPrevious:jt,limit:_t,location:Fe,offsetLocation:Le,previousLocation:fn,options:o,resizeHandler:wN(t,l,r,e,H,x,B),scrollBody:en,scrollBounds:EN(_t,Le,je,en,Q),scrollLooper:CN(st,_t,Le,[Fe,Le,fn,je]),scrollProgress:he,scrollSnapList:at.map(he.get),scrollSnaps:at,scrollTarget:Un,scrollTo:Hn,slideLooper:LN(H,it,st,F,V,X,at,Le,e),slideFocus:Mn,slidesHandler:zN(t,l,M),slidesInView:li,slideIndexes:Dt,slideRegistry:Gn,slidesToScroll:N,target:je,translate:JA(H,t)};return mi}function jN(){let s={},t;function e(f){t=f}function n(f){return s[f]||[]}function r(f){return n(f).forEach(p=>p(t,f)),d}function o(f,p){return s[f]=n(f).concat([p]),d}function l(f,p){return s[f]=n(f).filter(m=>m!==p),d}function u(){s={}}const d={init:e,emit:r,off:l,on:o,clear:u};return d}const UN={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function HN(s){function t(o,l){return KA(o,l||{})}function e(o){const l=o.breakpoints||{},u=$o(l).filter(d=>s.matchMedia(d).matches).map(d=>l[d]).reduce((d,f)=>t(d,f),{});return t(o,u)}function n(o){return o.map(l=>$o(l.breakpoints||{})).reduce((l,u)=>l.concat(u),[]).map(s.matchMedia)}return{mergeOptions:t,optionsAtMedia:e,optionsMediaQueries:n}}function GN(s){let t=[];function e(o,l){return t=l.filter(({options:u})=>s.optionsAtMedia(u).active!==!1),t.forEach(u=>u.init(o,s)),l.reduce((u,d)=>Object.assign(u,{[d.name]:d}),{})}function n(){t=t.filter(o=>o.destroy())}return{init:e,destroy:n}}function Kc(s,t,e){const n=s.ownerDocument,r=n.defaultView,o=HN(r),l=GN(o),u=Vo(),d=jN(),{mergeOptions:f,optionsAtMedia:p,optionsMediaQueries:m}=o,{on:v,off:y,emit:A}=d,S=H;let E=!1,w,T=f(UN,Kc.globalOptions),x=f(T),M=[],O,k,R;function B(){const{container:Dt,slides:ot}=x;k=(Lf(Dt)?s.querySelector(Dt):Dt)||s.children[0];const Bt=Lf(ot)?k.querySelectorAll(ot):ot;R=[].slice.call(Bt||k.children)}function U(Dt){const ot=FN(s,k,R,n,r,Dt,d);if(Dt.loop&&!ot.slideLooper.canLoop()){const Rt=Object.assign({},Dt,{loop:!1});return U(Rt)}return ot}function Z(Dt,ot){E||(T=f(T,Dt),x=p(T),M=ot||M,B(),w=U(x),m([T,...M.map(({options:Rt})=>Rt)]).forEach(Rt=>u.add(Rt,"change",H)),x.active&&(w.translate.to(w.location.get()),w.animation.init(),w.slidesInView.init(),w.slideFocus.init(jt),w.eventHandler.init(jt),w.resizeHandler.init(jt),w.slidesHandler.init(jt),w.options.loop&&w.slideLooper.loop(),k.offsetParent&&R.length&&w.dragHandler.init(jt),O=l.init(jt,M)))}function H(Dt,ot){const Rt=N();it(),Z(f({startIndex:Rt},Dt),ot),d.emit("reInit")}function it(){w.dragHandler.destroy(),w.eventStore.clear(),w.translate.clear(),w.slideLooper.clear(),w.resizeHandler.destroy(),w.slidesHandler.destroy(),w.slidesInView.destroy(),w.animation.destroy(),l.destroy(),u.clear()}function Q(){E||(E=!0,u.clear(),it(),d.emit("destroy"),d.clear())}function nt(Dt,ot,Rt){!x.active||E||(w.scrollBody.useBaseFriction().useDuration(ot===!0?0:x.duration),w.scrollTo.index(Dt,Rt||0))}function rt(Dt){const ot=w.index.add(1).get();nt(ot,Dt,-1)}function L(Dt){const ot=w.index.add(-1).get();nt(ot,Dt,1)}function F(){return w.index.add(1).get()!==N()}function V(){return w.index.add(-1).get()!==N()}function lt(){return w.scrollSnapList}function yt(){return w.scrollProgress.get(w.offsetLocation.get())}function N(){return w.index.get()}function X(){return w.indexPrevious.get()}function W(){return w.slidesInView.get()}function st(){return w.slidesInView.get(!1)}function ut(){return O}function gt(){return w}function at(){return s}function _t(){return k}function wt(){return R}const jt={canScrollNext:F,canScrollPrev:V,containerNode:_t,internalEngine:gt,destroy:Q,off:y,on:v,emit:A,plugins:ut,previousScrollSnap:X,reInit:S,rootNode:at,scrollNext:rt,scrollPrev:L,scrollProgress:yt,scrollSnapList:lt,scrollTo:nt,selectedScrollSnap:N,slideNodes:wt,slidesInView:W,slidesNotInView:st};return Z(t,e),setTimeout(()=>d.emit("init"),0),jt}Kc.globalOptions=void 0;function Sp(s={},t=[]){const e=D.useRef(s),n=D.useRef(t),[r,o]=D.useState(),[l,u]=D.useState(),d=D.useCallback(()=>{r&&r.reInit(e.current,n.current)},[r]);return D.useEffect(()=>{gp(e.current,s)||(e.current=s,d())},[s,d]),D.useEffect(()=>{dN(n.current,t)||(n.current=t,d())},[t,d]),D.useEffect(()=>{if(hN()&&l){Kc.globalOptions=Sp.globalOptions;const f=Kc(l,e.current,n.current);return o(f),()=>f.destroy()}else o(void 0)},[l,o]),[u,r]}Sp.globalOptions=void 0;function t1(s){const t=ae.c(16),{pageNumber:e,scale:n,className:r,fixedWidth:o}=s,l=n===void 0?1:n,{getPage:u}=fu(),d=D.useRef(null),f=D.useRef(null),p=D.useRef(null),[m,v]=D.useState(0);let y,A;t[0]!==o?(y=()=>{const M=f.current;if(!M)return;const O=new ResizeObserver(k=>{const R=k[0];R&&o===void 0&&v(R.contentRect.width)});return O.observe(M),()=>O.disconnect()},A=[o],t[0]=o,t[1]=y,t[2]=A):(y=t[1],A=t[2]),D.useEffect(y,A);let S,E;t[3]!==m||t[4]!==o||t[5]!==u||t[6]!==e||t[7]!==l?(S=()=>{let M=!1;return async function(){const R=d.current;if(!R)return;p.current?.cancel();const B=o??m;if(B<=0)return;const U=await u(e);if(M)return;const Z=U.getViewport({scale:1}),H=B>0?Math.max((B-8)/Z.width,.1):1,it=U.getViewport({scale:H*l}),Q=window.devicePixelRatio||1,nt=R.getContext("2d",{alpha:!1});if(!nt)return;R.width=Math.floor(it.width*Q),R.height=Math.floor(it.height*Q),R.style.width=`${Math.floor(it.width)}px`,R.style.height=`${Math.floor(it.height)}px`,nt.setTransform(Q,0,0,Q,0,0);const rt=U.render({canvasContext:nt,canvas:R,viewport:it});p.current=rt;try{await rt.promise}catch(L){const F=L;if(!e1(F))throw F}}().catch($N),()=>{M=!0,p.current?.cancel()}},E=[m,o,u,e,l],t[3]=m,t[4]=o,t[5]=u,t[6]=e,t[7]=l,t[8]=S,t[9]=E):(S=t[8],E=t[9]),D.useEffect(S,E);let w;t[10]!==o?(w=o?{width:`${Math.floor(o)}px`}:void 0,t[10]=o,t[11]=w):w=t[11];let T;t[12]===Symbol.for("react.memo_cache_sentinel")?(T=P.jsx("canvas",{ref:d,className:"mx-auto rounded-md bg-white shadow-sm"}),t[12]=T):T=t[12];let x;return t[13]!==r||t[14]!==w?(x=P.jsx("div",{ref:f,className:r,style:w,children:T}),t[13]=r,t[14]=w,t[15]=x):x=t[15],x}function $N(s){e1(s)||console.error(s)}const e1=s=>typeof s=="object"&&s!==null&&"name"in s&&s.name==="RenderingCancelledException";function VN(){const n=D.useRef(null),[r,o]=D.useState(0),[l,u]=D.useState(0),[d,f]=D.useState({}),{numPages:p,getPage:m,getPageSize:v}=fu(),y=Math.max(1,p),A=Re(H=>H.currentPage),S=Re(H=>H.zoomScale),E=Re(H=>H.isSpreadMode),w=Re(H=>H.setCurrentPage),T=Re(H=>H.setGoToPageImpl),x=D.useRef(A);D.useEffect(()=>{x.current=A},[A]);const M=E?2:1,O=Math.max(1,Math.ceil(y/M)),k=H=>Math.floor((Math.max(1,H)-1)/M),R=H=>H*M+1,B=D.useMemo(()=>{const H=r>0?r-8:800,it=l>0?l:1e3,Q=d[A]??1.4142,nt=Math.max(280,(it-12)/Q),L=(H-(E?12:0))/M,F=Math.min(1024,L,nt);return Math.max(220,F*S)},[l,r,A,E,d,M,S]),[U,Z]=Sp({loop:!1,align:"start",dragFree:!1,skipSnaps:!1,direction:"rtl"});return D.useEffect(()=>{if(!Z)return;const H=()=>{const it=Z.selectedScrollSnap();if(!E){w(R(it));return}const Q=R(it),nt=Q+1<=y?Q+1:null,rt=x.current;w(rt===Q||rt===nt?rt:Q)};return Z.on("select",H),H(),()=>{Z.off("select",H)}},[Z,E,w,y]),D.useEffect(()=>{if(!Z){T(null);return}return T(H=>{Z.scrollTo(k(H))}),()=>T(null)},[Z,M,T]),D.useEffect(()=>{const H=n.current;if(!H)return;const it=new ResizeObserver(Q=>{const nt=Q[0];nt&&(o(nt.contentRect.width),u(nt.contentRect.height))});return it.observe(H),()=>it.disconnect()},[]),D.useEffect(()=>{let H=!0;const it=E?[A-3,A-2,A-1,A,A+1,A+2,A+3]:[A-2,A-1,A,A+1,A+2];for(const Q of it)Q<1||Q>p||d[Q]!==void 0||v(Q).then(({width:nt,height:rt})=>{if(!H||nt<=0)return;const L=rt/nt;f(F=>F[Q]!==void 0?F:{...F,[Q]:L})});return()=>{H=!1}},[A,v,E,p,d]),D.useEffect(()=>{const H=E?[A-2,A-1,A,A+1,A+2]:[A-1,A,A+1];for(const it of H)it<1||it>y||m(it).catch(()=>{})},[A,m,E,y]),D.useEffect(()=>{Z&&Z.scrollTo(k(A),!0)},[Z,A,M]),P.jsx("div",{ref:n,className:"h-full overflow-hidden px-2 pb-16 pt-3 md:px-4",children:P.jsx("div",{ref:U,className:"h-full overflow-hidden",children:P.jsx("div",{className:"flex h-full flex-row-reverse",children:Array.from({length:O},(H,it)=>{const Q=R(it),nt=Q+1<=y?Q+1:null,rt=E?nt?[nt,Q]:[Q]:[Q],L=rt.some(V=>Math.abs(V-A)<=2),F=k(A)===it;return P.jsx("div",{className:"h-full min-w-0 flex-[0_0_100%]",children:P.jsx("div",{"data-active-scroll":F?"true":"false",className:"mx-auto h-full overflow-auto pb-4",children:P.jsx("div",{className:"mx-auto flex w-fit gap-3",children:rt.map(V=>{const lt=d[V]??1.4142;return L?P.jsx(t1,{pageNumber:V,scale:1,className:"mx-auto",fixedWidth:B},V):P.jsx("div",{className:"mx-auto rounded-md border border-dashed bg-muted/40",style:{width:`${Math.floor(B)}px`,height:`${Math.floor(B*lt)}px`}},V)})})})},Q)})})})})}function oa(s,t,e){let n=e.initialDeps??[],r,o=!0;function l(){var u,d,f;let p;e.key&&((u=e.debug)!=null&&u.call(e))&&(p=Date.now());const m=s();if(!(m.length!==n.length||m.some((A,S)=>n[S]!==A)))return r;n=m;let y;if(e.key&&((d=e.debug)!=null&&d.call(e))&&(y=Date.now()),r=t(...m),e.key&&((f=e.debug)!=null&&f.call(e))){const A=Math.round((Date.now()-p)*100)/100,S=Math.round((Date.now()-y)*100)/100,E=S/16,w=(T,x)=>{for(T=String(T);T.length<x;)T=" "+T;return T};console.info(`%c ${w(S,5)} /${w(A,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*E,120))}deg 100% 31%);`,e?.key)}return e?.onChange&&!(o&&e.skipInitialOnChange)&&e.onChange(r),o=!1,r}return l.updateDeps=u=>{n=u},l}function s0(s,t){if(s===void 0)throw new Error("Unexpected undefined");return s}const XN=(s,t)=>Math.abs(s-t)<1.01,YN=(s,t,e)=>{let n;return function(...r){s.clearTimeout(n),n=s.setTimeout(()=>t.apply(this,r),e)}},r0=s=>{const{offsetWidth:t,offsetHeight:e}=s;return{width:t,height:e}},ZN=s=>s,qN=s=>{const t=Math.max(s.startIndex-s.overscan,0),e=Math.min(s.endIndex+s.overscan,s.count-1),n=[];for(let r=t;r<=e;r++)n.push(r);return n},WN=(s,t)=>{const e=s.scrollElement;if(!e)return;const n=s.targetWindow;if(!n)return;const r=l=>{const{width:u,height:d}=l;t({width:Math.round(u),height:Math.round(d)})};if(r(r0(e)),!n.ResizeObserver)return()=>{};const o=new n.ResizeObserver(l=>{const u=()=>{const d=l[0];if(d?.borderBoxSize){const f=d.borderBoxSize[0];if(f){r({width:f.inlineSize,height:f.blockSize});return}}r(r0(e))};s.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()});return o.observe(e,{box:"border-box"}),()=>{o.unobserve(e)}},a0={passive:!0},o0=typeof window>"u"?!0:"onscrollend"in window,KN=(s,t)=>{const e=s.scrollElement;if(!e)return;const n=s.targetWindow;if(!n)return;let r=0;const o=s.options.useScrollendEvent&&o0?()=>{}:YN(n,()=>{t(r,!1)},s.options.isScrollingResetDelay),l=p=>()=>{const{horizontal:m,isRtl:v}=s.options;r=m?e.scrollLeft*(v&&-1||1):e.scrollTop,o(),t(r,p)},u=l(!0),d=l(!1);e.addEventListener("scroll",u,a0);const f=s.options.useScrollendEvent&&o0;return f&&e.addEventListener("scrollend",d,a0),()=>{e.removeEventListener("scroll",u),f&&e.removeEventListener("scrollend",d)}},QN=(s,t,e)=>{if(t?.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[e.options.horizontal?"inlineSize":"blockSize"])}return s[e.options.horizontal?"offsetWidth":"offsetHeight"]},JN=(s,{adjustments:t=0,behavior:e},n)=>{var r,o;const l=s+t;(o=(r=n.scrollElement)==null?void 0:r.scrollTo)==null||o.call(r,{[n.options.horizontal?"left":"top"]:l,behavior:e})};class tL{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const n=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(r=>{r.forEach(o=>{const l=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var r;(r=n())==null||r.disconnect(),e=null},observe:r=>{var o;return(o=n())==null?void 0:o.observe(r,{box:"border-box"})},unobserve:r=>{var o;return(o=n())==null?void 0:o.unobserve(r)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([n,r])=>{typeof r>"u"&&delete e[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ZN,rangeExtractor:qN,onChange:()=>{},measureElement:QN,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var n,r;(r=(n=this.options).onChange)==null||r.call(n,this,e)},this.maybeNotify=oa(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=o,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,n)=>{const r=new Map,o=new Map;for(let l=n-1;l>=0;l--){const u=e[l];if(r.has(u.lane))continue;const d=o.get(u.lane);if(d==null||u.end>d.end?o.set(u.lane,u):u.end<d.end&&r.set(u.lane,!0),r.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((l,u)=>l.end===u.end?l.index-u.index:l.end-u.end)[0]:void 0},this.getMeasurementOptions=oa(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,n,r,o,l,u)=>(this.prevLanes!==void 0&&this.prevLanes!==u&&(this.lanesChangedFlag=!0),this.prevLanes=u,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:n,scrollMargin:r,getItemKey:o,enabled:l,lanes:u}),{key:!1}),this.getMeasurements=oa(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:n,scrollMargin:r,getItemKey:o,enabled:l,lanes:u},d)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const v of this.laneAssignments.keys())v>=e&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const f=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const p=this.measurementsCache.slice(0,f),m=new Array(u).fill(void 0);for(let v=0;v<f;v++){const y=p[v];y&&(m[y.lane]=v)}for(let v=f;v<e;v++){const y=o(v),A=this.laneAssignments.get(v);let S,E;if(A!==void 0&&this.options.lanes>1){S=A;const M=m[S],O=M!==void 0?p[M]:void 0;E=O?O.end+this.options.gap:n+r}else{const M=this.options.lanes===1?p[v-1]:this.getFurthestMeasurement(p,v);E=M?M.end+this.options.gap:n+r,S=M?M.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,S)}const w=d.get(y),T=typeof w=="number"?w:this.options.estimateSize(v),x=E+T;p[v]={index:v,start:E,size:T,end:x,key:y,lane:S},m[S]=v}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oa(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,n,r,o)=>this.range=e.length>0&&n>0?eL({measurements:e,outerSize:n,scrollOffset:r,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=oa(()=>{let e=null,n=null;const r=this.calculateRange();return r&&(e=r.startIndex,n=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,n]},(e,n,r,o,l)=>o===null||l===null?[]:e({startIndex:o,endIndex:l,overscan:n,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const n=this.options.indexAttribute,r=e.getAttribute(n);return r?parseInt(r,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(e,n)=>{const r=this.indexFromElement(e),o=this.measurementsCache[r];if(!o)return;const l=o.key,u=this.elementsCache.get(l);u!==e&&(u&&this.observer.unobserve(u),this.observer.observe(e),this.elementsCache.set(l,e)),e.isConnected&&this.resizeItem(r,this.options.measureElement(e,n,this))},this.resizeItem=(e,n)=>{const r=this.measurementsCache[e];if(!r)return;const o=this.itemSizeCache.get(r.key)??r.size,l=n-o;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,l,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,n)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((n,r)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(r))});return}this._measureElement(e,void 0)},this.getVirtualItems=oa(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,n)=>{const r=[];for(let o=0,l=e.length;o<l;o++){const u=e[o],d=n[u];r.push(d)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const n=this.getMeasurements();if(n.length!==0)return s0(n[n1(0,n.length-1,r=>s0(n[r]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,n,r=0)=>{if(!this.scrollElement)return 0;const o=this.getSize(),l=this.getScrollOffset();n==="auto"&&(n=e>=l+o?"end":"start"),n==="center"?e+=(r-o)/2:n==="end"&&(e-=o);const u=this.getMaxScrollOffset();return Math.max(Math.min(u,e),0)},this.getOffsetForIndex=(e,n="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const r=this.measurementsCache[e];if(!r)return;const o=this.getSize(),l=this.getScrollOffset();if(n==="auto")if(r.end>=l+o-this.options.scrollPaddingEnd)n="end";else if(r.start<=l+this.options.scrollPaddingStart)n="start";else return[l,n];if(n==="end"&&e===this.options.count-1)return[this.getMaxScrollOffset(),n];const u=n==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(u,n,r.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:n="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,n),{adjustments:void 0,behavior:r})},this.scrollToIndex=(e,{align:n="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let o=0;const l=10,u=f=>{if(!this.targetWindow)return;const p=this.getOffsetForIndex(e,f);if(!p){console.warn("Failed to get offset for index:",e);return}const[m,v]=p;this._scrollToOffset(m,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const y=()=>{if(this.currentScrollToIndex!==e)return;const A=this.getScrollOffset(),S=this.getOffsetForIndex(e,v);if(!S){console.warn("Failed to get offset for index:",e);return}XN(S[0],A)||d(v)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(y):y()})},d=f=>{this.targetWindow&&this.currentScrollToIndex===e&&(o++,o<l?this.targetWindow.requestAnimationFrame(()=>u(f)):console.warn(`Failed to scroll to index ${e} after ${l} attempts.`))};u(n)},this.scrollBy=(e,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var e;const n=this.getMeasurements();let r;if(n.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((e=n[n.length-1])==null?void 0:e.end)??0;else{const o=Array(this.options.lanes).fill(null);let l=n.length-1;for(;l>=0&&o.some(u=>u===null);){const u=n[l];o[u.lane]===null&&(o[u.lane]=u.end),l--}r=Math.max(...o.filter(u=>u!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:n,behavior:r})=>{this.options.scrollToFn(e,{behavior:r,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const n1=(s,t,e,n)=>{for(;s<=t;){const r=(s+t)/2|0,o=e(r);if(o<n)s=r+1;else if(o>n)t=r-1;else return r}return s>0?s-1:0};function eL({measurements:s,outerSize:t,scrollOffset:e,lanes:n}){const r=s.length-1,o=d=>s[d].start;if(s.length<=n)return{startIndex:0,endIndex:r};let l=n1(0,r,o,e),u=l;if(n===1)for(;u<r&&s[u].end<e+t;)u++;else if(n>1){const d=Array(n).fill(0);for(;u<r&&d.some(p=>p<e+t);){const p=s[u];d[p.lane]=p.end,u++}const f=Array(n).fill(e+t);for(;l>=0&&f.some(p=>p>=e);){const p=s[l];f[p.lane]=p.start,l--}l=Math.max(0,l-l%n),u=Math.min(r,u+(n-1-u%n))}return{startIndex:l,endIndex:u}}const l0=typeof document<"u"?D.useLayoutEffect:D.useEffect;function nL({useFlushSync:s=!0,...t}){const e=D.useReducer(()=>({}),{})[1],n={...t,onChange:(o,l)=>{var u;s&&l?cp.flushSync(e):e(),(u=t.onChange)==null||u.call(t,o,l)}},[r]=D.useState(()=>new tL(n));return r.setOptions(n),l0(()=>r._didMount(),[]),l0(()=>r._willUpdate()),r}function iL(s){return nL({observeElementRect:WN,observeElementOffset:KN,scrollToFn:JN,...s})}function sL(){const n=D.useRef(null),r=D.useRef(0),[o,l]=D.useState(0),[u,d]=D.useState(0),[f,p]=D.useState({}),{numPages:m,getPage:v,getPageSize:y}=fu(),A=Math.max(1,m),S=Re(Q=>Q.currentPage),E=Re(Q=>Q.zoomScale),w=Re(Q=>Q.isSpreadMode),T=Re(Q=>Q.setCurrentPage),x=Re(Q=>Q.setGoToPageImpl),M=w?2:1,O=Math.max(1,Math.ceil(A/M)),k=D.useCallback(Q=>Math.floor((Math.max(1,Q)-1)/M),[M]),R=D.useCallback(Q=>{const nt=Q*M+1;if(nt>A)return[A];if(!w)return[nt];const rt=nt+1;return rt<=A?[nt,rt]:[nt]},[w,M,A]),B=D.useCallback(Q=>{const nt=R(Q);return!w||nt.length<2?nt:[nt[1],nt[0]]},[w,R]),U=D.useMemo(()=>{const Q=o>0?o-8:800,nt=u>0?u:1e3,rt=R(k(S)),L=Math.max(...rt.map(N=>f[N]??1.4142)),F=Math.max(220,(nt-12)/L),lt=Math.max(220,(Q-(w?12:0))/M),yt=Math.min(1024,lt,F);return Math.max(180,yt*E)},[u,o,S,w,f,k,M,R,E]),Z=iL({count:O,getScrollElement:()=>n.current,estimateSize:Q=>{const nt=R(Q),rt=Math.max(...nt.map(L=>f[L]??1.4142));return Math.ceil(U*rt)},overscan:2,gap:4}),H=Z.getVirtualItems(),it=D.useCallback(()=>{const Q=n.current;if(!Q)return;if(Q.scrollTop<=2){T(1);return}if(Q.scrollTop+Q.clientHeight>=Q.scrollHeight-2){T(A);return}if(Date.now()<r.current)return;const nt=Z.getVirtualItems();if(nt.length===0)return;const rt=(Z.scrollOffset??0)+Q.clientHeight/2,L=nt.reduce((V,lt)=>{const yt=lt.start+lt.size/2,N=Math.abs(V.start+V.size/2-rt);return Math.abs(yt-rt)<N?lt:V}),F=R(L.index);if(F.includes(S)){T(S);return}T(Math.min(...F))},[S,R,Z,T,A]);return D.useEffect(()=>{const Q=n.current;if(!Q)return;const nt=new ResizeObserver(rt=>{const L=rt[0];L&&(l(L.contentRect.width),d(L.contentRect.height))});return nt.observe(Q),()=>nt.disconnect()},[]),D.useEffect(()=>{let Q=!0;const nt=H.flatMap(rt=>R(rt.index));for(const rt of nt)f[rt]===void 0&&y(rt).then(({width:L,height:F})=>{if(!Q||L<=0)return;const V=F/L;p(lt=>lt[rt]!==void 0?lt:{...lt,[rt]:V})});return()=>{Q=!1}},[y,f,R,H]),D.useEffect(()=>{const Q=w?[S-2,S-1,S,S+1,S+2]:[S-1,S,S+1];for(const nt of Q)nt<1||nt>A||v(nt).catch(()=>{})},[S,v,w,A]),D.useEffect(()=>{Z.measure()},[w,f,U,Z]),D.useEffect(()=>(x(Q=>{r.current=Date.now()+350,Z.scrollToIndex(k(Q),{align:"start",behavior:"auto"})}),()=>x(null)),[k,Z,x]),D.useEffect(()=>{const Q=k(S);Z.getVirtualItems().some(L=>L.index===Q)||(r.current=Date.now()+350,Z.scrollToIndex(Q,{align:"start",behavior:"auto"}))},[S,k,Z]),P.jsx("div",{ref:n,"data-active-scroll":"true",className:"h-full overflow-auto px-2 pb-16 pt-3 md:px-4",onScroll:it,children:P.jsx("div",{className:"relative mx-auto w-full",style:{height:`${Z.getTotalSize()}px`},children:H.map(Q=>{const nt=B(Q.index),L=R(Q.index).some(F=>Math.abs(F-S)<=3);return P.jsx("div",{className:"absolute left-0 top-0 flex w-full justify-center",style:{transform:`translateY(${Q.start}px)`},children:P.jsx("div",{className:"flex w-fit gap-3",children:nt.map(F=>{const V=f[F]??1.4142;return L?P.jsx(t1,{pageNumber:F,scale:1,className:"mx-auto",fixedWidth:U},F):P.jsx("div",{className:"mx-auto rounded-md border border-dashed bg-muted/40",style:{width:`${Math.floor(U)}px`,height:`${Math.floor(U*V)}px`}},F)})})},Q.key)})})})}function rL(s){const t=ae.c(5);let e;t[0]!==s?(e=()=>typeof window>"u"?!1:window.matchMedia(s).matches,t[0]=s,t[1]=e):e=t[1];const[n,r]=D.useState(e);let o,l;return t[2]!==s?(o=()=>{const u=window.matchMedia(s),d=f=>r(f.matches);return r(u.matches),u.addEventListener("change",d),()=>u.removeEventListener("change",d)},l=[s],t[2]=s,t[3]=o,t[4]=l):(o=t[3],l=t[4]),D.useEffect(o,l),n}const i1="https://storage.tierin.f5.si/",aL=`${i1}pdf/3000000010.pdf`,oL=`${i1}metadata/3000000010.json`,df=[50,67,80,100,125,150,175,200,250,300];function lL(){const s=ae.c(108),t=Re(yL),e=Re(vL),n=Re(bL),r=Re(gL),o=Re(mL),l=Re(pL),u=Re(fL),d=Re(dL),f=Re(hL),{numPages:p,isLoading:m,error:v}=fu(),{book:y,fetchBook:A,isLoading:S,error:E}=NO(),[w,T]=D.useState(!1),[x,M]=D.useState(!1),O=rL("(min-width: 768px)");let k,R;s[0]!==A?(k=()=>{A(oL)},R=[A],s[0]=A,s[1]=k,s[2]=R):(k=s[1],R=s[2]),D.useEffect(k,R);let B,U;s[3]!==u||s[4]!==e||s[5]!==f||s[6]!==r||s[7]!==t?(B=()=>{const Ee=Se=>{const Ji=Se.target,pn=Ji?.tagName;if(!(Ji?.isContentEditable||pn==="INPUT"||pn==="TEXTAREA"||pn==="SELECT")){if(Se.key==="+"||Se.key==="=")Se.preventDefault(),u(.1);else if(Se.key==="-"||Se.key==="_")Se.preventDefault(),u(-.1);else if(Se.key==="ArrowRight")Se.preventDefault(),f(e-(t==="horizontal"&&r?2:1));else if(Se.key==="ArrowLeft")Se.preventDefault(),f(e+(t==="horizontal"&&r?2:1));else if(Se.key==="ArrowDown"||Se.key==="ArrowUp"){Se.preventDefault();const an=document.querySelector('[data-active-scroll="true"]');if(an){const Ve=Se.key==="ArrowDown"?120:-120;an.scrollBy({top:Ve,behavior:"auto"})}}}};return window.addEventListener("keydown",Ee),()=>window.removeEventListener("keydown",Ee)},U=[u,e,f,r,t],s[3]=u,s[4]=e,s[5]=f,s[6]=r,s[7]=t,s[8]=B,s[9]=U):(B=s[8],U=s[9]),D.useEffect(B,U),y?.title;const Z=y?.title??"PDF Viewer";let H;s[10]!==n?(H=Math.round(n*100),s[10]=n,s[11]=H):H=s[11];const it=H;let Q;t:{if(df.includes(it)){Q=df;break t}let Ee;s[12]!==it?(Ee=[...df,it].sort(uL),s[12]=it,s[13]=Ee):Ee=s[13],Q=Ee}const nt=Q;let rt;s[14]!==O?(rt=O?null:P.jsx(Ki,{variant:"ghost",size:"icon",onClick:()=>T(!0),"aria-label":"",children:P.jsx(Px,{className:"h-5 w-5"})}),s[14]=O,s[15]=rt):rt=s[15];let L;s[16]!==Z?(L=P.jsx("h1",{className:"truncate text-sm font-semibold md:text-base",children:Z}),s[16]=Z,s[17]=L):L=s[17];let F;s[18]!==rt||s[19]!==L?(F=P.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[rt,L]}),s[18]=rt,s[19]=L,s[20]=F):F=s[20];const V=Math.max(1,p);let lt;s[21]!==e||s[22]!==V?(lt=P.jsxs(Pc,{variant:"secondary",className:"hidden sm:inline-flex",children:[e," / ",V]}),s[21]=e,s[22]=V,s[23]=lt):lt=s[23];const yt=r?"default":"outline";let N;s[24]!==r||s[25]!==d?(N=()=>d(!r),s[24]=r,s[25]=d,s[26]=N):N=s[26];let X;s[27]!==yt||s[28]!==N?(X=P.jsx(Ki,{variant:yt,size:"sm",onClick:N,children:""}),s[27]=yt,s[28]=N,s[29]=X):X=s[29];let W;s[30]!==u?(W=()=>u(-.1),s[30]=u,s[31]=W):W=s[31];let st;s[32]===Symbol.for("react.memo_cache_sentinel")?(st=P.jsx(Ix,{className:"h-4 w-4"}),s[32]=st):st=s[32];let ut;s[33]!==W?(ut=P.jsx(Ki,{variant:"outline",size:"icon",onClick:W,"aria-label":"",children:st}),s[33]=W,s[34]=ut):ut=s[34];const gt=String(it);let at;s[35]!==l?(at=Ee=>l(Number(Ee.target.value)/100),s[35]=l,s[36]=at):at=s[36];let _t;s[37]!==nt?(_t=nt.map(cL),s[37]=nt,s[38]=_t):_t=s[38];let wt;s[39]!==gt||s[40]!==at||s[41]!==_t?(wt=P.jsx("select",{className:"h-9 rounded-md border border-input bg-background px-2 text-sm",value:gt,onChange:at,"aria-label":"",children:_t}),s[39]=gt,s[40]=at,s[41]=_t,s[42]=wt):wt=s[42];let jt;s[43]!==u?(jt=()=>u(.1),s[43]=u,s[44]=jt):jt=s[44];let Dt;s[45]===Symbol.for("react.memo_cache_sentinel")?(Dt=P.jsx(jx,{className:"h-4 w-4"}),s[45]=Dt):Dt=s[45];let ot;s[46]!==jt?(ot=P.jsx(Ki,{variant:"outline",size:"icon",onClick:jt,"aria-label":"",children:Dt}),s[46]=jt,s[47]=ot):ot=s[47];let Rt;s[48]!==X||s[49]!==ut||s[50]!==wt||s[51]!==ot?(Rt=P.jsxs("div",{className:"hidden items-center gap-1 md:flex",children:[X,ut,wt,ot]}),s[48]=X,s[49]=ut,s[50]=wt,s[51]=ot,s[52]=Rt):Rt=s[52];let Bt;s[53]===Symbol.for("react.memo_cache_sentinel")?(Bt=P.jsxs(Ki,{variant:"outline",size:"sm",onClick:()=>M(!0),children:[P.jsx(Lx,{className:"mr-1 h-4 w-4"}),"Info"]}),s[53]=Bt):Bt=s[53];let ie;s[54]!==lt||s[55]!==Rt?(ie=P.jsxs("div",{className:"flex items-center gap-2",children:[lt,Rt,Bt]}),s[54]=lt,s[55]=Rt,s[56]=ie):ie=s[56];let ye;s[57]!==ie||s[58]!==F?(ye=P.jsxs("header",{className:"sticky top-0 z-20 flex h-14 items-center justify-between border-b bg-white/90 px-3 backdrop-blur md:px-4",children:[F,ie]}),s[57]=ie,s[58]=F,s[59]=ye):ye=s[59];let Fe;s[60]!==v||s[61]!==m||s[62]!==t?(Fe=m?P.jsx("div",{className:"grid h-full place-content-center text-sm text-muted-foreground",children:"PDF ..."}):v?P.jsx("div",{className:"grid h-full place-content-center px-4 text-sm text-destructive",children:v}):t==="vertical"?P.jsx(sL,{}):P.jsx(VN,{}),s[60]=v,s[61]=m,s[62]=t,s[63]=Fe):Fe=s[63];const fn=Math.max(1,p);let Le;s[64]!==e||s[65]!==fn?(Le=P.jsx("div",{className:"pointer-events-none absolute left-3 top-3 sm:hidden",children:P.jsxs(Pc,{variant:"secondary",className:"pointer-events-auto",children:[e," / ",fn]})}),s[64]=e,s[65]=fn,s[66]=Le):Le=s[66];let je;s[67]!==it?(je=P.jsx("div",{className:"pointer-events-none absolute right-3 top-3 md:hidden",children:P.jsxs(Pc,{variant:"secondary",className:"pointer-events-auto",children:[it,"%"]})}),s[67]=it,s[68]=je):je=s[68];let en;s[69]!==e||s[70]!==f||s[71]!==t||s[72]!==o?(en=()=>{o(t==="vertical"?"horizontal":"vertical"),f(e)},s[69]=e,s[70]=f,s[71]=t,s[72]=o,s[73]=en):en=s[73];let Un;s[74]!==t?(Un=t==="vertical"?P.jsx(Hx,{className:"h-5 w-5"}):P.jsx($x,{className:"h-5 w-5"}),s[74]=t,s[75]=Un):Un=s[75];let Hn;s[76]!==en||s[77]!==Un?(Hn=P.jsx(Ki,{size:"icon",className:"fixed bottom-5 right-5 z-30 h-12 w-12 rounded-full shadow-lg",onClick:en,"aria-label":"",children:Un}),s[76]=en,s[77]=Un,s[78]=Hn):Hn=s[78];let he;s[79]!==Fe||s[80]!==Le||s[81]!==je||s[82]!==Hn?(he=P.jsxs("main",{className:"relative min-h-0 flex-1",children:[Fe,Le,je,Hn]}),s[79]=Fe,s[80]=Le,s[81]=je,s[82]=Hn,s[83]=he):he=s[83];let oi;s[84]!==ye||s[85]!==he?(oi=P.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[ye,he]}),s[84]=ye,s[85]=he,s[86]=oi):oi=s[86];let li;s[87]!==y||s[88]!==E||s[89]!==e||s[90]!==f||s[91]!==S||s[92]!==O||s[93]!==w||s[94]!==p?(li=O?P.jsxs("aside",{className:"hidden w-80 border-l bg-white p-4 md:block",children:[P.jsx(WA,{book:y,currentPage:e,totalPages:p,onGoToPage:f,onOpenInfo:()=>M(!0)}),S?P.jsx("p",{className:"mt-3 text-xs text-muted-foreground",children:"book.json ..."}):null,E?P.jsx("p",{className:"mt-3 text-xs text-destructive",children:E}):null]}):P.jsx(cN,{open:w,onOpenChange:T,book:y,currentPage:e,totalPages:p,onGoToPage:f,onOpenInfo:()=>M(!0)}),s[87]=y,s[88]=E,s[89]=e,s[90]=f,s[91]=S,s[92]=O,s[93]=w,s[94]=p,s[95]=li):li=s[95];let Gn;s[96]!==y||s[97]!==x?(Gn=P.jsx(Vk,{book:y,open:x,onOpenChange:M}),s[96]=y,s[97]=x,s[98]=Gn):Gn=s[98];let Mn;s[99]!==E||s[100]!==S||s[101]!==O?(Mn=!O&&(S||E)?P.jsx("div",{className:"fixed bottom-4 left-4 z-30 rounded-md border bg-white/90 px-3 py-1 text-xs backdrop-blur",children:S?"book.json ...":E}):null,s[99]=E,s[100]=S,s[101]=O,s[102]=Mn):Mn=s[102];let mi;return s[103]!==oi||s[104]!==li||s[105]!==Gn||s[106]!==Mn?(mi=P.jsxs("div",{className:"flex h-screen bg-gradient-to-b from-slate-100 to-slate-200",children:[oi,li,Gn,Mn]}),s[103]=oi,s[104]=li,s[105]=Gn,s[106]=Mn,s[107]=mi):mi=s[107],mi}function cL(s){return P.jsxs("option",{value:s,children:[s,"%"]},s)}function uL(s,t){return s-t}function hL(s){return s.goToPage}function dL(s){return s.setSpreadMode}function fL(s){return s.changeZoomBy}function pL(s){return s.setZoomScale}function mL(s){return s.setMode}function gL(s){return s.isSpreadMode}function bL(s){return s.zoomScale}function vL(s){return s.currentPage}function yL(s){return s.mode}function SL(){const s=ae.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=P.jsx(eC,{url:aL,children:P.jsx(lL,{})}),s[0]=t):t=s[0],t}x_.createRoot(document.getElementById("root")).render(P.jsx(D.StrictMode,{children:P.jsx(SL,{})}));
